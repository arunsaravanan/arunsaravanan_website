Date.prototype.ToString=function(d,n,o){d=String(d);o=o||false;var k=new Array();var l;for(var g=0;g<d.length;++g){var a=d.charAt(g);if(a==="%"&&g!==d.length-1){l=d.charAt(++g);switch(l){case"d":var b=o?this.getUTCDate():this.getDate();if(b<10){b="0"+b}k.push(b);break;case"m":var j="";if(d.charAt(g+1)==="m"){++g;j=o?this.getUTCMonth():this.getMonth()+1;switch(j){case 1:if(n){j=n.jan}else{j="Jan"}break;case 2:if(n){j=n.feb}else{j="Feb"}break;case 3:if(n){j=n.mar}else{j="Mar"}break;case 4:if(n){j=n.apr}else{j="Apr"}break;case 5:if(n){j=n.may}else{j="May"}break;case 6:if(n){j=n.jun}else{j="Jun"}break;case 7:if(n){j=n.jul}else{j="Jul"}break;case 8:if(n){j=n.aug}else{j="Aug"}break;case 9:if(n){j=n.sep}else{j="Sep"}break;case 10:if(n){j=n.oct}else{j="Oct"}break;case 11:if(n){j=n.nov}else{j="Nov"}break;case 12:if(n){j=n.dec}else{j="Dec"}break}}else{j=o?this.getUTCMonth():this.getMonth()+1;if(j<10){j="0"+j}}k.push(j);break;case"y":var p=this.getYear();if((ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11)&&(!ISQ.Http.browser.isOpera||ISQ.Http.browser.full>="opera10.52")){p+=1900}k.push(p);break;case"Y":var p=this.getYear();if((ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11)&&(!ISQ.Http.browser.isOpera||ISQ.Http.browser.full>="opera10.52")){p+=1900}if(p){k.push(p.toString().substr(2,2))}break;case"H":var f=o?this.getUTCHours():this.getHours();if(f<10){f="0"+f}k.push(f);break;case"M":var h=o?this.getUTCMinutes():this.getMinutes();if(h<10){h="0"+h}k.push(h);break;case"S":var m=o?this.getUTCSeconds():this.getSeconds();if(m<10){m="0"+m}k.push(m);break;case"t":var m=o?this.getUTCMilliseconds():this.getMilliseconds();if(m<10){m="0"+m}k.push(m);break;default:k.push(d.charAt(g-1));k.push(d.charAt(g));break}}else{k.push(a)}}return k.join("")};String.prototype.equals=function(j,h,d){if(!h){h=0}if(h+j.length>this.length){return false}var g=0;var f=h+j.length;for(var c=h;c<f;++c,++g){var a=this.charCodeAt(c);var b=j.charCodeAt(g);
if(a===b){continue}if(!d){return false}if(a>90){a-=32}if(b>90){b-=32}if(a!==b){return false}}return true};String.prototype.startsWith=function(b){if(this.length<b.length){return false}for(var a=0;a<b.length;++a){if(this.charAt(a)!==b.charAt(a)){return false}}return true};String.prototype.endsWith=function(b){if(this.length<b.length){return false}var c=b.length-1;for(var a=this.length-1;a>this.length-1-b.length;--a){if(b.charAt(c--)!==this.charAt(a)){return false}}return true};String.prototype.contains=function(a){return this.indexOf(a)!==-1};String.prototype.Trim=function(f){if(f){var d=this.startsWith_repeat(f);if(d<this.length){var a=this.endsWith_repeat(f);if(d!=0||a!=this.length-1){return this.substring(d,a+1)}else{return this.toString()}}else{return""}}else{var c=0;var b=this.length;for(;/\s/.test(this.charAt(c))&&c<b;++c){}if(c==b){return""}for(;/\s/.test(this.charAt(b-1));--b){}if(c==0&&b==this.length){return String(this)}return this.substring(c,b)}};String.prototype.startsWith_repeat=function(b){if(this.length<b.length){return 0}var c=0;var a=0;for(;a<this.length;a++){if(this.charAt(a)!=b.charAt(c)){a-=c;break}if(c==b.length-1){c=0}else{c++}}return a};String.prototype.endsWith_repeat=function(b){if(this.length<b.length){return this.length}var c=b.length-1;var a=this.length-1;for(;a>0;a--){if(this.charAt(a)!=b.charAt(c)){a+=c;break}if(c==0){c=b.length-1}else{c--}}return a};String.prototype.LastIndexOf=function(d,c){if(this.length===0||d===null){return -1}if(d.length>this.length){return -1}if(isNaN(c)){c=this.length-d.length}var a=false;for(var b=c;b>=0;--b){a=true;for(var f=0;f<d.length;++f){if(this.charAt(b+f)!==d.charAt(f)){a=false;break}}if(a){return b}}return -1};String.prototype.LastIndexOf_char=function(a,c){c=c||this.length-1;for(var b=c;b>=0;--b){if(this.charAt(b)===a){return b}}return -1};String.prototype.setCharAt=function(b,a){if(b>this.length-1){return this}return this.substr(0,b)+a+this.substr(b+1)};String.prototype.countCharAppearances=function(a){var b=0;for(var c=0;c<this.length;++c){if(this.charAt(c)==a){++b
}}return b};String.prototype.indexOfAny=function(f,d){var a=this.length;for(var b=0;b<f.length;++b){var c=this.indexOf(f[b],d);if(c!=-1&&c<a){a=c}}if(a==this.length){return -1}return a};String.prototype.replaceMultipleOccurancesWithOne=function(a,f){var d=this.indexOf(a);if(d===-1){return this.toString()}var g=[];var c=d;var h;for(var b=0;b<this.length;++b){h=this.charAt(b);if(h!==a){g.push(h)}else{if(c!=b-1){g.push(f)}c=b}}return g.join("")};String.prototype.replacer=function(a){var d=null;for(var b=0;b<this.length;++b){var c;for(c=0;c<a.length;++c){if(this.charAt(b)===a[c].from){if(!d){d=[];d.push(this.substring(0,b))}if(a[c].to){d.push(a[c].to)}break}}if(c===a.length&&d){d.push(this.charAt(b))}}if(d){return d.join("")}else{return this}};String.prototype.escaper=function(){return this.replacer(String.escapeData)};String.escapeData=[{from:"\r",to:"\\r"},{from:"\n",to:"\\n"},{from:"\t",to:"\\t"},{from:"'",to:"'"},{from:'"',to:'\\"'},{from:"\\",to:"\\\\"}];String.prototype.replaceAll=function(b,c,a){if(typeof(a)==="undefined"){a=true}return this.replace(new RegExp(b.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),(a?"gi":"g")),(typeof(c)=="string")?c.replace(/\$/g,"$$$$"):c)};String.prototype.firstLetterUpperCase=function(){return this.charAt(0).toUpperCase()+this.slice(1)};if(!document.querySelectorAll){document.querySelectorAll=function(c){var d=document.createElement("style"),b=[],a;document.documentElement.firstChild.appendChild(d);document._qsa=[];d.styleSheet.cssText=c+"{x-qsa:expression(document._qsa && document._qsa.push(this))}";window.scrollBy(0,0);d.parentNode.removeChild(d);while(document._qsa.length){a=document._qsa.shift();a.style.removeAttribute("x-qsa");b.push(a)}document._qsa=null;return b}}if(!document.querySelector){document.querySelector=function(b){var a=document.querySelectorAll(b);return(a.length)?a[0]:null}}function initializeNS(a){var b=a.split(".");var d,f=window;for(var c=0;c<b.length;++c){d=f[b[c]];if(typeof(d)==="undefined"||!d){f[b[c]]=d={}}f=d}return d}function isNSexists(a){var b=a.split(".");
var d=window;for(var c=0;c<b.length;++c){d=d[b[c]];if(typeof(d)==="undefined"||!d){return false}}return true}ISQ=initializeNS("ISQ");nanoRep=ISQ;ISQ.version="4.94.3.792";if(!ISQ.Base){(function(a){a.Base=function b(){};a.Base.polymorphismCtor=function(d,c){if(this.mBase!==null&&typeof(this.mBase.prototype.polymorphismCtor)==="function"){this.initBase.apply(this,c);this.mBase.prototype.polymorphismCtor(d,c)}if(this.ctor!==this.mBase.prototype.ctor){this.ctor.apply(d,c)}};a.Base.extend=function(g){var d=function(){if(typeof(g)==="object"&&g.abstractClass&&this instanceof d){throw ("Trying to create an instance of an abstract class")}if(this.mBase!==null&&typeof(this.mBase.abstractClass)==="object"){for(var h in this.mBase.abstractClass){if(typeof(this[h])!=="function"){throw ("un-implemented abstract method: "+h)}}}this.polymorphismCtor(this,arguments);if(a.runningMode>2){profiler.registerObjectCreation(this)}};for(var f in g){switch(f){case"name":case"prototype":case"abstractClass":continue}d[f]=g[f]}for(var f in this.prototype){d.prototype[f]=this.prototype[f]}if(g._prototype){for(var f in g._prototype){d.prototype[f]=g._prototype[f]}}if(typeof(g)==="object"&&g.abstractClass){d.abstractClass={}}d.prototype.polymorphismCtor=a.Base.polymorphismCtor;d.extend=this.extend;d.prototype.mBase=this;if(typeof(g)!=="object"||typeof(g.name)!=="string"){throw ("Class name is missing (ctorObject.name)")}var c=g.name.replace(/^\s+|\s+$/g,"");if(!c){throw ("Invalid class name")}d.prototype.__className__=d.__className__=c;return d};a.Base.__className__="Base Class";a.Base.prototype.__className__="Base Class";a.Base.prototype.mBase=null;a.Base.prototype.mIsDisposed=false;a.Base.prototype.ctor=function(){};a.Base.prototype.dtor=function(){delete this.mBase};a.Base.prototype.initBase=function(){};a.Base.prototype.isDisposed=function(){return this.mIsDisposed};a.Base.prototype.executeBaseMethod=function(d,c){if(!this.mBase){throw ("Alloy.Base.prototype.executeBaseMethod: no base!")}this.mBase.prototype[d].apply(this,c||[])};a.Base.prototype.dispose=function(){if(this.mIsDisposed){return false
}this.mIsDisposed=true;var d=this.dtor;var f=this.dtor.apply(this,arguments);if(f===false){this.mIsDisposed=false;return false}if(a.runningMode>2){profiler.registerObjectDisposal(this)}var c=this.mBase;while(c!==null){if(c.prototype.dtor!==d){c.prototype.dtor.apply(this,arguments);d=c.prototype.dtor}c=c.prototype.mBase}this.__dispose__();return true};a.Base.prototype.__dispose__=function(){for(var d in this){try{switch(d){case"mBase":case"__dispose__":case"polymorphismCtor":case"extend":case"__className__":continue;break}if(typeof(this[d])==="undefined"||this[d]===null){continue}if(typeof(this[d])!=="function"&&typeof(this[d])!=="object"){continue}if(typeof(this[d].dispose)==="function"){this[d].dispose()}if(this[d] instanceof Array){for(var f in this[d]){if(this[d][f]&&typeof(this[d][f].dispose)==="function"){this[d][f].dispose()}}}delete this[d]}catch(c){if(a.runningMode>1){alert("base::__dispose__: error disposing:"+d+". "+c.message)}}}};a.Base.prototype.isDerivedOf=function(c,f){f=f===true;if(f&&this.__className__===c.__className__){return false}if(this.__className__===c.__className__){return true}var g=false;var d=this.mBase;while(d!==null&&!g){if(c.__className__===d.__className__){g=true}d=d.prototype.mBase}return g};a.Base.isDerivedOf=function(c,d){if(c===null){return false}if(typeof(c)!=="object"||typeof(c.isDerivedOf)!=="function"){return false}return c.isDerivedOf(d)};a.Event=a.Base.extend({name:"Event"});a.Event.prototype.ctor=function(){this.mCount=0};a.Event.prototype.dtor=function(){if(this.handlers!==null){var d=this.handlers.length;for(var c=0;c<d;++c){if(this.handlers[c]!==null){this.handlers[c].dispose()}}delete this.handlers}this.handlers=null};a.Event.prototype.handlers=null;a.Event.prototype.mCount=0;a.Event.prototype.mRemovedHandler=false;a.Event.prototype.dispatch=function(){if(this.isDisposed()){return}if(this.handlers===null){return}var g=this.handlers.length;for(var f=0;f<g;++f){if(this.isDisposed()){return}var d=this.handlers[f];try{if(!d){continue}if(d.isDisposed()){this.mRemovedHandler=true;
this.handlers[f]=null}else{d.handle.apply(d,arguments)}}catch(c){if(a.runningMode){throw (c)}}}if(this.isDisposed()){return}if(this.mRemovedHandler){this.cleanDisposedHandlers()}};a.Event.prototype.cleanDisposedHandlers=function(){if(!this.mRemovedHandler){return}var d=this.handlers.length;for(var c=0;c<d;++c){if(this.handlers[c]===null){this.handlers.splice(c,1);--c;--d}}this.mRemovedHandler=false};a.Event.prototype.clear=function(){if(!this.handlers){return}var d=this.handlers.length;for(var c=0;c<d;++c){this.handlers[c].dispose()}this.handlers=null};a.Event.prototype.addHandlerObject=function(d){if(this.isDisposed()){return}if(this.handlers===null){this.handlers=new Array()}var g=this.handlers.length;for(var f=0;f<g;++f){var c=this.handlers[f];if(c!==null&&c.func===d.func&&c.context===d.context){return}}this.handlers.push(d);++this.mCount;this.cleanDisposedHandlers();return d};a.Event.prototype.addHandler=function(d,c){if(this.isDisposed()){return}if(this.handlers===null){this.handlers=new Array()}var j=this.handlers.length;for(var h=0;h<j;++h){var f=this.handlers[h];if(f!==null&&f.func===d&&f.context===c){return}}var g=new a.Handler(d,c);this.handlers.push(g);++this.mCount;d=null;c=null;this.cleanDisposedHandlers();return g};a.Event.prototype.removeHandlerObject=function(d){if(this.handlers===null){return}var g=this.handlers.length;var c=null;var f;for(f=0;f<g;++f){if(this.handlers[f]===d){--this.mCount;this.handlers[f]=null;break}}this.mRemovedHandler=true;d.dispose()};a.Event.prototype.removeHandler=function(d,c){if(this.handlers===null){return}c=c||null;var h=this.handlers.length;var f=null;var g;for(g=0;(g<h&&f===null);++g){if(this.handlers[g]!==null&&this.handlers[g].func===d&&this.handlers[g].context===c){f=this.handlers[g];this.handlers[g]=null;--this.mCount;break}}this.mRemovedHandler=true;if(f!==null){f.dispose()}d=null;c=null};a.Event.prototype.removeAllHandlers=function(){if(this.handlers===null){return}this.handlers=null};a.Event.prototype.count=function(){return this.mCount};a.Handler=a.Base.extend({name:"Alloy.Handler"});
a.Handler.toHandler=function(c){if(a.Base.isDerivedOf(c,a.Handler)){return c}return new a.Handler(c)};a.Handler.prototype.ctor=function(d,c){d=d||null;c=c||null;if(typeof(d)!=="function"){throw ("Error creating event handler: no function is passed")}this.func=d;this.context=c;return this};a.Handler.prototype.dtor=function(){delete this.func;delete this.context;this.func=null;this.context=null};a.Handler.prototype.handle=function(){return this.func.apply(this.context,arguments)};a.Handler.prototype.handleArgumentArray=function(){if(arguments.length===0){throw ("invalid use of Alloy.Handler.handleArgumentArray")}if(typeof(arguments[0].length)!=="number"){throw ("invalid array in Alloy.Handler.handleArgumentArray")}return this.func.apply(this.context,arguments[0] instanceof Array?arguments[0]:[arguments[0]])};a.Handler.prototype.func=null;a.Handler.prototype.context=null;a.Timer=a.Base.extend({name:"Alloy.Timer"});a.Timer.prototype.ctor=function(d,c){if(!a.Base.isDerivedOf(d,a.Handler)){throw ("Alloy.Timer.ctor: invalid handler")}this.mHandler=d;this.mDisposeAfterTimerElapsed=c!==false;this.mParams=new Array();if(arguments.length<=2){return}for(var f=2;f<arguments.length;++f){this.mParams.push(arguments[f])}};a.Timer.prototype.dtor=function(){this.start=null;if(this.mTimer){clearTimeout(this.mTimer);this.mTimer=null}};a.Timer.prototype.start=function(d){if(typeof(d)!=="number"){throw ("Timer interval illegal")}if(arguments.length>1){this.mParams=new Array();for(var c=1;c<arguments.length;++c){this.mParams.push(arguments[c])}}var f=this;this.mTimer=setTimeout(function(){if(f.mTimer===null){return}f.timerElapsed.apply(f,new Array())},d)};a.Timer.prototype.timerElapsed=function(){this.mHandler.handleArgumentArray(this.mParams);if(this.mDisposeAfterTimerElapsed){this.dispose()}};a.Timer.prototype.cancel=function(){if(this.mTimer===null){return}clearTimeout(this.mTimer);this.mTimer=null};a.Timer.prototype.isRunning=function(){return this.mTimer!==null};a.Timer.prototype.mDisposeAfterTimerElapsed=true;a.Timer.prototype.mTimer=null;
a.Timer.prototype.mHandler=null;a.Timer.prototype.mParams=null}(ISQ))}ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.stateEnum={KEY:5,VALUE:6};ISQ.Tools.stringToPairArray=function(i,b,m,j,k){var c=i.length;if(c===0){return null}var g=new Array();j=j!==false;k=k!==false;var h=ISQ.Tools.stateEnum.KEY;var d="";var a=new Array();var f=0;while(f<c){switch(h){case ISQ.Tools.stateEnum.KEY:if(i.charAt(f)!==b){a.push(i.charAt(f))}else{h=ISQ.Tools.stateEnum.VALUE;d=ISQ.Tools.getStringValue(a,j);a=new Array()}break;case ISQ.Tools.stateEnum.VALUE:if(i.charAt(f)!==m){a.push(i.charAt(f))}else{h=ISQ.Tools.stateEnum.KEY;g[d]=ISQ.Tools.getStringValue(a,k);a=new Array()}break}++f}if(h===ISQ.Tools.stateEnum.VALUE){g[d]=ISQ.Tools.getStringValue(a)}return g};ISQ.Tools.getStringValue=function(a,b){b=b===true;var c=unescape(a.join("").toString()).Trim();if(b){c=c.toLowerCase()}return c};ISQ.Tools.getNumber=function(c,a){if(typeof(c)==="number"){return c}if(typeof(c)!=="string"){c=c.toString()}var b;if(c.contains(".")){b=parseFloat(c)}else{b=parseInt(c)}if(isNaN(b)){return typeof(a)==="number"?a:NaN}return b};ISQ.Tools.verifyNumber=function(b){var a=ISQ.Tools.getNumber(b);if(isNaN(a)){throw ("ISQ.Tools.verifyNumber: given value is not a number")}};ISQ.Tools.getEnumValue=function(a,c){if(typeof(a)!=="object"||c===null){return null}for(var b in a){if(a[b]==c){return b}}return null};ISQ.Tools.getOpacityFromRGBA=function(b){if(b==="transparent"){return 0}var a=b.LastIndexOf(",");if(a===-1){throw ("ISQ.Tools.getOpacityFromRGBA(): Invalid string")}if(b.countCharAppearances(",")===2){return 100}b=b.substring(a+1);return parseInt(b)};ISQ.Tools.RGBtoHex=function(c,b,a){return ISQ.Tools.toHex(c)+ISQ.Tools.toHex(b)+ISQ.Tools.toHex(a)};ISQ.Tools.RGBtoHex2=function(a){a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+ISQ.Tools.toHex(a[1])+ISQ.Tools.toHex(a[2])+ISQ.Tools.toHex(a[3])};ISQ.Tools.toHex=function(a){if(typeof(a)==="string"){a=parseInt(a)}if(typeof(a)!=="number"||a===0){return"00"}a=Math.max(0,a);a=Math.min(a,255);a=Math.round(a);return"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16)
};ISQ.Tools.hexToRGB=function(a){var b={r:-1,g:-1,b:-1};a=(a.charAt(0)=="#")?a.substring(1):a;b.r=parseInt(a.substring(0,2),16);b.g=parseInt(a.substring(2,4),16);b.b=parseInt(a.substring(4,6),16);return b};ISQ.Tools.getPrettyNumber=function(l,c,f,h){l=parseFloat(l);if(isNaN(l)){return l}var n="";if(f){if(l>=1073741824){l=l/1073741824;n="GB"}else{if(l>=1048576){l=l/1048576;n="MB"}else{if(l>=1024){l=l/1024;n="KB"}else{n="B"}}}}else{if(h&&l>=1000){l=l/1000;n="K"}}if(isNaN(c)&&c!==true&&c!==false){c=true}switch(c){case false:break;case 0:l=parseInt(l);break;case true:if(Math.abs(l)<10){c=2}else{if(Math.abs(l)<100){c=1}else{c=0}}l=l.toFixed(c);break;default:l=l.toFixed(c);break}if(l%1===0){l=parseInt(l)}var m=String(l);var d=null;var j=m.indexOf(".");if(j!==-1){d=m.substr(j);var o=-1;for(var g=0;g<d.length;++g){if(d.charAt(g)==="0"){if(o==-1){o=g}}else{o=-1}}if(o!=-1){d=d.substr(0,o)}if(d.length===1){d=null}m=m.substr(0,j)}l=parseInt(m);if((l/1000)>=1){var a=new Array(m.length+Math.floor((m.length-1)/3));var k=a.length;var b=0;for(var g=m.length-1;g>-1;--g){if(g<m.length-1&&b%3===0){a[k--]=","}a[k--]=m.charAt(g);++b}}else{a=[];a.push(l)}if(d!==""){a.push(d)}if(n){a.push(n)}return a.join("")};ISQ.Tools.formatPercentage=function(c){var b;var a=Math.abs(c);if(a>1000){b=(c/1000).toFixed(0)+"K "}else{if(a<1){b=c.toFixed(2)}else{if(a<10){b=c.toFixed(1)}else{b=c.toFixed(0)}}}return b+"%"};ISQ.Tools.toArray=function(d){if(d instanceof Array){return d}var b=new Array();if(typeof(d.length)!=="number"){b.push(d)}else{var c;if(d.length===0){for(c in d){b[c]=d[c]}}else{if(d.length>10000){_debug().insertText("Error converting object to an array. Object length: "+d.length);return new Array()}for(c=0;c<d.length;++c){b[c]=d[c]}}}return b};ISQ.Tools.getDateTicks=function(b,d,f,g,k){b=b.Trim();if(b===""){return -1}var c,h,l;var i=d.indexOf("dd");c=b.substr(i,2);if(isNaN(c)){return -1}i=d.indexOf("mm");h=b.substr(i,2);if(isNaN(h)){return -1}i=d.indexOf("yyyy");if(i===-1){i=d.indexOf("yy")}l=b.substr(i,4);if(isNaN(l)){return -1}var j=new Date();
f=typeof(f)=="undefined"?j.getHours():f;g=typeof(g)=="undefined"?j.getMinutes():g;k=typeof(k)=="undefined"?j.getSeconds():k;var a=new Date(l,h-1,c,f,g,k);return Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())};ISQ.Tools.getIPString=function(c){var b=false;if(c<0){c=-c;b=true}var d=new Array();if(b){d.push(256-(c%256))}else{d.push(c%256)}for(var a=2;a>=0;a--){c=Math.floor(c/256);d.push(".");if(b){d.push(255-(c%256))}else{d.push(c%256)}}return d.join("")};ISQ.Tools.getIPNum=function(c){var d=c.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);if(d){var b=0,f;for(var a=1;a<=4;a++){f=parseInt(d[a]);if(f<0||f>255){return null}b=b*256+f}return b}return null};ISQ.Tools.isIPsValid=function(d){if(typeof d==="string"){if(d.length==0){return true}d=d.split(",")}for(var a=0;a<d.length;a++){var f=d[a].split("-");if(f.length==1){if(ISQ.Tools.getIPNum(f[0])==null){return false}}else{if(f.length==2){var b=ISQ.Tools.getIPNum(f[0]);if(b==null){return false}var c=ISQ.Tools.getIPNum(f[1]);if(c==null||b>c){return false}}else{return false}}}return true};ISQ.Tools.extend=function(b,j){j=j||{};b=b===true;var d=arguments.length;var g=null;for(var c=2;c<d;c++){g=arguments[c];if(typeof(g)==="undefined"||g===null){continue}for(var f in g){var h=j[f],a=g[f];if(j===a){continue}if(typeof(a)==="undefined"){continue}if(b&&a!==null&&typeof(a)==="object"&&!a.nodeType){if(typeof(a.isDerivedOf)!=="function"||!a.isDerivedOf(ISQ.Base)){j[f]=ISQ.Tools.extend(true,h||(a.length!=null?[]:{}),a)}else{j[f]=a}}else{if(a!==undefined){j[f]=a}}}}return j};ISQ.Tools.addArrayToGC=function(b,a){b.add({dispose:function(){for(var c in a){a[c].dispose();a[c]=null}a=null}})};ISQ.Tools.blinkElement=function(a,d,c,b){if(c){ISQ.CSS.addClass(a,b);d--}else{ISQ.CSS.removeClass(a,b)}if(d){setTimeout(function(){ISQ.Tools.blinkElement(a,d,!c,b)},150)}};ISQ.Tools.toggleBlinkElement=function(a,b,c){if(a.blinkInterval){clearInterval(a.blinkInterval);ISQ.CSS.removeClass(a,b);delete a.blinkInterval;return}a.blinkInterval=setInterval(function(){if(a.blinkOn){a.blinkOn=false;
ISQ.CSS.removeClass(a,b)}else{a.blinkOn=true;ISQ.CSS.addClass(a,b)}},c||800)};ISQ.Data=initializeNS("ISQ.Data");ISQ.Data.indexOfArray=function(a,c){var b=a.length;while(b--){if(a[b]==c){return b}}return -1};ISQ.Data.inArray=function(a,b){return ISQ.Data.indexOfArray(a,b)!==-1};ISQ.Data.isObjectEmpty=function(b){for(var a in b){return false}return true};ISQ.Data.isObjectEmptyIE8=function(b){for(var a in b){if(b[a]===undefined){continue}return false}return true};ISQ.Data.parseJson=function(json){try{if(window.JSON&&JSON.parse){return JSON.parse(json)}var t=json.replace(/"(\\.|[^"\\])*"/g,"");if(!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(t)){return eval("("+json+")")}}catch(e){}};ISQ.Data.jsonToString=function(f,g,d){if(!d&&!window.Prototype){try{return JSON.stringify(f)}catch(a){}}if(!g){g=new Array()}if(f instanceof Array){g.push("[");for(var c=0;c<f.length;++c){if(c!==0){g.push(",")}ISQ.Data.jsonToString(f[c],g,true)}g.push("]")}else{if(f===null){g.push("null")}else{if(typeof(f)==="object"){g.push("{");var b=true;for(var c in f){if(!b){g.push(",")}b=false;g.push('"');g.push(c);g.push('"');g.push(":");ISQ.Data.jsonToString(f[c],g,true)}g.push("}")}else{if(typeof(f)==="string"){g.push('"');g.push(f.escaper());g.push('"')}else{g.push(f)}}}}if(!d){return g.join("")}};ISQ.Tools.appendScript=function(d,a){var c=document.createElement("script");c.type="text/javascript";c.async=true;c.defer=true;if(d instanceof Array){d=d.join("")}if(a){var b=function(){if(ISQ.Base.isDerivedOf(a,ISQ.Handler)){a.handle()}else{a()}};if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){c.onload=b}else{c.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}b()}}}c.src=d;document.getElementsByTagName("head")[0].appendChild(c);return c};ISQ.Tools.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(k){var l="";var a,b,c,d,f,g,h;var j=0;while(j<k.length){a=k.charCodeAt(j++);b=k.charCodeAt(j++);c=k.charCodeAt(j++);d=a>>2;f=((a&3)<<4)|(b>>4);g=((b&15)<<2)|(c>>6);
h=c&63;if(isNaN(b)){g=h=64}else{if(isNaN(c)){h=64}}l=l+this._keyStr.charAt(d)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h)}return l},decode:function(k){var l="";var a,b,c;var d,f,g,h;var j=0;k=k.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(j<k.length){d=this._keyStr.indexOf(k.charAt(j++));f=this._keyStr.indexOf(k.charAt(j++));g=this._keyStr.indexOf(k.charAt(j++));h=this._keyStr.indexOf(k.charAt(j++));a=(d<<2)|(f>>4);b=((f&15)<<4)|(g>>2);c=((g&3)<<6)|h;l=l+String.fromCharCode(a);if(g!=64){l=l+String.fromCharCode(b)}if(h!=64){l=l+String.fromCharCode(c)}}return l},_utf8_encode:function(d){d=d.replace(/\r\n/g,"\n");var f="";for(var b=0;b<d.length;b++){var a=d.charCodeAt(b);if(a<128){f+=String.fromCharCode(a)}else{if((a>127)&&(a<2048)){f+=String.fromCharCode((a>>6)|192);f+=String.fromCharCode((a&63)|128)}else{f+=String.fromCharCode((a>>12)|224);f+=String.fromCharCode(((a>>6)&63)|128);f+=String.fromCharCode((a&63)|128)}}}return f},_utf8_decode:function(h){var g="";var f=0;var a=0;var b=0;var d=0;while(f<h.length){a=h.charCodeAt(f);if(a<128){g+=String.fromCharCode(a);f++}else{if((a>191)&&(a<224)){b=h.charCodeAt(f+1);g+=String.fromCharCode(((a&31)<<6)|(b&63));f+=2}else{b=h.charCodeAt(f+1);d=h.charCodeAt(f+2);g+=String.fromCharCode(((a&15)<<12)|((b&63)<<6)|(d&63));f+=3}}}return g},encodeString:function(c){if(!c){return""}var a=false;for(var b=0;b<c.length&&!a;++b){if(c.charCodeAt(b)>127){a=true}}if(a){c=ISQ.Tools.Base64._utf8_encode(c)}return ISQ.Tools.Base64.encode(c)},decodeString:function(a){var d=ISQ.Tools.Base64.decode(a);var b=false;for(var c=0;c<d.length&&!b;++c){if(d.charCodeAt(c)>127){b=true}}if(b){d=ISQ.Tools.Base64._utf8_decode(d)}return d}};ISQ.Data.getURLencodedString=function(a){if(!a){return""}return escape(ISQ.Tools.Base64._utf8_encode(a))};ISQ.Data.getURLdecodedString=function(a){if(!a){return""}return ISQ.Tools.Base64._utf8_decode(unescape(a))};ISQ.Tools.getUniformLanguageCode=function(a){if(!a){return null}var b=ISQ.Tools.UniformLanguageCode[a];if(b){return b}return a};ISQ.Tools.UniformLanguageCode={he:"iw","zh-CHS":"zh","zh-CHT":"zh","zh-CN":"zh"};
ISQ.Tools.isLanguageRTL=function(a){a=ISQ.Tools.getUniformLanguageCode(a);switch(a){case"iw":case"ar":case"yi":case"ur":return true}return false};ISQ.Tools.Languages={ar:"Arabic",bg:"Bulgarian",cs:"Czech",da:"Danish",de:"German",el:"Greek, Modern",en:"English",es:"Spanish",et:"Estonian",fi:"Finnish",fr:"French",hi:"Hindi",hu:"Hungarian",id:"Indonesian",it:"Italian",iw:"Hebrew",ja:"Japanese",ko:"Korean",lt:"Lithuanian",lv:"Latvian",nl:"Dutch",no:"Norwegian",pl:"Polish",pt:"Portuguese",ro:"Romanian, Moldavian, Moldovan",ru:"Russian",sk:"Slovak",sl:"Slovene",sv:"Swedish",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",yi:"Yiddish",zh:"Chinese"};ISQ.Tools.LanguageSynonym={"zh-CHS":"Chinese","zh-CHT":"Chinese","zh-CN":"Chinese",he:"Hebrew"};ISQ.Tools.getLanguageName=function(b){var a=ISQ.Tools.Languages[b];if(!a){a=ISQ.Tools.LanguageSynonym[b]}if(!a){return null}return a};ISQ.Tools.pagerSeperator="<page_separator/>";ISQ.Data.uniqueId=function(){return Math.floor(Math.random()*10000000)};ISQ.Data.nowMili=new Date().getTime();ISQ.Data.dayInMs=24*60*60*1000;ISQ.Tools.HTML=initializeNS("ISQ.Tools.HTML");ISQ.Tools.HTML.openPopup=function(h,c,i,a,f){var b=(screen.width/2)-(i/2);var g=(screen.height/2)-(a/2);var d=f||"no";return window.open(h,c,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars="+d+", resizable=no, copyhistory=no, width="+i+", height="+a+", top="+g+", left="+b)};ISQ.Data.decodeEntities=function(b){try{if(typeof(jQuery)==="function"){return $("<div/>").html(b).text()}if(!ISQ.Data.entityDecoderElement){ISQ.Data.entityDecoderElement=createElement("textarea",document.body,"display:none;visibility:hidden;position:absolute;top:100px;left:13px;")}ISQ.Data.entityDecoderElement.innerHTML=ISQ.Data.unHTML(b);return ISQ.Data.entityDecoderElement.value}catch(a){return b}};ISQ.Data.parseArticleContext=function(h,g){var f=new Array();var d=0,b=false,c=0,a;while(d<h.length){d=h.indexOf(",",c);if(d===-1){d=h.length}b=!b;if(b){a=h.substring(c,d++)}else{if(!g){f[a]=h.substring(c,d++)}else{f.push(h.substring(c,d++))
}}c=d}return f};ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.setSelectionRange=function(a,d,c){if(a.setSelectionRange){a.setSelectionRange(d,c);return}if(a.createTextRange){var b=a.createTextRange();b.collapse(true);b.moveEnd("character",c);b.moveStart("character",d);b.select()}};ISQ.Tools.createEditableDateInput=function(){var d=$('<div class="input-date-container">');d.on("click",function(j){if(j.target.nodeName!="INPUT"){$(a).trigger("focus")}});var a=createInput("text");ISQ.Tools.forceNumericValue(a,2);$(a).on("keydown",function(j){if(j.keyCode==39){return}var l=this.value;if(l.length==2&&this.cursor>2){if(l>31){this.cursor=0;ISQ.Tools.setSelectionRange(this,0,0);this.value="01"}else{try{$(g).trigger("focus")}catch(j){}}}if(j.keyCode==13){d.trigger("change",c());return}var l=this.value;if(f(j.keyCode)){var k=b(j.keyCode);if(this.cursor==0){this.value=k+this.value.substr(-1);this.cursor++;setTimeout(function(){ISQ.Tools.setSelectionRange(this,1,2)}.bind(this),20)}else{if(this.cursor==1){this.value=this.value.substr(0,1)+k;this.cursor++;ISQ.Tools.setSelectionRange(this,2,2);$(g).trigger("focus")}}}if(j.keyCode==39){if(this.cursor<=1){this.cursor++;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{$(g).trigger("focus");j.preventDefault()}j.preventDefault()}});$(a).on("click",function(){try{$(this).trigger("focus")}catch(j){}});$(a).on("focus",function(){try{ISQ.Tools.setSelectionRange(this,0,2);this.cursor=0}catch(j){}});$(a).on("blur",function(){if(this.value>31){this.value="31"}if(this.value=="00"){this.value="01"}if(this.value.length==1){this.value="0"+this.value}d.trigger("change",c())});var g=createInput("text");ISQ.Tools.forceNumericValue(g,2);$(g).on("keydown",function(j){if(j.keyCode==39){return}var l=this.value;if(l.length==2&&this.cursor>2){if(l>12){this.cursor=0;ISQ.Tools.setSelectionRange(this,0,0);this.value="01"}else{try{$(i).trigger("focus")}catch(j){}}}if(j.keyCode==13){d.trigger("change",c());return}var l=this.value;if(f(j.keyCode)){var k=b(j.keyCode);if(this.cursor==0){this.value=k+this.value.substr(-1);
this.cursor++;setTimeout(function(){ISQ.Tools.setSelectionRange(this,1,2)}.bind(this),20)}else{if(this.cursor==1){this.value=this.value.substr(0,1)+k;this.cursor++;ISQ.Tools.setSelectionRange(this,2,2);try{$(i).trigger("focus")}catch(j){}}}}if(j.keyCode==39){if(this.cursor<=1){this.cursor++;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{try{$(i).trigger("focus")}catch(j){}}j.preventDefault()}if(j.keyCode==37){if(this.cursor>0){this.cursor--;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{try{$(a).trigger("focus")}catch(j){}}j.preventDefault()}});$(g).on("click",function(){try{$(this).trigger("focus")}catch(j){}});$(g).on("focus",function(j){setTimeout(function(){try{ISQ.Tools.setSelectionRange(this,0,2);this.cursor=0}catch(k){}}.bind(this),0)});$(g).on("blur",function(){if(this.value>12){this.value="12"}if(this.value=="00"){this.value="01"}if(this.value.length==1){this.value="0"+this.value}d.trigger("change",c())});var i=createInput("text",null,null,null,null,".year");ISQ.Tools.forceNumericValue(i,4);$(i).on("keydown",function(j){if(j.keyCode==13){d.trigger("change",c());return}if(f(j.keyCode)){var k=b(j.keyCode);if(this.cursor==0){this.value=k+this.value.substr(1);this.cursor++;setTimeout(function(){ISQ.Tools.setSelectionRange(this,1,4)}.bind(this),20)}else{if(this.cursor<4){this.value=this.value.substr(0,this.cursor)+k+this.value.substr(this.cursor+1);this.cursor++;if(this.cursor==4&&h){try{h.find("input:first").trigger("focus")}catch(j){}j.preventDefault()}else{setTimeout(function(){ISQ.Tools.setSelectionRange(this,this.cursor,4)}.bind(this),20)}if(this.value=="0000"){this.value=new Date().getFullYear()}}}}if(j.keyCode==37){if(this.cursor>0){this.cursor--;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{try{$(g).trigger("focus")}catch(j){}}j.preventDefault()}if(j.keyCode==39){if(this.cursor<=3){this.cursor++;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{if(h){try{h.find("input:first").trigger("focus")}catch(j){}j.preventDefault()}}j.preventDefault()}if(h&&j.keyCode==9){try{h.find("input:first").eq(0).trigger("focus")
}catch(j){}j.preventDefault()}});$(i).on("blur",function(){var j=$(this).val();if(j.length<4){$(this).val(new Date().getFullYear());this.cursor=0;ISQ.Tools.setSelectionRange(this,0,0)}if(j=="0000"){this.value=new Date().getFullYear()}d.trigger("change",c())});$(i).on("click",function(){try{$(this).trigger("focus")}catch(j){}});$(i).on("focus",function(){setTimeout(function(){try{ISQ.Tools.setSelectionRange(this,0,4);this.cursor=0}catch(j){}}.bind(this),0)});function c(){return a.value+"/"+g.value+"/"+i.value}function f(j){return j>=48&&j<=57||j>=96&&j<=105}function b(j){return String.fromCharCode((j>=96&&j<=105)?j-48:j)}d.setValue=function(j){a.value=j.substr(0,2);g.value=j.substr(3,2);i.value=j.substr(6,4)};var h=null;d.linkToDate=function(j){h=j};d.append(a);d.append($("<span>/</span>"));d.append(g);d.append($("<span>/</span>"));d.append(i);return d};ISQ.Tools.HTML.getTotalHeight=function(a){var c=0;var b=window.getComputedStyle(a);c+=parseInt(b.marginTop);c+=parseInt(b.marginBottom);c+=a.offsetHeight;return c};ISQ.Tools.HTML.escapeHtml=function(b){var a=document.createElement("div");a.appendChild(document.createTextNode(b));return a.innerHTML};ISQ.Tools.HTML.unescapeHtml=function(c){var b=document.createElement("div");b.innerHTML=c;var a=b.childNodes[0];return a?a.nodeValue:""};ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.Storage=initializeNS("ISQ.Tools.Storage");ISQ.Tools.Storage.HTML5=false;try{ISQ.Tools.Storage.HTML5=window.localStorage!==null&&typeof(window.localStorage)!=="undefined"}catch(ex){}ISQ.Tools.Storage.get=function(a,b){if(!ISQ.Tools.Storage.HTML5){return null}if(b){return window.sessionStorage.getItem(a)}else{return window.localStorage.getItem(a)}};ISQ.Tools.Storage.set=function(a,c,b){if(!ISQ.Tools.Storage.HTML5){return false}if(b){window.sessionStorage.setItem(a,c)}else{window.localStorage.setItem(a,c)}return true};ISQ.Tools.Storage.remove=function(a,b){if(!ISQ.Tools.Storage.HTML5){return}if(b){window.sessionStorage.removeItem(a)}else{window.localStorage.removeItem(a)}};ISQ.Tools.Storage.clear=function(a){if(!ISQ.Tools.Storage.HTML5){return
}if(a){window.sessionStorage.clear()}else{window.localStorage.clear()}};ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.foreach=function(a,b){for(var c in a){var d=null;if(ISQ.Base.isDerivedOf(b,ISQ.Handler)){d=b.handle(a[c],c)}else{d=b(a[c],c)}if(d===false){break}}};window.foreach=ISQ.Tools.foreach;ISQ.Tools.iteration=function(a,c,b){if(!b){for(var d=0;d<a.length;++d){var f=null;if(ISQ.Base.isDerivedOf(c,ISQ.Handler)){f=c.handle(a[d],d)}else{f=c(a[d],d)}if(f===false){break}}}else{for(var d=a.length-1;d>=0;--d){var f=null;if(ISQ.Base.isDerivedOf(c,ISQ.Handler)){f=c.handle(a[d],d)}else{f=c(a[d],d)}if(f===false){break}}}};window.iteration=window._it=ISQ.Tools.iteration;ISQ.Http=initializeNS("ISQ.Http");ISQ.Http.MAX_URL_SIZE=2047;ISQ.Http.getNoHashUrl=function(){var b=window.location.hash;var a=window.location.href;if(b!==""){var c;do{c=a.indexOf(b);if(c!==-1){a=a.substring(0,c)}}while(c!==-1)}return a};ISQ.Http.detectBroswer=function(){var b=navigator.appVersion;var g=navigator.userAgent;var a=0;ISQ.Http.browser={};if(b.indexOf("Android")!==-1||g.indexOf("Android")!==-1){ISQ.Http.browser.app="android";var c=b.indexOf("Android ")+8;var h=b.substring(c,b.indexOf(";",c));ISQ.Http.browser.version=h;ISQ.Http.browser.isMobile=b.indexOf("Mobile")>-1||g.indexOf("Mobile")!==-1;ISQ.Http.browser.isTablet=!ISQ.Http.browser.isMobile;ISQ.Http.browser.usesViewport=true;ISQ.Http.browser.isAndroid=true;if(parseInt(ISQ.Http.browser.version)<4){ISQ.Http.browser.oldAndroid=true}}else{if(navigator.appVersion.indexOf("iPhone")!==-1){var h=navigator.appVersion.substring(0,navigator.appVersion.indexOf(" "));ISQ.Http.browser.app="safari";ISQ.Http.browser.version="iphone "+parseInt(h);ISQ.Http.browser.isMobile=true;ISQ.Http.browser.usesViewport=true;ISQ.Http.browser.isIPhone=true;if(b.indexOf("OS 6_")!==-1){ISQ.Http.browser.isIOS6=true}else{if(b.indexOf("OS 7_")!==-1){ISQ.Http.browser.isIOS7=true}}ISQ.Http.browser.isIOS=true}else{if(navigator.appVersion.indexOf("iPad")!==-1){var h=navigator.appVersion.substring(0,navigator.appVersion.indexOf(" "));
ISQ.Http.browser.app="safari";ISQ.Http.browser.version="ipad "+parseInt(h);ISQ.Http.browser.isTablet=true;ISQ.Http.browser.usesViewport=true;ISQ.Http.browser.isIPad=true;if(b.indexOf("OS 6_")!==-1){ISQ.Http.browser.isIOS6=true}else{if(b.indexOf("OS 7_")!==-1){ISQ.Http.browser.isIOS7=true}}ISQ.Http.browser.isIOS=ISQ.Http.browser.isIOS6||ISQ.Http.browser.isIOS7}}}if((a=b.indexOf("MSIE "))!==-1){ISQ.Http.browser.app="ie";a+=5;var f=b.indexOf(" ",a);if(f===-1){ISQ.Http.browser.version=b.substring(a)}else{ISQ.Http.browser.version=b.substring(a,f)}if(ISQ.Http.browser.version.startsWith("10")){ISQ.Http.browser.isIE10=true}if(ISQ.Http.browser.version.startsWith("9")){ISQ.Http.browser.isIE9=true}if(ISQ.Http.browser.version.startsWith("8")){ISQ.Http.browser.isIE8=true}if(ISQ.Http.browser.version.startsWith("7")){ISQ.Http.browser.isIE7=true}if(ISQ.Http.browser.version.startsWith("6")){ISQ.Http.browser.isIE6=true}ISQ.Http.browser.isIE=true}else{if(b.indexOf("Chrome")!==-1){ISQ.Http.browser.app="chrome";ISQ.Http.browser.version="0"}else{if((a=b.indexOf("Safari"))!==-1&&ISQ.Http.browser.app!="android"){var h=b.substring(a+7);ISQ.Http.browser.app="safari";if(h<="530.17"){ISQ.Http.browser.version="3"}else{ISQ.Http.browser.version="4"}}else{if((a=g.indexOf("Firefox/"))!==-1){ISQ.Http.browser.app="ff";var f=g.indexOf(" ",a);if(f===-1){ISQ.Http.browser.version=g.substring(a+8)}else{ISQ.Http.browser.version=g.substring(a+8,f)}if(ISQ.Http.browser.version.startsWith("3")){ISQ.Http.browser.isFF3=true}if(ISQ.Http.browser.version.startsWith("3.0")){ISQ.Http.browser.isFF3_0=true}if(ISQ.Http.browser.version.startsWith("3.6")){ISQ.Http.browser.isFF3_6=true}}else{if(g.indexOf("Opera/")!==-1){ISQ.Http.browser.app="opera";var c=g.indexOf("Version/");if(c===-1){var d=g.indexOf(" ",6);ISQ.Http.browser.version=g.substring(6,d)}else{var d=g.indexOf(" ",c);if(d===-1){ISQ.Http.browser.version=g.substring(c+8)}else{ISQ.Http.browser.version=g.substring(c+8,d)}}ISQ.Http.browser.isOpera=true}else{if(g.indexOf("Symbian")!=-1){ISQ.Http.browser.app="symbian";
ISQ.Http.browser.version=1;ISQ.Http.browser.full=ISQ.Http.browser.app+ISQ.Http.browser.version}}}}}}if(!ISQ.Http.browser.app){if(g.indexOf("AppleWebKit")!==-1){ISQ.Http.browser.app="safari";ISQ.Http.browser.version="5"}else{if(b.indexOf("Trident/7")!==-1){ISQ.Http.browser.app="ie";ISQ.Http.browser.isIE=true;var c=b.indexOf("rv:");if(c!==-1){c+=3;if(b.equals("11",c)){ISQ.Http.browser.version="11";ISQ.Http.browser.isIE11=true}}}else{ISQ.Http.browser.app="default";ISQ.Http.browser.version="--"}}}ISQ.Http.browser.full=ISQ.Http.browser.app+ISQ.Http.browser.version;g=null;b=null};if(typeof(ISQ.Http.browser)==="undefined"||!ISQ.Http.browser){ISQ.Http.detectBroswer()}ISQ.Http.isIEQuirksMode=function(){return(ISQ.Http.browser.isIE&&document.compatMode!=="CSS1Compat")};ISQ.Http.isChrome=function(){var a=navigator.appVersion;if(a.indexOf("Chrome")!==-1){return true}return false};ISQ.Http.Cookies=initializeNS("ISQ.Http.Cookies");ISQ.Http.Cookies._read=function(d){if(!d){return null}var j=document.cookie;var g=0;var a;var f;var h=0;var c={KEY:1,VALUE:2};var i=c.KEY;while(h<j.length){a=j.charAt(h++);if(a===" "){continue}if(i===c.KEY){if(a==="="){i=c.VALUE;g=0;continue}f=d.charAt(g);if(a===f||a.toLowerCase()===f.toLowerCase()){if(++g===d.length){if(j.charAt(h)==="="){var b=j.indexOf(";",++h);if(b===-1){b=j.length}return j.substring(h,b)}else{g=0}}}else{g=0}}else{if(a===";"){i=c.KEY}}}return null};ISQ.Http.Cookies._readCaseSensitive=function(b){if(!b){return null}var d=document.cookie;var c=d.indexOf(b);while(c!==-1){c+=b.length;if(d.charAt(c)==="="){var a=d.indexOf(";",++c);if(a===-1){a=d.length}return d.substring(c,a)}else{c=d.indexOf(b)}}return null};ISQ.Http.Cookies._write=function(f,j,h,b,i,d,g){f=f||null;j=!isNaN(j)?j:j||null;h=h||"/";b=b||null;i=i===true;d=d||null;if(f===null||j===null){return}var c=new Date();if(d!==null){c.setSeconds(c.getSeconds()+d);c=c.toGMTString()}var a=[];if(f.indexOf("%20")!==-1||f.toLowerCase().indexOf("%3a")!==-1){a.push(f)}else{a.push(escape(f))}a.push("=");if(j.toString().indexOf("%20")!==-1||j.toString().toLowerCase().indexOf("%3a")!==-1||g){a.push(j)
}else{a.push(escape(j))}a.push("; path=");a.push(h);if(b!==null){a.push("; domain=");a.push(b)}if(i&&window.location.protocol==="https:"){a.push("; secure=");a.push(i)}if(d!==null){a.push("; expires=");a.push(c)}document.cookie=a.join("")};ISQ.Http.Cookies._delete=function(d,f,b,g){d=d||null;f=f||null;b=b||null;g=g||null;if(d===null){return}var h=ISQ.Http.Cookies._read(d);if(h===null){return}var c=new Date();c.setMonth(c.getMonth()-1);c=c.toGMTString();var a=[];a.push(escape(d));a.push("=1");a.push("; expires=");a.push(c);f=f||"/";a.push("; path=");a.push(f);b=b||ISQ.Http.domain(false);a.push("; domain=");a.push(b);if(g!==null&&window.location.protocol==="https:"){a.push("; secure=");a.push(g)}document.cookie=a.join("")};ISQ.Http.Cookies.encode64=function(b){b=String(b);if(b.length===0){return b}var a=ISQ.Tools.Base64.encodeString(b);return a.replace(/\=/g,"_").replace(/\+/g,"|")};ISQ.Http.Cookies.decode64=function(b){b=String(b);if(b.length===0){return b}var a=b.replace(/\_/g,"=").replace(/\|/g,"+");return ISQ.Tools.Base64.decodeString(a)};ISQ.Http.domain=function(d,h){d=d===true;var b;var c;if(typeof(ISQ.Http.mDomain)==="undefined"||!ISQ.Http.mDomain||h){h=h||window.location.href;var f=h.indexOf("//")+2;b=h.substring(f);var g=b.indexOf("/");if(g>-1){c=b.substring(0,g)}else{c=b}var a=b.indexOf(":");if(a>-1){b=c.substring(0,a)}else{b=c}}if(!h){ISQ.Http.mIncludePort=c;ISQ.Http.mDomain=b}if(d){return c}else{return b}};ISQ.Http.topDomain=function(c){c=c||window.location.href;var a=ISQ.Http.domain(false,c);var b=a.indexOf(".");return a.substring(b)};ISQ.Http.relativePath=function(f){f=f||window.location.href;var d={path:"",filename:""};var a=f.indexOf("//")+2;a=f.indexOf("/",a);if(a==f.length-1){return d}var c=f.indexOf("?");var b=f.LastIndexOf_char("/",c===-1?0:c);d.path=f.substring(a,b++);d.filename=f.substring(b);a=d.filename.indexOf("#");if(a!==-1){d.filename=d.filename.substring(0,a)}return d};if(typeof(ISQ.Http.urlArguments)==="undefined"||!ISQ.Http.urlArguments){if(window.location.search.length!==0){ISQ.Http.urlArguments=ISQ.Tools.stringToPairArray(window.location.search.substring(1),"=","&",true,false)
}else{ISQ.Http.urlArguments=[]}}if(typeof(ISQ.Http.hashArguments)==="undefined"||!ISQ.Http.hashArguments){if(window.location.hash.length!==0){ISQ.Http.hashArguments=ISQ.Tools.stringToPairArray(window.location.hash.substring(1),"=","&",true,false)}else{ISQ.Http.hashArguments=[]}}ISQ.Http.getUrlParam=function(a,f){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)";var b=new RegExp(c);f=f||window;var d=b.exec(f.location.href);if(d==null){return""}else{return d[1]}};ISQ.Http.getUrlFakePart=function(){var b=window.location.href.indexOf("/~");if(b===-1){return""}b+=2;if(window.location.search&&b>window.location.href.indexOf("?")){return""}if(window.location.hash&&b>window.location.href.indexOf("#")){return""}var a=window.location.href.indexOf("/",b);if(a===-1){return""}return window.location.href.substring(b,a)};ISQ.Http.isValidUrl=function(a){return(/^((?:https?\:\/\/|www\.)(?:[-a-z0-9]+\.)*[-a-z0-9]+.*)$/gi).test(a)};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html=initializeNS("ISQ.Html");ISQ.Html._=function(d,a){if(!d){return null}var b=null;if(typeof(d)==="string"){if(ISQ.Http.browser.app==="ie"){if(!ISQ.Html.IE_idMap){ISQ.Html.IE_idMap=new Array();if(typeof(ISQ.Console)!=="undefined"&&typeof(sessionGC)==="function"){sessionGC().add(ISQ.Html.IE_idMap);ISQ.Html.IE_idMap.dispose=function(){ISQ.Html.IE_idMap=new Array()}}}if(!a){b=ISQ.Html.IE_idMap[d];if(ISQ.Http.browser.isIE&&b){var c=b;do{c=c.parentNode}while(c!==null&&c!==document);if(c===null){b=null}}}if(!b||a===true){b=document.getElementById(d);if(b){ISQ.Html.IE_idMap[d]=b}}}else{b=document.getElementById(d)}}else{if(typeof(d)==="object"&&typeof(d.parentNode)!=="undefined"&&typeof(d.nodeName)!=="undefined"){b=d}}return b};if(typeof(window._)!=="function"){window._=ISQ.Html._}ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.position_new=function(a,c){if(c){return ISQ.Html.position(a,c)}if(typeof(a.getBoundingClientRect)=="undefined"||!a.getBoundingClientRect){return ISQ.Html.position(a,c)}var b=a.getBoundingClientRect();b.x=b.left;b.y=b.top;return b
};ISQ.Html.position=function(b,h,d){var g={x:-1,y:-1};b=ISQ.Html._(b);if(b===null){return g}var f=ISQ.Html._(h)||document.body;g.x=0;g.y=0;var a=b;while(a!==null&&a!==f&&a!==document.body&&a.nodeName!=="HTML"){g.x+=a.offsetLeft;g.x-=a.scrollLeft;var c=parseInt(ISQ.CSS.getElementStyle(a,"margin-left"));g.x-=isNaN(c)?0:c;g.y+=a.offsetTop;g.y-=a.scrollTop;a=a.offsetParent}if(f!==document.body&&(a===document.body||a===null)){g.x=-1;g.y=-1}b=null;h=null;return g};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.screenSize=function(){return ISQ.Html.pageSize(true)};ISQ.Html.scrollBarWidth=function(){return 17};ISQ.Html.scrollBarWidth_afterCheck=function(){var a=ISQ.Html.screenSize();if(document.body.scrollHeight===a.h){return 0}return ISQ.Html.scrollBarWidth()};ISQ.Html.pageSize=function(b,a){var c={w:0,h:0};var d={};if(self&&self.innerHeight){d.w=self.innerWidth;d.h=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){d.w=document.documentElement.clientWidth;d.h=document.documentElement.clientHeight}else{if(document.body){d.w=document.body.clientWidth;d.h=document.body.clientHeight}}}var g=ISQ.Html.getScroll("width");var f=ISQ.Html.getScroll("height");if(b||d.w>g){c.w=d.w}else{c.w=g}if((b&&(!ISQ.Http.browser.isIPad||window.top!==window))||d.h>f){c.h=d.h}else{c.h=f}if(f>d.h){if(ISQ.CSS.getElementStyle(document.body,"overflow")==="hidden"){return c}if(ISQ.CSS.getElementStyle(document.body,"overflow-y")==="hidden"){return c}if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE11){if(!a){c.w-=ISQ.Html.scrollBarWidth()}}else{if(a){c.w+=ISQ.Html.scrollBarWidth()}}}return c};ISQ.Html.getScroll=function(b){b=b||"top";var a=0;if(b==="top"){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11){a=window.pageYOffset}if(ISQ.Http.browser.app!=="ie"){a=ISQ.Html.returnMaxScroll(a,window.scrollY)}a=ISQ.Html.returnMaxScroll(a,document.body.scrollTop);a=ISQ.Html.returnMaxScroll(a,document.documentElement.scrollTop);a=ISQ.Html.returnMaxScroll(a,document.body.parentNode.scrollTop)
}else{if(b==="left"){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11){a=window.pageXOffset}if(ISQ.Http.browser.app!=="ie"){a=ISQ.Html.returnMaxScroll(a,window.scrollX)}a=ISQ.Html.returnMaxScroll(a,document.body.scrollLeft);a=ISQ.Html.returnMaxScroll(a,document.documentElement.scrollLeft);a=ISQ.Html.returnMaxScroll(a,document.body.parentNode.scrollLeft)}else{if(b==="height"){switch(ISQ.Http.browser.app){case"chrome":case"ff":case"opera":case"safari":if(window.top===window){a=document.documentElement.scrollHeight}else{a=document.body.scrollHeight}break;default:a=ISQ.Html.returnMaxScroll(a,document.body.scrollHeight);a=ISQ.Html.returnMaxScroll(a,document.documentElement.scrollHeight);a=ISQ.Html.returnMaxScroll(a,document.body.parentNode.scrollHeight);break}}else{if(b==="width"){a=ISQ.Html.returnMaxScroll(a,document.body.scrollWidth);a=ISQ.Html.returnMaxScroll(a,document.documentElement.scrollWidth);a=ISQ.Html.returnMaxScroll(a,document.body.parentNode.scrollWidth)}}}}return a};ISQ.Html.returnMaxScroll=function(a,b){if(a>b){return a}return b};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.getEventTarget=function(a){return window.event?window.event.srcElement:a?a.target:null};ISQ.Html.getDomEvent=function(a){if(ISQ.Base.isDerivedOf(a,ISQ.Html.DomEvent)){return a}return new ISQ.Html.DomEvent(a)};ISQ.Html.DomEvent=ISQ.Base.extend({name:"ISQ.Html.DomEvent"});ISQ.Html.DomEvent.prototype.ctor=function(a){this.domEvent=window.event||a;this.target=ISQ.Html.getEventTarget(a)};ISQ.Html.DomEvent.prototype.cancel=function(){if(!this.domEvent){return}if(this.domEvent.stopPropagation){this.domEvent.stopPropagation()}if(this.domEvent.cancelBubble!=null){this.domEvent.cancelBubble=true}};ISQ.Html.DomEvent.prototype.target=null;ISQ.Html.DomEvent.prototype.domEvent=null;window.addEvents=function(a,b,c){if(a.addEventListener){if(b.indexOf("on")==0){b=b.charAt(2).toLowerCase()+b.slice(3)}a.addEventListener(b,c)}else{if(a.attachEvent){if(b.indexOf("on")!=0){b="on"+b}a.attachEvent(b,c)}}};window.removeEvents=function(a,b,c){if(a.removeEventListener){if(b.indexOf("on")==0){b=b.charAt(2).toLowerCase()+b.slice(3)
}a.removeEventListener(b,c)}else{if(a.detachEvent){if(b.indexOf("on")!=0){b="on"+b}a.detachEvent(b,c)}}};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html._doc=document;ISQ.Html.createElement=function(f,c,d){var b=ISQ.Html._doc.createElement(f);var a=ISQ.Html._(c);if(a!==null){a.appendChild(b)}if(typeof(d)==="string"){ISQ.CSS.setStyle(b,d)}return b};var createElement=ISQ.Html.createElement;ISQ.Html.createDiv=function(d,g,f){var c=ISQ.Html._doc.createElement("div");var a=ISQ.Html._(d);var b=a&&f?a.firstChild:null;if(a!==null){if(f){a.insertBefore(c,b)}else{a.appendChild(c)}}if(typeof(g)==="string"){ISQ.CSS.setStyle(c,g)}return c};var createDiv=ISQ.Html.createDiv;ISQ.Html.createTable=function(c,g,b,d,a){var f=createElement("table",c);f.setAttribute("cellPadding",0);f.setAttribute("cellSpacing",0);f.setAttribute("border",0);if(typeof(a)==="string"){f.setAttribute("align",a)}if(typeof(g)==="number"||typeof(g)==="string"){f.setAttribute("width",g)}if(typeof(b)==="string"){f.setAttribute("dir",b);f.style.direction=b}if(typeof(d)==="string"){ISQ.CSS.setStyle(f,d)}return createElement("tbody",f)};var createTable=ISQ.Html.createTable;ISQ.Html.createRow=function(b,a,d){var c=createElement("tr",b);if(typeof(a)==="string"){ISQ.CSS.setStyle(c,a)}if(typeof(d)==="string"){c.setAttribute("valign",d)}return c};var createRow=ISQ.Html.createRow;ISQ.Html.addSpaceRow=function(d,b,a,c){var g=createRow(d);var f=createElement("td",g);f.style.height=b;if(typeof(c)==="string"){ISQ.CSS.setStyle(g,c)}if(a){f.setAttribute("colSpan",a)}return g};var addSpaceRow=ISQ.Html.addSpaceRow;ISQ.Html.addSpaceTd=function(d,f,b){var c=createElement("td",d);if(typeof(b)==="number"){c.setAttribute("rowSpan",b)}if(!f){return}c.style.width=f;var a=createDiv(c,"width:"+f);a.innerHTML="&nbsp;";return c};var addSpaceTd=ISQ.Html.addSpaceTd;ISQ.Html.createTd=function(f,a,g,c,b){var d=createElement("td",f);if(g){d.setAttribute("vAlign",g)}if(a){d.setAttribute("align",a)}if(typeof(c)==="string"){ISQ.CSS.setStyle(d,c)}if(b){d.setAttribute("colSpan",b)}return d};var createTd=ISQ.Html.createTd;
ISQ.Html.clearNode=function(a,c){if(typeof(a)==="undefined"||a===null){return null}if(a.nodeType!==1){return a}c=c!==false;if(c){var b=a.nodeName;switch(b){case"TR":case"TBODY":case"TABLE":break;default:a.innerHTML="";return a}}while(a.firstChild!==null){if(c){ISQ.Html.clearNode(a.firstChild,true)}a.removeChild(a.firstChild)}return a};var clearNode=ISQ.Html.clearNode;ISQ.Html.createInput=function(l,f,i,m,b,h,j){if(typeof(arguments[0])=="object"){var g=arguments[0];return createInput(g.type,g.name,g.parent,g.value||null,g.errorStyle||null,g.style||null,g.placeholder||null)}var c;f=f||"";var d=false;if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){try{var k=new Array();k.push("<input type='");k.push(l);k.push("' name='");k.push(f);k.push("' id='");k.push(f);k.push("' />");c=ISQ.Html._doc.createElement(k.join(""));if(i){i.appendChild(c)}d=true}catch(a){d=false}}if(!d){c=createElement("input",i);c.type=l;c.name=c.id=f}if(typeof(m)!=="undefined"&&m!==null){c.value=m}if(typeof(j)!=="undefined"&&j!==null){c.placeholder=j}if(typeof(b)==="string"){c.errorStyle=b;c.error=function(){ISQ.CSS.setStyle(this,this.errorStyle);c.hasError=true}}c.okStyle=typeof(h)==="string"?h:"";ISQ.CSS.setStyle(c,c.okStyle);c.ok=function(){ISQ.CSS.setStyle(this,this.okStyle);c.hasError=false};return c};var createInput=ISQ.Html.createInput;ISQ.Html.createCheckbox=function(g,d,j,m,a,c,i){if(typeof(arguments[0])=="object"&&arguments[0]!=null){var h=arguments[0];return createCheckbox(h.name,h.id,h.parent,h.text,h.style,h.checked,h.onclick)}var k=createTable(j);var d=d||g||"cb_"+Math.floor(Math.random()*1000000);if(a){ISQ.CSS.setStyle(k.parentNode,a)}var n=createRow(k);var l=createTd(n);var b=createInput("checkbox",d,l);b.style.margin="2px 3px 0";b.id=d;b.checked=b.defaultChecked=c===true;if(typeof(i)!="undefined"){b.onclick=i}if(m){l=createTd(n);var f=createElement("label",l);f.setAttribute("for",b.id);f.innerHTML=m;b.label=f}return b};var createCheckbox=ISQ.Html.createCheckbox;ISQ.Html.createRadio=function(i,g,l,p,r,b,c,a,k,f){if(typeof(arguments[0])=="object"){var j=arguments[0];
return ISQ.Html.createRadio(j.name,j.id,j.parent,j.text,j.value,j.style,j.checked,j.floatStyle,j.onclick,j.holderStyle)}var n=createTable(l);if(a){n.parentNode.setAttribute("align",a);var d=(a.toLowerCase()==="left"?"right":"left");ISQ.CSS.setStyle(n.parentNode,"margin-"+d+": 5px")}var q=createRow(n);var o=createTd(q,"","",f);var m=createInput("radio",i,o,r,b,b);m.style.margin="0 3px 0";m.id=g||"radio_"+Math.floor(Math.random()*1000000);if(typeof(c)!="undefined"){m.checked=c}if(typeof(k)!="undefined"){m.onclick=k}o=createTd(q);var h=createElement("label",o);h.setAttribute("for",m.id);h.innerHTML=p;return m};var createRadio=ISQ.Html.createRadio;ISQ.Html.createSelect=function(b){var d=createElement("select",b.parent,b.style||"");if(b.defaultValue){var c=createElement("option",d);c.selected=true;if(typeof(b.defaultValue)==="object"){c.value=b.defaultValue.value;c.innerHTML=ISQ.Data.unHTML(b.defaultValue.html.toString())}else{c.value=c.innerHTML=b.defaultValue}if(b.defaultValue.title){c.title=b.defaultValue.title}}for(var a=0;a<b.values.length;++a){var c=createElement("option",d);if(typeof(b.values[a])==="object"){c.innerHTML=ISQ.Data.unHTML(b.values[a].html.toString());c.value=b.values[a].value}else{c.value=b.values[a];c.innerHTML=ISQ.Data.unHTML(b.values[a].toString())}if(b.selected&&c.value==b.selected){c.selected=true}if(b.values[a].title){c.title=b.values[a].title}}return d};var createSelect=ISQ.Html.createSelect;ISQ.Html.updateSelectOptions=function(b){clearNode(b.select);for(var a=0;a<b.values.length;++a){var c=createElement("option",b.select);if(typeof(b.values[a])==="object"){c.innerHTML=b.values[a].html;c.value=b.values[a].value}else{c.value=c.innerHTML=b.values[a]}if(b.selected&&c.value==b.selected){c.selected=true}}return b.select};var updateSelectOptions=ISQ.Html.updateSelectOptions;ISQ.Html.select_selectedOption=function(a){return a[a.selectedIndex]};ISQ.Html.createForm=function(d){var a=createElement("form",d.parent);if(typeof(d.action)==="string"){a.action=d.action}if(typeof(d.method)==="string"){a.method=d.method
}if(typeof(d.id)==="string"){a.id=d.id}if(typeof(d.name)==="string"){if(typeof(d.id)!=="string"){a.id=d.name}}var b=typeof(d.onsubmit)!=="undefined"&&d.onsubmit!==null?d.onsubmit:null;if(b!==null){b.executed=false}a.onsubmit=function(f){if(b!==null){if(!b.executed){b.handle(ISQ.Html.getDomEvent(f));b.executed=true}else{b.executed=false}}return false};function c(g){var f=ISQ.Html.getDomEvent(g);if(f.domEvent.keyCode!==13){return false}if(b!==null){if(!b.executed){b.handle(f);b.executed=true}else{b.executed=false}}f.cancel();return false}if(ISQ.Html._doc.addEventListener){if(ISQ.Http.browser.app!=="chrome"&&ISQ.Http.browser.app!=="opera"){a.addEventListener("keypress",c,true)}else{a.addEventListener("keyup",c,true)}}else{if(ISQ.Html._doc.attachEvent){a.attachEvent("onkeyup",c)}}return a};var createForm=ISQ.Html.createForm;ISQ.Html.createIframe=function(b,d,a,f){f=f||"about:blank";var c=createElement("iframe");c.setAttribute("name",d);c.setAttribute("id",b);c.setAttribute("src",f);if(a){ISQ.CSS.setStyle(c,a)}return c};ISQ.Html.createImage=function(b){if(!b.src){throw ("createImage: invalid src")}var a=new Image();a.src=b.src;if(b.onload){a.onload=b.onload}if(b.id){a.id=b.id}if(b.align){a.setAttribute("align",b.align)}if(b.style){ISQ.CSS.setStyle(a,b.style)}if(b.parent){b.parent.appendChild(a)}if(b.altText){a.setAttribute("title",b.altText)}if(b.overSrc){ISQ.Html.setImageMouseOverAndOut(a,b.overSrc)}return a};var createImage=ISQ.Html.createImage;ISQ.Html.createLink=function(c){var b=createElement("a",c.parent,c.style);if(c.text){b.innerHTML=c.text}return ISQ.Html.createLinkAttributes(c,b)};ISQ.Html.createPlainTextLink=function(c){var b=createElement("a",c.parent,c.style);if(c.text){b.textContent=c.text}return ISQ.Html.createLinkAttributes(c,b)};ISQ.Html.createLinkAttributes=function(c,b){if(typeof(c.href)==="string"){b.href=c.href}else{b.href="javascript:void(0)"}if(typeof(c.title)==="string"){b.title=c.title}if(typeof(c.target)==="string"){b.target=c.target}if(typeof(c.id)==="string"){b.id=c.id}ISQ.Html.setOnclick(b,c.onclick);
return b};var createLink=ISQ.Html.createLink;var createPlainTextLink=ISQ.Html.createPlainTextLink;window.setOnclick=ISQ.Html.setOnclick=function(a,b){if(a.nodeName!=="A"){if(b){a.onclick=b}return}a.onclick=function(c){if(typeof(ISQ.Console)!=="undefined"&&typeof(ISQ.Console.SessionManager)!=="undefined"){ISQ.Console.SessionManager.lastClickedLinkHref=this.href?this.href:null;setTimeout(function(){delete ISQ.Console.SessionManager.lastClickedLinkHref},10)}if(typeof(b)!=="undefined"){b.apply(this,new Array(c))}}};ISQ.Html.createHR=function(d,c,a,b){var g=createRow(d);var f=createElement("td",g);f.style.height=c;f.style.background=a;if(typeof(b)==="number"){f.setAttribute("colSpan",b)}return g};var createHR=ISQ.Html.createHR;ISQ.Html.createTextNode=function(d,c){var b=ISQ.Html._doc.createTextNode(d);var a=ISQ.Html._(c);if(a!==null){a.appendChild(b)}return b};var createTextNode=ISQ.Html.createTextNode;ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.moveChildNodesToElement=function(c,b){clearNode(b);var a=c.childNodes;while(a.length>0){b.appendChild(a[0])}};ISQ.Html.domRecursion=function(a,b){if(!a){return}b(a);for(var c=0;c<a.childNodes.length;++c){domRecursion(a.childNodes[c],b)}};window.domRecursion=ISQ.Html.domRecursion;ISQ.Html.setImageMouseOverAndOut=function(a,c){var b=a.src;a.onmouseover=function(){this.src=c};a.onmouseout=function(){this.src=b}};ISQ.Html.elementToString=function(c,f){var h=new Array();h.push("<");h.push(c.nodeName);h.push(" ");for(var d=0;d<c.attributes.length;++d){var a=c.attributes[d];var b=a.value||a.nodeValue;if(!b){continue}var g=null;if(typeof(b)==="string"){g=b.indexOf("'")>-1?'"':"'"}h.push(a.nodeName);h.push("=");if(g){h.push(g)}h.push(b);if(g){h.push(g)}h.push(" ")}h.push(">");if(f){h.push(f)}else{h.push(c.innerHTML)}h.push("</");h.push(c.nodeName);h.push(">");return h.join("")};var elementToString=ISQ.Html.elementToString;ISQ.Html.getElementsByClassName=function(b,a){if(typeof(document.getElementsByClassName)==="function"){return b.getElementsByClassName(a)}else{return b.querySelectorAll("."+a)
}};ISQ.Html.closestElement=function(b,a){return a(b)?b:(b.parentNode?ISQ.Html.closestElement(b.parentNode,a):null)};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.detectDoctype=function(){var a="loose";try{var b=null;if(window.document.doctype){b=window.document.doctype.systemId;if(!b){b=window.document.doctype.publicId}if(!b&&window.document.doctype.name.toLowerCase()==="html"){b="doctype html"}}else{b=window.document.firstChild;if(b.innerHTML.length!==0){b=null}else{b=b.nodeValue}}if(b===null){a="nodoctype"}else{b=b.toLowerCase();if(b==="doctype html"||b==="ctype ht"){a="html5"}else{if(b.indexOf("xhtml")!==-1||b.indexOf("rdfa 1.1")!==-1){a="xhtml"}else{if(b.indexOf("strict")!==-1){a="strict"}else{if(b.indexOf("loose")!==-1){a="loose"}else{if(b.indexOf("transitional")!==-1){if(b.indexOf("4.01")!==-1){a="transitional401"}else{if(b.indexOf("4.0")!==-1){a="transitional4"}else{a="transitional"}}}else{if(b.indexOf("frameset")!==-1){a="frameset"}else{a="nodoctype"}}}}}}}}catch(c){a="nodoctype"}return a};ISQ.CSS=initializeNS("ISQ.CSS");ISQ.CSS.getVerticalMargin=function(b){var d=0;var c=ISQ.CSS.getElementStyle(b,"margin-top");c=parseInt(c);if(!isNaN(c)){d+=c}var a=ISQ.CSS.getElementStyle(b,"margin-bottom");a=parseInt(a);if(!isNaN(a)){d+=a}return d};ISQ.CSS.getHorizonalMargin=function(a){var d=0;var b=ISQ.CSS.getElementStyle(a,"margin-left");b=parseInt(b);if(!isNaN(b)){d+=b}var c=ISQ.CSS.getElementStyle(a,"margin-right");c=parseInt(c);if(!isNaN(c)){d+=c}return d};ISQ.CSS.setStyle=function(c,f,a){c=ISQ.Html._(c);if(c===null){return}if(typeof(f)!=="string"){return}if(typeof(a)==="undefined"){a=true}if(a){c.className="";c.style.cssText=""}var d=f.split("&");for(var b=0;b<d.length;++b){if(d[b].charAt(0)==="."){c.className+=" "+d[b].substring(1)}else{c.style.cssText+=";"+d[b]}}};ISQ.CSS.setOpacity=function(b,c){b=ISQ.Html._(b);if(b===null){return}if(typeof(c)!=="number"||(c<0||c>100)){return}if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7){if(c===100){b.style.removeAttribute("filter");if(b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;
++a){ISQ.CSS.setOpacity(b.childNodes[a],c)}}}else{b.style.filter="alpha(opacity="+c+")";if(b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){ISQ.CSS.setOpacity(b.childNodes[a],c)}}}}else{if(ISQ.Http.browser.isIE8||ISQ.Http.browser.isIE9){if(c===100){b.style.removeAttribute("filter");if(b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){b.childNodes[a].style.removeAttribute("filter")}}}else{b.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+c+")";if(b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){b.childNodes[a].style.filter="inherit"}}}}else{if(c===100){b.style.removeProperty("opacity");if(ISQ.Http.browser.app==="opera"&&b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){b.childNodes[a].style.removeProperty("opacity")}}}else{b.style.opacity=(c/100);if(ISQ.Http.browser.app==="opera"&&b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){b.childNodes[a].style.opacity="inherit"}}}}}};ISQ.CSS.toggleCss=function(a,c){var d=false;var h="cssRules";if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){h="rules"}var g=document.styleSheets.length;for(var f=g-1;f>=0;--f){var k=document.styleSheets[f];try{if(k.href||k[h].length==0){continue}var j=k[h][0].selectorText;if(!j&&k[h].length>1){j=k[h][1].selectorText}if(!j){continue}if(j.toLowerCase()!==a.toLowerCase()){continue}k.disabled=!c;d=true}catch(b){}}return d};ISQ.CSS.bringToFront=function(a){var c=false;var h="cssRules";if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){h="rules"}var g=document.styleSheets.length;for(var f=g-1;f>=0;--f){var m=document.styleSheets[f];try{if(m.href||m[h].length==0){continue}var j=m[h][0].selectorText;if(!j&&m[h].length>1){j=m[h][1].selectorText}if(!j){continue}if(j.toLowerCase()!==a.toLowerCase()){continue}var k;if(m.ownerNode){k=m.ownerNode}else{k=m.owningElement}var d=k.parentNode;if(d){d.appendChild(k)}c=true}catch(b){}}return c};ISQ.CSS.getElementWidth=function(a,b){var c=a.offsetWidth;c-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-left"),0);c-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-right"),0);
if(b){c-=ISQ.CSS.getHorizonalMargin(a)}return c};ISQ.CSS.getElementHeight=function(a,c,b){var d=a.offsetHeight;if(d===0){if(b){return 0}d=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"height"),0)}d-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-top"),0);d-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-bottom"),0);if(c){d-=ISQ.CSS.getVerticalMargin(a)}return d};ISQ.CSS.getPaddingWidth=function(a){var b=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-left"),0);b+=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-right"),0);return b};ISQ.CSS.setWidthIncludingPadding=function(a,b){b-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-left"),0);b-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-right"),0);a.style.width=b+"px"};ISQ.CSS.addClass=function(b,a){if(b.className){var d=b.className.split(" ");for(var c in d){if(d[c]==a){return}}}b.className+=" "+a};ISQ.CSS.removeClass=function(c,b){if(!c.className){return}var a=new Array();var f=c.className.split(" ");for(var d in f){if(f[d]&&f[d]!=b){a.push(f[d])}}c.className=a.join(" ")};ISQ.CSS.addNewStyleToHead=function(b,a){var c=document.createElement("style");c.type="text/css";if(a){c.id=a}document.getElementsByTagName("head")[0].appendChild(c);if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11&&c.styleSheet){c.styleSheet.cssText=b}else{var d=document.createTextNode(b);c.appendChild(d)}return c};ISQ.CSS.addNewStyle=function(h,b,f){if(f){if(typeof ISQ.CSS.dynamicLoadedCssUniqueId=="undefined"){ISQ.CSS.dynamicLoadedCssUniqueId=0}var d="splitInHeaderStart{direction:rtl}\r\n";var c="splitInHeaderEnd{direction:rtl}\r\n";var g=function(){while(a!=-1){ISQ.CSS.dynamicLoadedCssUniqueId++;var i=h.indexOf(c);var j=h.substring(a+d.length,i-a);var k=[];k.push(h.substring(0,a));k.push(h.substring(i+c.length));h=k.join("");ISQ.CSS.addNewStyleToHead(j,b+ISQ.CSS.dynamicLoadedCssUniqueId);a=h.indexOf(d)}if(h.length>0){ISQ.CSS.addNewStyleToHead(h,b+ISQ.CSS.dynamicLoadedCssUniqueId)}};var a=-1;a=h.indexOf(d);if(a!=-1){g()}else{d="splitInHeaderStart{direction:rtl}";
c="splitInHeaderEnd{direction:rtl}";a=h.indexOf(d);g()}}else{return ISQ.CSS.addNewStyleToHead(h,b)}};ISQ.CSS=initializeNS("ISQ.CSS");ISQ.CSS.getElementStyle=function(c,f){c=ISQ.Html._(c);var g=null;if(window.getComputedStyle){g=document.defaultView.getComputedStyle(c,null).getPropertyValue(f)}if(!g&&c.runtimeStyle){if(f.indexOf("-")!==-1){var a=[];for(var d=0;d<f.length;d++){if(f.charAt(d)==="-"){a.push(f.charAt(++d).toUpperCase())}else{a.push(f.charAt(d))}}f=a.join("")}if(typeof(document.defaultView)!=="undefined"){try{g=document.defaultView.getComputedStyle(c,null)[f]}catch(b){g=null}}if(!g){try{g=c.runtimeStyle[f]}catch(b){g=null}}if(!g){if((ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6)&&f.contains("border")){g=null}else{if(c.currentStyle){g=c.currentStyle[f]}}}}return g};ISQ.CSS=initializeNS("ISQ.CSS");ISQ.CSS.setNodeStyleText=function(a,b){a.setAttribute("style",b);a.style.cssText=b};ISQ.CSS.removeStyle=function(d){if(!d){return}var a=document.getElementsByTagName("head")[0];for(var c=0;c<a.childNodes.length;c++){var b=a.childNodes[c];if(b.id==d){a.removeChild(b);--c}}};ISQ.CSS.generateCSSstring=function(d,c){if(d===null||c===null){return""}var a=[];a.push(c);a.push("{"+d+"}");var b=a.join("");return b};ISQ.CSS.getAttributeValueFromStyleString=function(d,a){var f=0;var c=d.indexOf(a);if(c>-1){c=d.indexOf(":",c);var b=d.indexOf(";",c);if(b>-1){f=d.substring(c+1,b)}else{f=d.substring(c+1)}}return f};ISQ.CSS.getBackgroundImage=function(d){var f="";var a=ISQ.CSS.getAttributeValueFromStyleString(d,"background-image");if(a===0){a=ISQ.CSS.getAttributeValueFromStyleString(d,"background")}var c=a.indexOf("url(");if(c>-1){c+=4;var b=a.indexOf(")",c);b-=1;f=a.substring(c,b);f=f.replace('"',"")}return f};ISQ.CSS.getSelectorStyle=function(r,s){if(typeof(r)!=="string"){return}r=r.toLowerCase();if(typeof(s)!=="string"){s=null}else{s=s.toLowerCase()}var q="cssRules";if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){q="rules"}try{var k=document.styleSheets.length;var v=new Array();for(var f=k-1;f>=0;--f){var w=document.styleSheets[f];
try{if(w.disabled){continue}var p=w[q].length;for(var g=p-1;g>=0;--g){var u=w[q][g].selectorText;if(!u){continue}var t=u.toLowerCase().split(",");var o=t.length;for(var d=o-1;d>=0;--d){var b=t[d].Trim();if(r===b||(s!==null&&s===b)){var x;for(var a in w[q][g].style){if(v[a]){continue}x=w[q][g].style[a];if(!x){continue}v[a]=x}}}}}catch(c){}}return v}catch(c){}return null};ISQ.CSS.getValueBySelectors=function(a,c,d){if(typeof(a)!=="string"){return}if(typeof(c)!=="string"){return}if(typeof(d)!=="string"){d=null}var b=ISQ.CSS.getSelectorStyle(c,d);if(b===null){return null}var g=b[a];if(typeof(g)!=="string"){return null}var f=g.Trim();if(f===""){return null}return f};ISQ.CSS.changeValueBySelector=function(d,a,c){if(typeof(a)!=="string"){return}if(typeof(d)!=="string"){return}if(typeof(c)!=="string"){return}var b=ISQ.CSS.getSelectorStyle(d);if(!b){return null}b[a]=c};ISQ.CSS.getValue=function(f,d){var b=ISQ.Html._(f);if(b===null){return null}var c="#"+b.id;var a="."+b.className;var g=b.nodeName.toLowerCase();d=d.toLowerCase();var i=null;i=b.style[d];if(i){return i.Trim()}var h=ISQ.CSS.getValueBySelectors(d,a,c);if(h===null){return ISQ.CSS.getValueBySelectors(d,g+a,g+c)}};ISQ.WhiteLabels=(function(){var f={};var g={};f["nanorep.com"]={isNanoRepDomain:true,name:"Bold360ai",accountName:"Nanorep",logo:"nrLogo",consoleLogo:"nanoRepLogo",consoleLogoClasses:"",logoLink:"/console/login.html",pageTitle:"My Nanorep Secure Login",favicon:"/favicon-bold-ai.png",privacyLink:"http://www.nanorep.com/Privacy",termsLink:"http://www.nanorep.com/Terms",supportLink:"http://nanorep.com/support",voicesLink:"http://support.nanorep.com/Analytics/General-Analytics/41989494/Voices-overview.htm",dashboardOverviewLink:"http://support.nanorep.com/Analytics/General-Analytics/41926066/Dashboard-overview.htm",voicesOverviewLink:"http://support.nanorep.com/Analytics/General-Analytics/41989494/Voices-overview.htm",contactUsLink:"http://www.nanorep.com/Contact",pricingLink:"http://www.nanorep.com/product/pricing",chatPluginLink:"http://www.nanorep.com/Support/Liveperson-Chat-Integration/Agent-client-integration",guidanceIcon:"guidance_nanorep_icon",widgetConfigId:76830400};
g["nanorep.com"]={};f[".nanorep.info"]=f["nanorep.com"];g[".nanorep.info"]=g["nanorep.com"];f[".nanorep.co"]=f["nanorep.com"];g[".nanorep.co"]=g["nanorep.com"];f["cartassist.co.uk"]={name:"CartAssist",accountName:"goresponse",logo:"caLogo",consoleLogo:"cartAssistLogo",consoleLogoClasses:"cart-assist-logo",logoLink:"http://www.cartassist.co.uk",pageTitle:"My CartAssist Secure Login",favicon:"/console/images/ca_favicon.ico",privacyLink:"http://www.cartassist.co.uk/privacy",termsLink:"http://www.cartassist.co.uk/terms",supportLink:"http://support.cartassist.co.uk",voicesLink:"http://support.cartassist.co.uk",dashboardOverviewLink:"http://support.cartassist.co.uk",voicesOverviewLink:"http://support.cartassist.co.uk",contactUsLink:"http://www.cartassist.co.uk/contact-us/",pricingLink:"http://www.cartassist.co.uk/contact-us/",chatPluginLink:"http://support.cartassist.co.uk",guidanceIcon:"guidance_cartassist_icon",widgetConfigId:76831702};g["cartassist.co.uk"]={leafNanoAnswer:"CartAssist answer:",smartSearch:"CartAssist Search",searchResult:"CartAssist search result",mergeUpdate:"By selecting this answer, CartAssist will learn to answer %title% for:<br/>%phrasings%<br/> Continue?",chatSuggestion:"User received CartAssist answer:",accountExpiredMessage:"Your trial period has expired.",chart_answeredSessions:"This chart shows how many sessions have been answered through CartAssist, including automatic-answers, emails, and chats.",addArticleTooltipBody:"As support agents answer tickets, CartAssist learns new answers that can be published to the knowledge base. <br/>For best results, provide an answer that will be relevant to as many visitors as possible, not personal answers or details."};var a=f[window.location.hostname];var b=g[window.location.hostname];if(!a){for(var d in f){if(window.location.hostname.endsWith(d)){a=f[d];b=g[d];break}}}ISQ.Http.isNanoRepDomain=a&&a.isNanoRepDomain;var c=function(h){var i=a[h];if(!i){i=f["nanorep.com"][h]}if(!i){return null}return i};return{isAlllowedDomain:function(h){var j=true;for(var k in f){if(h.contains(k)){j=true;
break}}return j},getValue:c,changeLink:function(k,j){var i=document.createElement("div");i.innerHTML=j;var h=i.querySelector("a");h.href=this.getValue(k);return i.innerHTML},changeName:function(i,h,j){return h.replace(j,this.getValue(i))},changeFavicon:function(){var h=document.createElement("link");h.type="image/x-icon";h.rel="shortcut icon";h.href=this.getValue("favicon");document.getElementsByTagName("head")[0].appendChild(h)},mergeDictionary:function(h){for(var i in b){if(b.hasOwnProperty(i)){h[i]=b[i]}}return h},compileLabels:function(l){if(typeof l=="undefined"){l=document}var r=l.querySelectorAll(".WhiteLabelPlaceHolder");if(r.length>0){for(var m=0;m<r.length;m++){var p=r[m];var o=p.getAttribute("wl-key");var q=p.getAttribute("wl-type");if(!o){continue}if(!q){q=o}switch(q){case"name":p.innerHTML=this.getValue(o);break;case"href":p.href=this.getValue(o);break;case"svg":var k=_(this.getValue(o));for(var n=0;n<k.childNodes.length;++n){var h=k.childNodes[n];if(!h.nodeName||(h.nodeName!=="SVG"&&h.nodeName!=="svg")){continue}h=h.cloneNode(true);p.innerHTML="";p.appendChild(h);break}break}}}return l},resetLoginPage:function(){}}})();ISQ.Widget=initializeNS("ISQ.Widget");ISQ.API=initializeNS("ISQ.API");ISQ.Widget.supportsPostMessage=(typeof(window.postMessage)==="function"||typeof(window.postMessage)==="object");ISQ.Widget.doctype=typeof(ISQ.Html)!=="undefined"?ISQ.Html.detectDoctype():null;ISQ.Widget.customHostName=null;ISQ.Widget.setCustomHost=function(a){ISQ.Widget.customHostName=a};ISQ.Widget.getCustomHost=function(){return ISQ.Widget.customHostName};ISQ.Widget.getDynamicHost=function(a){if(a){return ISQ.Widget.customHostName||"my.nanorep.com"}else{return ISQ.Widget.customHostName||"//my.nanorep.com"}};ISQ.Widget.validateAccountName=function(a){var b=/^[a-z0-9_-]+$/i;return b.test(a)};ISQ.Widget.getAccountURL=function(a,c){a=a.toLowerCase();c=ISQ.Widget.customHostName||c||ISQ.Widget.getDynamicHost(true);var b="{0}.nanorep.co";if(ISQ.Widget.validateAccountName(a)){if(!b||ISQ.Widget.customHostName){return"//"+c+"/~"+a
}else{return"//"+b.replace("{0}",a.toLowerCase())}}else{throw new Error("Invalid account name: '"+a+"'")}};ISQ.Widget.getAccountDomain=function(a,c){a=a.toLowerCase();c=ISQ.Widget.customHostName||c||ISQ.Widget.getDynamicHost(false);if(!c.startsWith("//")){c="//"+c}var b="{0}.nanorep.co";if(!b||ISQ.Widget.customHostName){return c}else{return"//"+b.replace("{0}",a.toLowerCase())}};ISQ.Widget=initializeNS("ISQ.Widget");ISQ.API=initializeNS("ISQ.API");ISQ.Widget.Proxy=initializeNS("ISQ.Widget.Proxy");ISQ.Widget.Proxy.Chat={sendMessage:function(b,a){_it(b,function(c){c.cdcUser.sendMessage("subject=chat&"+a)})}};ISQ.Widget.Proxy.Chat.LiveChatInc={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{LC_API.open_chat_window()}},load:function(c,d){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==="true"){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}}else{this.mPendingWidgets.push(d)}return}else{this.mPendingWidgets.push(d)}this.mState=this.enumStates.loaded;var f=document.head.getElementsByTagName("script");for(var a=0;a<f.length;a++){if(f[a].src.indexOf("livechatinc")!=-1){this.mAvailable=LC_API.agents_are_available();if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==="true"){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}this.mState=this.enumStates.availabilityReceived;return}}window.__lc={};window.LC_API={};window.__lc.license=c.LiveChatInc.id;window.LC_API.on_chat_ended=function(){window.LC_API.hide_chat_window()};if(!c.popup.enabled){window.LC_API.on_chat_started=function(g){window.LC_API.open_chat_window()}}var b=this;window.LC_API.on_before_load=function(){window.LC_API.hide_chat_window()
};window.LC_API.on_after_load=function(){if(!window.LC_API.chat_running()||c.popup.enabled){window.LC_API.hide_chat_window()}b.mAvailable=LC_API.agents_are_available();if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}else{if(b.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}b.mState=b.enumStates.availabilityReceived};url="//"+c.LiveChatInc.server+"/tracking.js";ISQ.Tools.appendScript(url)}};ISQ.Widget.Proxy.Chat.Zopim={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{if(b.popup.enabled){$zopim.livechat.window.openPopout()}else{$zopim.livechat.window.show()}}},load:function(c,d){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}}else{this.mPendingWidgets.push(d)}return}else{this.mPendingWidgets.push(d)}this.mState=this.enumStates.loaded;var b=this;var g=function(){if(!$zopim.livechat){return}if(!$zopim.livechat.isChatting()||c.popup.enabled){$zopim.livechat.hideAll()}$zopim.livechat.setOnChatEnd(function(){$zopim.livechat.hideAll()});$zopim.livechat.window.onHide(function(){if(!$zopim.livechat.isChatting()||c.popup.enabled){$zopim.livechat.hideAll()}});var h=function(i){if(i=="online"){b.mAvailable=true}else{b.mAvailable=false}if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}else{if(b.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}b.mState=b.enumStates.availabilityReceived};$zopim.livechat.setOnStatus(h)};var f=document.head.getElementsByTagName("script");for(var a=0;a<f.length;a++){if(f[a].src.indexOf("zopim")!=-1){g();
return}}window.$zopim||(function(i,k){var l=$zopim=function(m){l._.push(m)},h=l.s=i.createElement(k),j=i.getElementsByTagName(k)[0];l.set=function(m){l.set._.push(m)};l._=[];l.set._=[];h.async=!0;h.setAttribute("charset","utf-8");h.src=(window.location.protocol==="https:"?"https:":"http:")+c.Zopim.server+"?"+c.Zopim.id;l.t=+new Date;h.type="text/javascript";if(g){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){h.onload=g}else{h.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}g()}}}j.parentNode.insertBefore(h,j)})(document,"script")}};ISQ.Widget.Proxy.Chat.SnapEngage={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{SnapEngage.startLink()}},load:function(c,g){var b=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(g.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}}else{this.mPendingWidgets.push(g)}return}else{this.mPendingWidgets.push(g)}this.mState=this.enumStates.loaded;var d=function(){if(typeof SnapEngage=="undefined"){return}SnapEngage.hideButton();SnapEngage.getAgentStatusAsync(function(i){if(i){b.mAvailable=true}else{b.mAvailable=false}if(g.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}b.mState=b.enumStates.availabilityReceived});SnapEngage.setCallback("Close",function(j,i){SnapEngage.hideButton()})};var h=document.head.getElementsByTagName("script");for(var a=0;a<h.length;a++){if(h[a].src.indexOf("snapengage")!=-1){d();return}}var f=(window.location.protocol==="https:"?"https:":"http:")+c.SnapEngage.server+c.SnapEngage.id+".js";ISQ.Tools.appendScript(f,d)}};ISQ.Widget.Proxy.Chat.Olark={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{olark("api.box.expand")}},load:function(d,f){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(f.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([f],"type=available&data="+this.mAvailable)
}}else{this.mPendingWidgets.push(f)}return}else{this.mPendingWidgets.push(f)}this.mState=this.enumStates.loaded;var b=this;var c=function(){var h=function(i){b.mAvailable=i;if(f.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}b.mState=b.enumStates.availabilityReceived};olark.configure("box.start_hidden",true);olark("api.chat.onOperatorsAvailable",function(){h(true)});olark("api.chat.onOperatorsAway",function(){h(false)})};var g=document.head.getElementsByTagName("script");for(var a=0;a<g.length;a++){if(g[a].src.indexOf("olark")!=-1){c();return}}window.olark||(function(h){var j=window,i=document,k=j.location.protocol=="https:"?"https:":"http:",o=h.name,n="load";var m=function(){j[o]=function(){(l.s=l.s||[]).push(arguments)};var l=j[o]._={},r=h.methods.length;while(r--){(function(q){j[o][q]=function(){j[o]("call",q,arguments)}})(h.methods[r])}l.l=h.loader;l.i=m;l.p={0:+new Date};l.P=function(q){l.p[q]=new Date-l.p[0]};function t(){l.P(n);j[o](n)}j.addEventListener?j.addEventListener(n,t,false):j.attachEvent("on"+n,t);var p=function(){function F(v){v="head";return["<",v,"></",v,"><",z,' onload="var d=',u,";d.getElementsByTagName('head')[0].",A,"(d.",y,"('script')).",B,"='",k,"//",l.l,"'",'"',"></",z,">"].join("")}var z="body",C=i[z];if(!C){return setTimeout(p,100)}l.P(1);var A="appendChild",y="createElement",B="src",D=i[y]("div"),H=D[A](i[y](o)),q=i[y]("iframe"),u="document",s="domain",E;D.style.display="none";C.insertBefore(D,C.firstChild).id=o;q.frameBorder="0";q.id=o+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){q.src="javascript:false"}q.allowTransparency="true";H[A](q);try{q.contentWindow[u].open()}catch(I){h[s]=i[s];E="javascript:var d="+u+".open();d.domain='"+i.domain+"';";q[B]=E+"void(0);"}try{var G=q.contentWindow[u];G.write(F());G.close()}catch(J){q[B]=E+'d.write("'+F().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}l.P(2)};p()};m()})({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
olark.identify(d.Olark.id);c()}};ISQ.Widget.Proxy.Chat.LiveEngage={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],log:function(a){var b=null;_it(this.mPendingWidgets,function(c){if(b===c){return}else{b=c}if(c.cdcUser){c.cdcUser.sendMessage("subject=widgetLog&entry="+a)}})},start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{this.log("LivePerson LE2: opening chat window");if(window.lpTag.taglets.rendererStub.click(b.LiveEngage.engagementId)){this.log("LivePerson LE2: chat window opened");if(c.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(this.mPendingWidgets,"type=vendorwindowopened")}}}},load:function(h,i){var f=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(i.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=available&data="+f.mAvailable)}}else{this.mPendingWidgets.push(i)}return}else{this.mPendingWidgets.push(i)}this.mState=this.enumStates.loaded;ISQ.Widget.leEngagementsMap=ISQ.Widget.leEngagementsMap||{};if(!ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId]){ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId]={}}var c=function(){if(ISQ.Widget.leTagLoadCallbackFired){return}else{ISQ.Widget.leTagLoadCallbackFired=true}f.log("LivePerson LE2: add listener for availability");var k=function(l,m){f.log("LivePerson LE2: availability ("+l+":"+m+")");f.mAvailable=m;if(i.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=available&data="+f.mAvailable)}f.mState=f.enumStates.availabilityReceived};var j=ISQ.Widget.leEngagementsMap;j[h.LiveEngage.engagementId]={};setInterval(function(){var m,l;for(var n in j){if(j.hasOwnProperty(n)){m=j[n];l=window.lpTag.taglets.rendererStub.getEngagementState(n).state;if(m.state!==l){m.state=l;k(n,m.state===1)}}}},500)};if(h.LiveEngage.engagementDivId&&!document.getElementById(h.LiveEngage.engagementDivId)){f.log('LivePerson LE2: creating element with id="'+h.LiveEngage.engagementDivId+'"');var a=document.createElement("div");a.id=h.LiveEngage.engagementDivId;
a.style.display="none";document.body.appendChild(a);var g=window.lpTag&&window.lpTag.sdes&&typeof window.lpTag.sdes.send==="function";if(g){f.log("LivePerson LE2: notifying existing lpTag about new DIV");lpTag.sdes.send([{type:"pagediv",divId:h.LiveEngage.engagementDivId}])}else{f.log("LivePerson LE2: lpTag notify method does not exist -> lpTag should detect DIV automatically")}}if(!window.lpTag){f.log("LivePerson LE2: injecting lpTag");window.lpTag=window.lpTag||{};if(typeof window.lpTag._tagCount==="undefined"){window.lpTag={site:h.LiveEngage.id||"",section:lpTag.section||"",autoStart:lpTag.autoStart===false?false:true,ovr:lpTag.ovr||{},_v:"1.6.0",_tagCount:1,protocol:"https:",events:{bind:function(j,k,l){lpTag.defer(function(){lpTag.events.bind(j,k,l)},0)},trigger:function(j,k,l){lpTag.defer(function(){lpTag.events.trigger(j,k,l)},1)}},defer:function(j,k){if(k==0){this._defB=this._defB||[];this._defB.push(j)}else{if(k==1){this._defT=this._defT||[];this._defT.push(j)}else{this._defL=this._defL||[];this._defL.push(j)}}},load:function(l,j,k){var m=this;setTimeout(function(){m._load(l,j,k)},0)},_load:function(m,j,k){var n=m;if(!m){n=this.protocol+"//"+((this.ovr&&this.ovr.domain)?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site}var l=document.createElement("script");l.setAttribute("charset",j?j:"UTF-8");if(k){l.setAttribute("id",k)}l.setAttribute("src",n);document.getElementsByTagName("head").item(0).appendChild(l)},init:function(){this._timing=this._timing||{};this._timing.start=(new Date()).getTime();var j=this;if(window.attachEvent){window.attachEvent("onload",function(){j._domReady("domReady")})}else{window.addEventListener("DOMContentLoaded",function(){j._domReady("contReady")},false);window.addEventListener("load",function(){j._domReady("domReady")},false)}if(typeof(window._lptStop)=="undefined"){this.load()}},start:function(){this.autoStart=true},_domReady:function(j){if(!this.isDom){this.isDom=true;this.events.trigger("LPT","DOM_READY",{t:j})}this._timing[j]=(new Date()).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]};
lpTag.init()}else{window.lpTag._tagCount+=1}}else{f.log("LivePerson LE2: using existing lpTag")}var d=false;try{d=typeof window.lpTag.taglets.rendererStub.getEngagementState==="function"}catch(b){}if(d){f.log("LivePerson LE2: lpTag is fully loaded -> we can use its API");if(i.cdcUser&&ISQ.Widget.leEngagementsMap&&ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId]){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=available&data="+(ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId].state===1))}c()}else{f.log("LivePerson LE2: lpTag is not fully loaded -> waiting for button");window.lpTag.events.bind("LE_ENGAGER","SHOW",function(){c()})}window.lpTag.events.bind("lpUnifiedWindow","windowClosed",function(){f.log("LivePerson LE2: chat window closed");if(i.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=vendorwindowclosed")}})}};ISQ.Widget.Proxy.Chat.SalesForce={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],log:function(a){_it(this.mPendingWidgets,function(b){if(b.cdcUser){b.cdcUser.sendMessage("subject=widgetLog&entry="+a)}})},start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{this.log("SalesForce: opening chat window");if(b.popup&&b.popup.size&&b.popup.size.length===2){window.liveagent.setChatWindowWidth(+b.popup.size[0]);window.liveagent.setChatWindowHeight(+b.popup.size[1])}window.liveagent.startChat(b.SalesForce.buttonId)}},load:function(options,widget){var mthis=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(widget.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(mthis.mPendingWidgets,"type=available&data="+mthis.mAvailable)}}else{this.mPendingWidgets.push(widget)}return}else{this.mPendingWidgets.push(widget)}this.mState=this.enumStates.loaded;var apiScriptURL="https://"+options.SalesForce.deploymentDomain+"/content/g/js/38.0/deployment.js";if(!window._laq){window._laq=[]}window._laq.push(function(){window.liveagent.showWhenOnline(options.SalesForce.buttonId,document.createElement("div"));
window.liveagent.showWhenOffline(options.SalesForce.buttonId,document.createElement("div"))});var SalesForce_Loaded=function(){mthis.log("SalesForce: API Loaded");window.liveagent.addButtonEventHandler(options.SalesForce.buttonId,function(eventType){switch(eventType){case window.liveagent.BUTTON_EVENT.BUTTON_AVAILABLE:updateAvailability(options.SalesForce.buttonId,true);break;case window.liveagent.BUTTON_EVENT.BUTTON_UNAVAILABLE:updateAvailability(options.SalesForce.buttonId,false);break;case window.liveagent.BUTTON_EVENT.BUTTON_ACCEPTED:mthis.log("SalesForce: chat window opened");break;case window.liveagent.BUTTON_EVENT.BUTTON_REJECTED:mthis.log("SalesForce: chat window closed");break}});if(options.SalesForce.initCode){try{eval(options.SalesForce.initCode)}catch(e){if(window.console&&typeof window.console.error==="function"){console.error(e)}}}window.liveagent.init("https://"+options.SalesForce.apiDomain+"/chat",options.SalesForce.deploymentId,options.SalesForce.organizationId);var updateAvailability=function(buttonId,isOnline){mthis.log("SalesForce: Availability ("+buttonId+":"+isOnline+")");mthis.mAvailable=isOnline;if(widget.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(mthis.mPendingWidgets,"type=available&data="+mthis.mAvailable)}mthis.mState=mthis.enumStates.availabilityReceived}};mthis.log("SalesForce: injecting API");var se=document.createElement("script");se.type="text/javascript";se.async=true;se.src=apiScriptURL;var done=false;se.onload=se.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){SalesForce_Loaded()}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(se,s)}};ISQ.Widget.UVT=initializeNS("ISQ.Widget.UVT");ISQ.Widget.UVT.synced=ISQ.Widget.UVT.synced||false;ISQ.Widget.UVT.isSyncing=ISQ.Widget.UVT.isSyncing||false;(function(){var h="bc.visitor_token";var i=false;var g=function(){var k=ISQ.Tools.Storage.get(h,i);var j=JSON.parse(k);return(j||{}).token};var f=function(k){var l=(k||{}).visitorToken;var j=JSON.stringify({token:l});
ISQ.Tools.Storage.set(h,j,i)};var d=function(j){f(j);ISQ.Widget.UVT.synced=true;ISQ.Widget.UVT.isSyncing=false};var b=function(l,k,j){Alloy.jsonp({url:l,params:k,handler:function(n,m){if(n===Alloy.Com.SUCCESS){d(m)}j()}})};var a=function(j){var k=[ISQ.Widget.getAccountURL(j),"/api/v1/visitorToken"];return k.join("")};var c=function(j,k){var l=g();var m={};if(l){m.visitorToken=l}b(a(j),m,k)};ISQ.Widget.UVT.syncToken=function(j,k){if(ISQ.Widget.UVT.synced){k()}else{if(ISQ.Widget.UVT.isSyncing){var l=function(){if(ISQ.Widget.UVT.isSyncing){setTimeout(l,50)}else{k()}};l()}else{ISQ.Widget.UVT.isSyncing=true;c(j,k)}}};ISQ.Widget.UVT.retrieveLocalToken=g})();ISQ.Tools.Parallel=initializeNS("ISQ.Tools.Parallel");ISQ.Tools.Parallel.waitForAll=function(c,b){var a=0;var f=function(){a++;if(a===c.length){b()}};for(var d=0;d<c.length;d++){c[d](f)}};(function(){var d=document.head||document.getElementsByTagName("head")[0];var b={};var g={findObject:c,Modular:f};var a=c("nanoRep.BundleManager",true);function c(l,i,h){var m=0,j,k;l=l.split(".");h=h||window;j=l.length;while((m<j)&&(typeof h==="object"||typeof h==="function")){k=h[l[m]];if(!(typeof k==="object"||typeof k==="function")){break}h=k;++m}if(i){while(m<j){k={};h[l[m]]=k;h=k;++m}}return((m<j)?null:h)}function f(h){this.bundleInstance=h;this.defined={};this.exportMode=false}f.prototype.declare=function(k,i){var l,j,h;this.name=k;this.deps=[];for(l=0,j=i?i.length:0;l<j;++l){h=i[l];if(typeof h==="string"){h=this.defined[h]}this.deps.push(h)}};f.prototype.define=function(h){var i=h.apply(null,this.deps);if(i){this.defined[this.name]=i;if(this.exportMode){this.bundleInstance[this.name]=i}}};f.prototype.startExport=function(){this.exportMode=true};f.prototype.endExport=function(){this.exportMode=false};f.prototype.byName=function(h){return this.defined[h]};g.objectFinder=function(i,h){return function(){return c(i,false,h)}};(function(){var i="";var h=null;var j=4000*45;g.addStyle=function(){var l=Array.prototype.join.call(arguments,"\n");if(h&&h.styleSheet&&(i.length+2+l.length)<j){i+="\n"+l;
h.styleSheet.cssText=i;return}var k=document.createElement("style"),m;h=k;i=l;k.setAttribute("type","text/css");if(k.styleSheet){k.styleSheet.cssText=l;if(document.body){d.appendChild(k)}else{if(document.addEventListener){m=function(){document.removeEventListener("DOMContentLoaded",m,false);d.appendChild(k)};document.addEventListener("DOMContentLoaded",m,false)}else{if(window.attachEvent){m=function(){window.detachEvent("onload",m);d.appendChild(k)};window.attachEvent("onload",m)}}}}else{k.appendChild(document.createTextNode(l));d.appendChild(k)}return k}})();a.updateIndex=function(){return this};a.define=function(h){var j=h.name,i,k;if(b.hasOwnProperty(j)){k=["Redefinition of '",j,"' bundle!"].join("");throw (new Error(k))}i=(h.hasOwnProperty("ns")?c(h.ns,true):{});b[j]=i;h.init.call(i,b,h.data,g);return this};a.findObject=c;window.ISQ=nanoRep})();nanoRep.BundleManager.define({name:"EventEmitter",require:[],data:{},init:function(a,b,d){var c=new d.Modular();c.declare("EventEmitter",[window.Alloy?Alloy.Base:ISQ.Base]);c.define(function(f){var h=function(j,k){for(var l=0;l<j.length;l++){if(j[l]===k){return l}}return -1};var g=f.extend({name:"EventEmitter",_prototype:{on:function(j,l,i){if(typeof j==="string"){this._events=this._events||{};this._events[j]=this._events[j]||[];if(i){l._eventEmitterContext=i}this._events[j].push(l)}else{for(var k in j){if(j.hasOwnProperty(k)){this.on(k,j[k],l)}}}},off:function(i,k){if(typeof i==="string"){this._events=this._events||{};if(i in this._events===false){return}delete k._eventEmitterContext;this._events[i].splice(h(this._events[i],k),1)}else{for(var j in i){if(i.hasOwnProperty(j)){this.off(j,i[j],k)}}}},emit:function(j){this._events=this._events||{};if(j in this._events===false){return}for(var k=0;this._events&&this._events[j]&&k<this._events[j].length;k++){this._events[j][k].apply(this._events[j][k]._eventEmitterContext||this,Array.prototype.slice.call(arguments,1))}}}});return g});this.EventEmitter=c.byName("EventEmitter")}});nanoRep.BundleManager.define({name:"Chat",require:["EventEmitter"],data:{},ns:"nanoRep.SDK.Channeling",init:function(container,data,utils){var modular=new utils.Modular();
var EventEmitter=container.EventEmitter.EventEmitter;var Helper=(function(){function openPopup(url,name,width,height,scrolling){var left=(screen.width/2)-(width/2);var top=(screen.height/2)-(height/2);var scrollbars=scrolling||"no";return window.open(url,name,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars="+scrollbars+", resizable=no, copyhistory=no, width="+width+", height="+height+", top="+top+", left="+left)}return{openPopup:openPopup}}());var DOM=(function(){return{appendJavaScriptElement:function(url,async,defer){var script=document.createElement("script"),head=document.querySelector("head");if(async){script.setAttribute("async","")}if(defer){script.setAttribute("defer","")}script.setAttribute("src",url);head.appendChild(script);return script}}}());var Alloy=(function(){var cbId=0;return{jsonp:function(obj){var cbName="jspwcb"+cbId++,reqURL=obj.url+(obj.url.indexOf("?")?"&":"?")+"cb="+cbName,script;window[cbName]=function(args){var args=Array.prototype.slice.call(arguments);delete window[cbName];args.unshift(false);obj.handler.apply(this,args);script.parentNode.removeChild(script)};script=DOM.appendJavaScriptElement(reqURL)}}}());modular.declare("Chat",[EventEmitter]);modular.define(function(EventEmitter){var providerClasses={};var Chat={Providers:providerClasses,addProvider:function(providerName,providerProto){providerProto.ctor=providerProto.initialize;providerClasses[providerName]=AbstractChatProvider.extend({name:providerName,_prototype:providerProto});providerClasses[providerName].Name=providerName;return providerClasses[providerName]},getProvider:function(channel){var providerInstances=window.nanoRep.SDK._chatProviderInstances=window.nanoRep.SDK._chatProviderInstances||{};var channelInstanceId=providerClasses[channel.chatProvider].prototype.getChannelId(channel);if(!providerInstances[channelInstanceId]){providerInstances[channelInstanceId]=new providerClasses[channel.chatProvider](channel.chatOptions)}return providerInstances[channelInstanceId]}};var AbstractChatProvider=EventEmitter.extend({name:"AbstractChatProvider",abstractClass:true,_prototype:{capabilities:{customUI:false,vendorUI:false,vendorPopup:false},ctor:function(chatOptions){this.chatOptions=chatOptions
},getChannelId:function(channel){return channel.chatProvider},isAgentAvailable:function(){},isSessionActive:function(){},isSessionResumed:function(){},showVendorUI:function(){},showVendorPopup:function(){},getChatState:function(){},getChatLog:function(){},getStatusMessage:function(){},getAgentName:function(){},requestChat:function(){},setUserTyping:function(){},setCustomParams:function(){},sendMessage:function(){},endChat:function(){}}});return Chat});modular.declare("Chat.LiveChatInc",["Chat",Helper]);modular.define(function(Chat,Helper){Chat.addProvider("LiveChatInc",{capabilities:{customUI:false,vendorUI:true,vendorPopup:true},initialize:function(chatOptions){this.chatOptions=chatOptions;injectLiveChatAPI(this.chatOptions.accountNum);getLiveChatAPI(function(LC_API){LC_API.hide_chat_window();LC_API.on_chat_ended=function(){LC_API.hide_chat_window()}})},isAgentAvailable:function(callback){getLiveChatAPI(function(LC_API){callback(LC_API.agents_are_available())})},showVendorUI:function(){getLiveChatAPI(function(LC_API){LC_API.open_chat_window()})},showVendorPopup:function(popupWidth,popupHeight){var popupUrl="https://secure.livechatinc.com/licence/"+this.chatOptions.accountNum+"/open_chat.cgi?";Helper.openPopup(popupUrl,"nrLiveChatIncWindow",popupWidth,popupHeight)}});function injectLiveChatAPI(accountId){window.__lc=window.__lc||{};window.__lc.license=accountId|0;window.LC_API=window.LC_API||{};window.LC_API.on_before_load=function(){if(getLiveChatAPI.callbackQueue){for(var i=0;i<getLiveChatAPI.callbackQueue.length;i++){getLiveChatAPI.callbackQueue[i](window.LC_API)}delete getLiveChatAPI.callbackQueue}};(function(){var lc=document.createElement("script");lc.type="text/javascript";lc.async=true;lc.src=(document.location.protocol==="https:"?"https://":"http://")+"cdn.livechatinc.com/tracking.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(lc,s)})()}function getLiveChatAPI(callback){if(window.LC_API.open_chat_window){callback(window.LC_API)}else{if(!getLiveChatAPI.callbackQueue){getLiveChatAPI.callbackQueue=[]
}getLiveChatAPI.callbackQueue.push(callback)}}});modular.declare("Chat.Olark",["Chat",EventEmitter]);modular.define(function(Chat,EventEmitter){Chat.addProvider("Olark",{capabilities:{customUI:false,vendorUI:true,vendorPopup:false},initialize:function(chatOptions){var self=this;OlarkAPI.injectOlarkApi(chatOptions.accountNum);olark.configure("box.start_hidden",true);olark("api.box.hide");OlarkAPI.on("agentAvailabilityChanged",function(isAvailable){self.emit("agentAvailabilityChanged",isAvailable)})},isAgentAvailable:function(callback){OlarkAPI.isAgentAvailable(callback)},showVendorUI:function(){olark("api.box.expand")}});var OlarkAPI={on:EventEmitter.prototype.on,off:EventEmitter.prototype.off,emit:EventEmitter.prototype.emit,currentAgentStatus:null,injectOlarkApi:function(accountId){if(!window.olark){window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={0:+new Date};a.P=function(u){a.p[u]=new Date-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return["<",hd,"></",hd,"><",i,' onload="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p());t.close()
}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]})}olark.identify(accountId);this.addEventListeners()},addEventListeners:function(){var self=this;olark("api.chat.onOperatorsAvailable",function(){self.currentAgentStatus=true;self.emit("agentAvailabilityChanged",self.currentAgentStatus)});olark("api.chat.onOperatorsAway",function(){self.currentAgentStatus=false;self.emit("agentAvailabilityChanged",self.currentAgentStatus)})},isAgentAvailable:function(callback){var tmpHandler;if(!callback){return}if(this.currentAgentStatus!==null){callback(this.currentAgentStatus)}else{tmpHandler=function(isAvailable){this.off("agentAvailabilityChanged",tmpHandler);callback(isAvailable)};this.on("agentAvailabilityChanged",tmpHandler)}}}});modular.declare("Chat.Zopim",["Chat"]);modular.define(function(Chat){Chat.addProvider("Zopim",{capabilities:{customUI:false,vendorUI:true,vendorPopup:true},initialize:function(chatOptions){injectZopimAPI(chatOptions.accountNum);getZopimAPI(function($zopim){if(!$zopim.livechat.isChatting()){$zopim.livechat.hideAll()}$zopim.livechat.setOnChatEnd(function(){$zopim.livechat.hideAll()});$zopim.livechat.window.onHide(function(){if(!$zopim.livechat.isChatting()){$zopim.livechat.hideAll()}})})},isAgentAvailable:function(callback){getZopimAPI(function($zopim){$zopim.livechat.setOnStatus(function(agentStatus){if(agentStatus==="online"){callback(true)}else{callback(false)}})})},showVendorUI:function(){getZopimAPI(function($zopim){$zopim.livechat.window.show()})},showVendorPopup:function(){getZopimAPI(function($zopim){$zopim.livechat.window.openPopout()})}});function injectZopimAPI(accountId){window.$zopim||(function(d,s){var z=window.$zopim=function(c){z._.push(c)},$=z.s=d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set._.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute("charset","utf-8");$.src="//v2.zopim.com/?"+accountId;
z.t=Number(new Date());$.type="text/javascript";var done=false;$.onload=$.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;if(getZopimAPI.callbackQueue){for(var i=0;i<getZopimAPI.callbackQueue.length;i++){getZopimAPI.callbackQueue[i](window.$zopim)}delete getZopimAPI.callbackQueue}}};e.parentNode.insertBefore($,e)})(document,"script")}function getZopimAPI(callback){if(window.$zopim.livechat){callback(window.$zopim)}else{if(!getZopimAPI.callbackQueue){getZopimAPI.callbackQueue=[]}getZopimAPI.callbackQueue.push(callback)}}});modular.declare("Chat.SalesForce",["Chat",EventEmitter]);modular.define(function(Chat,EventEmitter){Chat.addProvider("SalesForce",{capabilities:{customUI:false,vendorUI:false,vendorPopup:true},initialize:function(chatOptions){this.chatOptions=chatOptions;SF.init(chatOptions).on({agentAvailabilityChanged:function(info){this.emit("agentAvailabilityChanged",info.available)}},this)},isAgentAvailable:function(callback){SF.isAgentAvailable(this.chatOptions,callback)},showVendorPopup:function(popupWidth,popupHeight){SF.showVendorPopup(this.chatOptions,popupWidth,popupHeight)}});var SF={state:{},on:EventEmitter.prototype.on,off:EventEmitter.prototype.off,emit:EventEmitter.prototype.emit,init:function(chatOptions){var apiScriptURL="https://"+chatOptions.deploymentDomain+"/content/g/js/38.0/deployment.js";var self=this;self.state[chatOptions.buttonId]={available:false};if(!window._laq){window._laq=[]}window._laq.push(function(){window.liveagent.showWhenOnline(chatOptions.buttonId,document.createElement("div"));window.liveagent.showWhenOffline(chatOptions.buttonId,document.createElement("div"))});var se=document.createElement("script");se.type="text/javascript";se.async=true;se.src=apiScriptURL;var done=false;se.onload=se.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){window.liveagent.addButtonEventHandler(chatOptions.buttonId,function(eventType){switch(eventType){case window.liveagent.BUTTON_EVENT.BUTTON_AVAILABLE:self.state[chatOptions.buttonId].available=true;
self.emit("agentAvailabilityChanged",{buttonId:chatOptions.buttonId,available:true});break;case window.liveagent.BUTTON_EVENT.BUTTON_UNAVAILABLE:self.state[chatOptions.buttonId].available=false;self.emit("agentAvailabilityChanged",{buttonId:chatOptions.buttonId,available:false});break;case window.liveagent.BUTTON_EVENT.BUTTON_ACCEPTED:self.emit("windowOpened",chatOptions.buttonId);break;case window.liveagent.BUTTON_EVENT.BUTTON_REJECTED:self.emit("windowClosed",chatOptions.buttonId);break}});if(chatOptions.initCode){try{eval(chatOptions.initCode)}catch(e){if(window.console&&typeof window.console.error==="function"){console.error(e)}}}window.liveagent.init("https://"+chatOptions.apiDomain+"/chat",chatOptions.deploymentId,chatOptions.organizationId);self.emit("apiLoaded",window.liveagent)}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(se,s);return this},getAPI:function(callback){if(typeof window.liveagent==="object"){callback.call(this,window.liveagent)}else{var loadHandler=function(){this.off("apiLoaded",loadHandler);callback.call(this,window.liveagent)};this.on("apiLoaded",loadHandler,this)}},isAgentAvailable:function(chatOptions,callback){this.getAPI(function(){callback(this.state[chatOptions.buttonId].available)})},showVendorPopup:function(chatOptions,popupWidth,popupHeight){this.getAPI(function(liveagent){liveagent.setChatWindowWidth(popupWidth);liveagent.setChatWindowHeight(popupHeight);liveagent.startChat(chatOptions.buttonId)})}}});modular.declare("Chat.SnapEngage",["Chat",Helper]);modular.define(function(Chat,Helper){Chat.addProvider("SnapEngage",{capabilities:{customUI:false,vendorUI:true,vendorPopup:true},initialize:function(chatOptions){this.chatOptions=chatOptions;injectSnapEngageAPI(this.chatOptions.accountNum);getSnapEngageAPI(function(SnapEngage){SnapEngage.hideButton();SnapEngage.setCallback("Close",function(){SnapEngage.hideButton()})})},isAgentAvailable:function(callback){getSnapEngageAPI(function(SnapEngage){SnapEngage.getAgentStatusAsync(function(online){callback(online)
})})},showVendorUI:function(){getSnapEngageAPI(function(SnapEngage){SnapEngage.startLink()})},showVendorPopup:function(){var popupUrl="http://www.snapengage.com/chat?t=out&w="+this.chatOptions.accountNum;Helper.openPopup(popupUrl,"nrSnapEngageChatWindow",346,365)}});function injectSnapEngageAPI(accountId){if(window.SnapEngage){return}var se=document.createElement("script");se.type="text/javascript";se.async=true;se.src="//storage.googleapis.com/code.snapengage.com/js/"+accountId+".js";var done=false;se.onload=se.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;if(getSnapEngageAPI.callbackQueue){for(var i=0;i<getSnapEngageAPI.callbackQueue.length;i++){getSnapEngageAPI.callbackQueue[i](window.SnapEngage)}delete getSnapEngageAPI.callbackQueue}}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(se,s)}function getSnapEngageAPI(callback){if(window.SnapEngage){callback(window.SnapEngage)}else{if(!getSnapEngageAPI.callbackQueue){getSnapEngageAPI.callbackQueue=[]}getSnapEngageAPI.callbackQueue.push(callback)}}});modular.declare("Chat.LiveEngage",["Chat",EventEmitter]);modular.define(function(Chat,EventEmitter){Chat.addProvider("LiveEngage",{capabilities:{customUI:false,vendorUI:true,vendorPopup:false},getChannelId:function(channel){var id=channel.chatProvider+"_"+channel.chatOptions.accountNum+"_"+channel.chatOptions.engagementId;return id},initialize:function(chatOptions){if(chatOptions.engagementDivId&&!document.getElementById(chatOptions.engagementDivId)){var container=document.createElement("div");container.style.display="none";container.id=chatOptions.engagementDivId;document.body.appendChild(container);var notifyMethodAvailable=window.lpTag&&window.lpTag.sdes&&typeof window.lpTag.sdes.send==="function";if(notifyMethodAvailable){lpTag.sdes.send([{type:"pagediv",divId:chatOptions.engagementDivId}])}}LE.injectAPI(chatOptions.accountNum,chatOptions.engagementId,chatOptions.initCode).on({agentAvailabilityChanged:function(engagement){if(engagement.id===chatOptions.engagementId){this.emit("agentAvailabilityChanged",engagement.available)
}},windowOpened:function(engagementId){},windowClosed:function(engagementId){}},this)},isAgentAvailable:function(callback){LE.isAgentAvailable(this.chatOptions.engagementId,function(isAvailable){callback(isAvailable)})},showVendorUI:function(){LE.showVendorUI(this.chatOptions.engagementId)}});function initChatHooks(chatInitHook){if(chatInitHook){try{eval(chatInitHook)}catch(e){if(window.console&&typeof window.console.error==="function"){console.error(e)}}}}var LE={activeEngagementId:null,engagements:{},on:EventEmitter.prototype.on,off:EventEmitter.prototype.off,emit:EventEmitter.prototype.emit,injectAPI:function(accountId,engagementId,chatInitHook){var self=this;this.engagements[engagementId]=this.engagements[engagementId]||{state:0};if(this.apiInjected){initChatHooks(chatInitHook);return this}else{this.apiInjected=true}if(!window.lpTag){window.lpTag=window.lpTag||{};if(typeof window.lpTag._tagCount==="undefined"){window.lpTag={site:accountId||"",section:lpTag.section||"",autoStart:lpTag.autoStart===false?false:true,ovr:lpTag.ovr||{},_v:"1.6.0",_tagCount:1,protocol:"https:",events:{bind:function(app,ev,fn){lpTag.defer(function(){lpTag.events.bind(app,ev,fn)},0)},trigger:function(app,ev,json){lpTag.defer(function(){lpTag.events.trigger(app,ev,json)},1)}},defer:function(fn,fnType){if(fnType==0){this._defB=this._defB||[];this._defB.push(fn)}else{if(fnType==1){this._defT=this._defT||[];this._defT.push(fn)}else{this._defL=this._defL||[];this._defL.push(fn)}}},load:function(src,chr,id){var t=this;setTimeout(function(){t._load(src,chr,id)},0)},_load:function(src,chr,id){var url=src;if(!src){url=this.protocol+"//"+((this.ovr&&this.ovr.domain)?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site}var s=document.createElement("script");s.setAttribute("charset",chr?chr:"UTF-8");if(id){s.setAttribute("id",id)}s.setAttribute("src",url);document.getElementsByTagName("head").item(0).appendChild(s)},init:function(){this._timing=this._timing||{};this._timing.start=(new Date()).getTime();var that=this;if(window.attachEvent){window.attachEvent("onload",function(){that._domReady("domReady")
})}else{window.addEventListener("DOMContentLoaded",function(){that._domReady("contReady")},false);window.addEventListener("load",function(){that._domReady("domReady")},false)}if(typeof(window._lptStop)=="undefined"){this.load()}},start:function(){this.autoStart=true},_domReady:function(n){if(!this.isDom){this.isDom=true;this.events.trigger("LPT","DOM_READY",{t:n})}this._timing[n]=(new Date()).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]};lpTag.init()}else{window.lpTag._tagCount+=1}}this.getAPI(function(){initChatHooks(chatInitHook);setInterval(function(){var engagement,activeEngagementState;for(var engagementId in self.engagements){if(self.engagements.hasOwnProperty(engagementId)){engagement=self.engagements[engagementId];activeEngagementState=window.lpTag.taglets.rendererStub.getEngagementState(engagementId).state;if(engagement.state!==activeEngagementState){engagement.state=activeEngagementState;self.emit("agentAvailabilityChanged",{id:engagementId,state:engagement.state,available:engagement.state===1})}}}},500);window.lpTag.events.bind("lpUnifiedWindow","windowClosed",function(){self.emit("windowClosed",self.activeEngagementId);self.activeEngagementId=null})});return this},isFullyLoadedAPI:function(){try{return typeof window.lpTag.taglets.rendererStub.getEngagementState==="function"}catch(e){return false}},getAPI:function(callback){var self=this;this.useCallbackQueue(this.getAPI,callback,function(callback){if(self.isFullyLoadedAPI()){callback.call(self)}else{window.lpTag.events.bind("LE_ENGAGER","SHOW",function(){callback.call(self)})}})},isAgentAvailable:function(engagementId,callback){this.getAPI(function(){callback(this.engagements[engagementId].state===1)})},showVendorUI:function(engagementId){if(window.lpTag.taglets.rendererStub.click(engagementId)&&!this.activeEngagementId){this.activeEngagementId=engagementId;this.emit("windowOpened",engagementId)}},useCallbackQueue:function(func,callback,funcBody){var self=this;if(func._resolvedArgs){if(callback){callback.apply(self,func._resolvedArgs)
}}else{if(func._callbackQueue){if(callback){func._callbackQueue.push(callback)}}else{func._callbackQueue=func._callbackQueue||[];if(callback){func._callbackQueue.push(callback)}funcBody.call(self,function(){func._resolvedArgs=Array.prototype.slice.call(arguments);for(var i=0;i<func._callbackQueue.length;i++){func._callbackQueue[i].apply(self,arguments)}delete func._callbackQueue})}}}}});if(container.Common){modular.declare("Chat.LivePerson",["Chat",container.Alloy,container.Common.DOM,container.Common.Helper,container.Legacy.Misc.checkString,EventEmitter,container.Localization])}else{modular.declare("Chat.LivePerson",["Chat",Alloy,DOM,Helper,null,EventEmitter,null])}modular.define(function(Chat,Alloy,DOM,Helper,checkString,EventEmitter,Localization){var Provider=Chat.addProvider("LP",{capabilities:{customUI:true,vendorUI:false,vendorPopup:true,pendingMessages:true},initialize:function(chatOptions){this.chatOptions=chatOptions;this.agentFilter={};if(this.chatOptions){this.agentFilter.skill=this.chatOptions.agentSkill}if(!isNaN(parseFloat(this.chatOptions.waitTime))){this.agentFilter.maxWaitTime=parseFloat(this.chatOptions.waitTime)}LP.initAPI(this.chatOptions,this)},isAgentAvailable:function(callback){var self=this;LP.getAgentStatus(function(isAvailable){callback(isAvailable);if(isAvailable&&self.chatOptions.preChat){LP.loadPreChatSurvey()}})},isSessionActive:function(callback){LP.isSessionActive(callback)},isSessionResumed:function(callback){LP.isSessionResumed(callback)},showVendorPopup:function(popupWidth,popupHeight){var self=this;LP.detectAccountServer(self.chatOptions.accountNum,function(serverApiDomain){var popupUrl="https://"+serverApiDomain+"/hc/"+self.chatOptions.accountNum+"/?cmd=file&file=visitorWantsToChat&site="+self.chatOptions.accountNum+"&byhref=1";if(self.chatOptions.agentSkill){popupUrl+="&SV!skill="+encodeURIComponent(self.chatOptions.agentSkill)}Helper.openPopup(popupUrl,"nrLPChatWindow",popupWidth,popupHeight)})},getChatState:function(callback){LP.getAPI(function(chatInstance){callback(chatInstance.getState()||null)
})},getChatLog:function(callback){callback(LP.getCurrentChatLog())},getStatusMessage:function(callback){callback(LP.getLastSystemMessage())},getAgentName:function(callback){LP.getAgentName(callback)},requestChat:function(){var self=this;LP.getAPI(function(chatInstance){if(self.chatOptions.preChat){LP.loadPreChatSurvey(function(error,surveyConfig){if(!error&&(chatInstance.getState()!=="waiting"&&chatInstance.getState()!=="chatting")){self.emit("providerShowBlock",{"class":"nanoRep.SDK.Channeling.Chat.Providers."+Provider.Name+".ChatSurvey",config:surveyConfig,area:"overlay"})}else{chatInstance.requestChat(self.agentFilter)}})}else{chatInstance.requestChat(self.agentFilter)}if(!self.chatOptions.hideSendToEmail){self.emit("providerShowBlock",{"class":"nanoRep.SDK.Channeling.Chat.Providers."+Provider.Name+".ChatTranscript",area:"toolbar"})}})},setUserTyping:function(isTyping){LP.getAPI(function(chatInstance){chatInstance.setVisitorTyping({typing:isTyping})})},sendMessage:function(messageText,callback){LP.getAPI(function(chatInstance){if(chatInstance.getState()==="chatting"){LP.nrSendChatMessage(messageText,callback)}else{LP.nrSendPendingChatMessage(messageText,callback)}})},setCustomParams:function(paramsObject){LP.setPendingCustomVariable({customVariable:paramsObject})},endChat:function(){LP.endChat()},_submitPreSurvey:function(surveyData){var self=this;if(surveyData){self.agentFilter.survey=surveyData}LP.getAPI(function(chatInstance){chatInstance.requestChat(self.agentFilter)})},_submitPostSurvey:function(surveyData){if(surveyData){LP.getAPI(function(chatInstance){chatInstance.submitExitSurvey({survey:surveyData})})}this.emit("chatStateChanged","close")},_emailTranscript:function(email){LP.getAPI(function(chatInstance){chatInstance.requestTranscript({email:email})})}});Provider.ChatSurvey=EventEmitter.extend({name:"ChatSurvey",_prototype:{ctor:function(obj){this.surveyType=obj.surveyType;this.chatUI=obj.chatUI;this.chatProvider=obj.chatProvider;this.build(obj,obj.container)},build:function(survey,parentNode){var self=this;
this.container=DOM.createElement("div",{parent:parentNode,className:"surveyContainer nr-lp-survey"});this.survey=survey;this.questions=[];this.logicQuestions=[];DOM.createElement("div",{parent:this.container,className:"surveyHeading",innerHTML:survey.header});for(var i=0;i<survey.questions.question.length;i++){var question=survey.questions.question[i];this.appendQuestion(question,this.container)}this.submitHandler=function(){self.submit()};this.btnSubmit=DOM.createElement("button",{textContent:"Submit!",className:"nr-lp-btn-submit",parent:this.container});this.btnSubmit.onclick=this.submitHandler},appendQuestion:function(question,container){var table=DOM.createElement("table",{parent:container,cellPadding:"3"});var tbody=DOM.createElement("tbody",{parent:table});var td,tr;var logic=this.logicQuestions[question.logicId.toString()];var questionObj={question:question,visible:true};questionObj.row=table;if(logic){var type=logic.type;var element=logic.element;table.style.display="none";questionObj.visible=false;var mthis=this;switch(type){case"Dropdown Box":element.parentNode.onchange=function(){var selected=element.parentNode.value===element.value;mthis.toggleLogicQuestion(table,selected,questionObj)};break;default:element.onclick=function(){mthis.toggleLogicQuestion(table,this.checked,questionObj)};break}}tr=DOM.createElement("tr",{parent:tbody,valign:"top"});td=DOM.createElement("td",{parent:tr,className:"question"});td.innerHTML=question.label+(question.mandatory?'<span class="mandatory"> *</span>':"");td=DOM.createElement("tr",{parent:tr});this.buildInput(question,td,questionObj);if(question.label.toLowerCase().indexOf("name")>-1){questionObj.labelHasName=true}this.questions.push(questionObj)},buildInput:function(question,td,questionObj){var options=question.entry;var input,i,op;var tmpWrapper,tmpHolder,tmpLabel;switch(question.type){case"Text Field":input=DOM.createElement("input",{type:"text",parent:td,value:question.lastKnownValue,maxLength:40});questionObj.input=input;break;case"Text Area":input=DOM.createElement("textarea",{parent:td,className:"inputTxt",value:question.lastKnownValue});
questionObj.input=input;break;case"Dropdown Box":input=DOM.createElement("select",{parent:td,className:"surveySelect"});if(!options){break}for(i=0;i<options.length;i++){op=DOM.createElement("option",{parent:input,value:options[i].value,textContent:options[i].value});op.selected=options[i].checked;this.addLogicQuestion(options[i],op,question.type)}questionObj.input=input;break;case"Checkbox":if(!options){break}questionObj.inputs=[];for(i=0;i<options.length;i++){tmpWrapper=DOM.createElement("table",{parent:td});tmpHolder=DOM.createElement("td",{parent:tmpWrapper});tmpLabel=DOM.createElement("label",{parent:tmpHolder});op=DOM.createElement("input",{type:"checkbox",parent:tmpLabel,value:options[i].value,checked:options[i].checked});DOM.createElement("span",{parent:tmpLabel,textContent:options[i].displayValue});questionObj.inputs.push(op);this.addLogicQuestion(options[i],op,question.type)}break;case"Radio Button (side by side)":case"Radio Button":if(!options){break}questionObj.inputs=[];td.className+=(question.type==="Radio Button (side by side)"?" radio-layout-sidebyside":" radio-layout-default");for(i=0;i<options.length;i++){tmpWrapper=DOM.createElement("table",{parent:td});tmpHolder=DOM.createElement("td",{parent:tmpWrapper});tmpLabel=DOM.createElement("label",{parent:tmpHolder});op=DOM.createElement("input",{type:"radio",parent:tmpLabel,name:"q_"+question.id,value:options[i].value,checked:options[i].checked});DOM.createElement("span",{parent:tmpLabel,textContent:options[i].displayValue});questionObj.inputs.push(op);this.addLogicQuestion(options[i],op,question.type)}break}},addLogicQuestion:function(option,element,type){if(option.logic&&option.logic.showLogicId){var showLogicId=option.logic.showLogicId;var obj={element:element,type:type};this.logicQuestions[showLogicId]=obj}},toggleLogicQuestion:function(table,visible,questionObj){table.style.display=visible?"":"none";questionObj.visible=visible;this.chatUI.emit("resize")},validateSurvey:function(){var questions=this.questions;var errors=false;var nameValidated=false;
var inputValue;for(var i=0;i<questions.length;i++){if(!questions[i].visible){continue}var question=questions[i].question;var input=questions[i].input;var inputs=questions[i].inputs;var row=questions[i].row;var labelHasName=questions[i].labelHasName;var error=false;if(input){inputValue=input.value.replace(/^\s+|\s+$/g,"")}else{inputValue=null}if(question.mandatory){if(inputValue===""){error=true}else{if(inputs){var filled=false;for(var j=0;j<inputs.length;j++){if(inputs[j].checked){filled=true;break}}error=!filled}}}if((question.type==="Text Field"||question.type==="Text Area")&&inputValue){switch(question.validationType){case"alpha_numeric":if(labelHasName&&!nameValidated){error|=inputValue.indexOf('"')>-1|inputValue.indexOf("'")>-1|inputValue.indexOf("<")>-1|inputValue.indexOf(">")>-1|inputValue.indexOf(";")>-1;nameValidated=true}break;case"numeric":error|=!checkString(inputValue,"number");break;case"email":error|=!checkString(inputValue,"email");break}}if(error){row.className="validationError";errors=true}else{row.className=""}}return !errors},submit:function(){if(!this.validateSurvey()){return}var surveyObj={survey:{id:this.survey.id,question:[]}};var emptySurvey=true;for(var i in this.questions){if(!this.questions[i].visible){continue}var question=this.questions[i].question;var input=this.questions[i].input;var inputs=this.questions[i].inputs;var questionObj={id:question.id};if(input&&input.value){questionObj.answer=input.value.replace(/^\s+|\s+$/g,"").replace(/\"/g,'\\"')}else{if(inputs){var answers=[];for(var j in inputs){if(inputs[j].checked){answers.push(inputs[j].value)}}if(answers.length){questionObj.answer=answers}}}if(questionObj.answer){if(emptySurvey){emptySurvey=false}surveyObj.survey.question.push(questionObj)}}this.chatProvider[this.surveyType==="pre"?"_submitPreSurvey":"_submitPostSurvey"](emptySurvey?null:surveyObj.survey);this.dispose()},dtor:function(){DOM.removeNode(this.container);this.emit("dispose");this.chatProvider=null;this.chatUI=null}}});Provider.ChatTranscript=EventEmitter.extend({name:"ChatTranscript",_prototype:{ctor:function(obj){this.chatProvider=obj.chatProvider;
this.chatUI=obj.chatUI;this.container=obj.container;this.initStructure()},initStructure:function(){var self=this;this.block=DOM.createElement("div",{parent:this.container,className:"nr-lp-transcript"});this.btnShowForm=DOM.createElement("div",{parent:this.block,className:"nr-lp-transcript-btn","nr-tooltip":Localization.getText("Channeling.emailChat"),"nr-tooltip-position-y":"bottom"});this.form=DOM.createElement("form",{parent:this.block,className:"nr-lp-transcript-form"});this.emailInput=DOM.createElement("input",{parent:this.form,className:"nr-lp-transcript-input",placeholder:Localization.getText("Channeling.enterEmail")});this.btnCancel=DOM.createElement("span",{parent:this.form,className:"nr-lp-transcript-action",textContent:Localization.getText("Channeling.cancel")});this.btnSendEmail=DOM.createElement("span",{parent:this.form,className:"nr-lp-transcript-action nr-lp-transcript-action-highlight",textContent:Localization.getText("Channeling.sendChat")});this.hideForm();this.btnShowForm.onclick=function(){self.showForm();self.emailInput.focus()};this.btnSendEmail.onclick=function(){if(self.validate()){self.chatProvider._emailTranscript(self.emailInput.value);self.dispose()}};this.form.onsubmit=function(){self.btnSendEmail.onclick();return false};this.btnCancel.onclick=function(){self.emailInput.value="";self.hideForm()}},validate:function(){if(!checkString(this.emailInput.value,"email")){alert(Localization.getText("Channeling.emailValidation"));return false}return true},showForm:function(){DOM.addClass(this.container,"nr-lp-transcript-form-active");this.btnShowForm.style.display="none";this.form.style.display=""},hideForm:function(){DOM.removeClass(this.container,"nr-lp-transcript-form-active");this.btnShowForm.style.display="";this.form.style.display="none"},dtor:function(){this.hideForm();DOM.removeNode(this.block);this.emit("dispose");this.chatProvider=null;this.chatUI=null}}});var LP={state:null,chatOptions:null,chatInstance:null,chatProvider:null,initAPI:function(chatOptions,chatProvider){this.resetState();
this.chatOptions=chatOptions;this.chatProvider=chatProvider;this.detectAccountServer(this.chatOptions.accountNum)},detectAccountServer:function(accountId,callback){this.useCallbackQueue(this.detectAccountServer,callback,function(callback){Alloy.jsonp({url:"//api.liveperson.net/csdr/account/"+accountId+"/service/adminArea/baseURI.lpCsds?version=1.0",handler:function(error,data){callback(data.ResultSet.lpData[0].lpServer)}})})},isSessionActive:function(callback){var self=this;if(typeof callback!=="function"){return}LP.getAPI(function(chatInstance){var chatState=chatInstance.getState();if(chatState!=="chatting"&&chatState!=="ended"&&chatState!=="waiting"){self.state.pendingSessionRequests.push(callback)}else{callback(true)}})},isSessionResumed:function(callback){if(typeof callback!=="function"){return}callback(LP.state.chatWasResumed)},pollAgentStatus:function(){LP.getAPI(function(chatInstance){var pollInterval=3000;var requestUpdate=function(){chatInstance.getAvailabilty({skill:LP.chatOptions.agentSkill,success:function(data){if(LP.agentIsAvailable!==data.availability){LP.agentIsAvailable=data.availability;LP.chatProvider.emit("agentAvailabilityChanged",LP.agentIsAvailable)}setTimeout(requestUpdate,pollInterval)}})};requestUpdate()})},getAgentStatus:function(callback){var self=this;this.useCallbackQueue(this.getAgentStatus,callback,function(callback){this.detectAccountServer(this.chatOptions.accountNum,function(serverApiDomain){window.lpServerName=serverApiDomain;window.lpNumber=this.chatOptions.accountNum;window.lpSkill=this.chatOptions.agentSkill;window.repStateNotifyFunction=function(agentStatus){var isAvailable=(agentStatus==="online");callback(isAvailable);LP.agentIsAvailable=isAvailable;self.pollAgentStatus()};DOM.appendJavaScriptElement("//"+serverApiDomain+"/hcp/html/lpCheckRepState.js")})})},getAPI:function(callback){this.useCallbackQueue(this.getAPI,callback,function(callback){var self=this;var apiLoadedHandler=function(){var chatInstance=new window.lpTag.taglets.ChatOverRestAPI({transportOrder:["rest2jsonp"],appKey:self.chatOptions.apiKey,lpNumber:self.chatOptions.accountNum,skill:self.chatOptions.agentSkill||null,onInit:function(){callback(chatInstance)
},onLoad:function(){},onLine:function(data){for(var i=0,line;i<data.lines.length;i++){line=data.lines[i];line.text=line.text.toString();if(line.source==="system"){self.state.lastSystemMessage={text:line.text,textType:line.textType,type:line.source};self.chatProvider.emit("systemMessage",self.state.lastSystemMessage)}else{if(line.source==="visitor"){line.source="client"}if(line.source==="client"&&self.state.pendingMessages.length){var thisWasPendingMessage=false;for(var j=0;j<self.state.pendingMessages.length;j++){if(self.state.pendingMessages[j].text===line.text){thisWasPendingMessage=true;self.state.pendingMessages.splice(j,1);break}}if(!self.state.pendingMessages.length){localStorage.removeItem("nr_lp_pending"+chatInstance.getSessionKey())}if(thisWasPendingMessage){continue}}self.state.currentChatLog.push({text:line.text,textType:line.textType,type:line.source,id:self.getUniqueId(),status:"sent"});if(line.source==="agent"&&chatInstance.getState()!=="resume"){self.chatProvider.emit("newMessage",self.state.currentChatLog[self.state.currentChatLog.length-1])}}}},onState:function(data){self.chatProvider.emit("_chatStateChanged",data.state);var knownState=true;switch(data.state){case"initialised":setTimeout(function(){if(self.state.pendingSessionRequests.length&&chatInstance.getState()==="initialised"){for(var i=0;i<self.state.pendingSessionRequests.length;i++){self.state.pendingSessionRequests[i](false)}self.state.pendingSessionRequests=[]}},500);knownState=false;break;case"resume":self.state.chatWasResumed=true;knownState=false;break;case"chatting":if(self.state.pendingMessages.length){for(var i=0;i<self.state.pendingMessages.length;i++){self.nrSendChatMessage(self.state.pendingMessages[i])}}if(self.state.pendingSessionRequests.length){for(var i=0;i<self.state.pendingSessionRequests.length;i++){self.state.pendingSessionRequests[i](true)}self.state.pendingSessionRequests=[]}self.state.userWasChatting=true;if(!self.state.initStateCalled){self.state.initStateCalled=true;self.chatProvider.emit("chatStateChanged","init")
}break;case"waiting":try{var pendingMessagesStrings=JSON.parse(localStorage.getItem("nr_lp_pending"+chatInstance.getSessionKey()));for(var k=0;k<pendingMessagesStrings.length;k++){self.state.pendingMessages.push({id:self.getUniqueId(),text:pendingMessagesStrings[k],textType:"plain",type:"client",status:"sending"})}}catch(e){}if(self.state.pendingMessages.length){for(var j=0;j<self.state.pendingMessages.length;j++){self.state.currentChatLog.push(self.state.pendingMessages[j])}}if(self.state.pendingCustomVariables){chatInstance.setCustomVariable(self.state.pendingCustomVariables)}if(!self.state.initStateCalled){self.state.initStateCalled=true;self.chatProvider.emit("chatStateChanged","init")}break;case"ended":self.state.chatWasResumed=false;if(self.state.pendingSessionRequests.length){for(var i=0;i<self.state.pendingSessionRequests.length;i++){self.state.pendingSessionRequests[i](false)}self.state.pendingSessionRequests=[]}if(!self.state.userWasChatting&&!self.state.userEndedChat){self.resetState();chatInstance.requestChat(self.chatProvider.agentFilter);return}if(self.state.userEndedChat){if(self.chatOptions.postChat){self.loadPostChatSurvey(function(error,surveyConfig){if(!error){self.chatProvider.emit("providerShowBlock",{"class":"nanoRep.SDK.Channeling.Chat.Providers."+Provider.Name+".ChatSurvey",config:surveyConfig,area:"overlay"})}})}else{self.chatProvider.emit("chatStateChanged","close")}}self.resetState();break;default:knownState=false}if(knownState){self.chatProvider.emit("chatStateChanged",data.state)}},onStart:function(){self.chatProvider.emit("chatStarted")},onAgentTyping:function(data){self.chatProvider.emit("agentTyping",data.agentTyping)},onAvailability:function(data){self.chatProvider.emit("agentAvailable",data)},onInfo:function(data){if(data.agentName&&self.getAgentName._callbackQueue){for(var i=0;i<self.getAgentName._callbackQueue.length;i++){self.getAgentName._callbackQueue[i](data.agentName)}delete self.getAgentName._callbackQueue}}})};var done=false;var se=document.createElement("script");se.type="text/javascript";
se.async=true;se.src="//server.iad.liveperson.net/hcp/html/lpChatV3.min.js?site="+self.chatOptions.accountNum;se.onload=se.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;apiLoadedHandler()}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(se,s)})},endChat:function(){this.getAPI(function(chatInstance){if(chatInstance.getState()==="ended"){this.chatProvider.emit("chatStateChanged","close")}else{this.state.userEndedChat=true;chatInstance.endChat()}})},resetState:function(){this.state={userEndedChat:false,userWasChatting:false,chatWasResumed:false,initStateCalled:false,lastSystemMessage:null,currentChatLog:[],pendingMessages:[],pendingSessionRequests:[],pendingCustomVariables:null}},getLastSystemMessage:function(){var systemMessage=this.state.lastSystemMessage;return systemMessage},getCurrentChatLog:function(){return this.state.currentChatLog},getAgentName:function(callback){this.getAPI(function(chatInstance){if(chatInstance.getState()==="waiting"){callback(null)}else{if(chatInstance.getAgentLoginName()){callback(chatInstance.getAgentLoginName())}else{this.getAgentName._callbackQueue=this.getAgentName._callbackQueue||[];this.getAgentName._callbackQueue.push(callback)}}})},setPendingCustomVariable:function(paramsObject){this.state.pendingCustomVariables=paramsObject},nrSendChatMessage:function(messageText,callback){var self=this;var message=(typeof messageText==="object"?messageText:{id:this.getUniqueId(),text:messageText,textType:"plain",type:"client",status:"sending"});if(callback){callback(message)}this.getAPI(function(chatInstance){chatInstance.addLine({text:message.text,success:function(){message.status="sent";self.chatProvider.emit("updateMessage",message)},error:function(){message.status="failed";self.chatProvider.emit("updateMessage",message)}})})},nrSendPendingChatMessage:function(messageText,callback){var message={id:this.getUniqueId(),text:messageText,textType:"plain",type:"client",status:"sending"};if(callback){callback(message)
}this.state.currentChatLog.push(message);this.state.pendingMessages.push(message);this.getAPI(function(chatInstance){var pendingMessagesStrings=[];for(var i=0;i<this.state.pendingMessages.length;i++){pendingMessagesStrings.push(this.state.pendingMessages[i].text)}localStorage.setItem("nr_lp_pending"+chatInstance.getSessionKey(),JSON.stringify(pendingMessagesStrings))})},loadPreChatSurvey:function(callback){var self=this;var patchedCallback=callback?function(){var args=Array.prototype.slice.call(arguments);LP.getAPI(function(chatInstance){if(chatInstance.getState()==="resume"){var tmpHandler=function(){self.chatProvider.off("_chatStateChanged",tmpHandler);callback.apply(self,args)};self.chatProvider.on("_chatStateChanged",tmpHandler)}else{callback.apply(self,args)}})}:null;this.useCallbackQueue(this.loadPreChatSurvey,patchedCallback,function(callback){var surveyOptions={success:function(data){data.survey.surveyType="pre";callback(false,data.survey)},error:function(error){callback(error)}};if(this.chatOptions.agentSkill){surveyOptions.skill=this.chatOptions.agentSkill}this.getAPI(function(chatInstance){chatInstance.getPreChatSurvey(surveyOptions)})})},loadPostChatSurvey:function(callback){this.useCallbackQueue(this.loadPostChatSurvey,callback,function(callback){this.getAPI(function(chatInstance){chatInstance.getExitSurvey({success:function(data){data.survey.surveyType="post";callback(false,data.survey)},error:function(error){callback(error)}})})})},useCallbackQueue:function(func,callback,funcBody){var self=this;if(func._resolvedArgs){if(callback){callback.apply(self,func._resolvedArgs)}}else{if(func._callbackQueue){if(callback){func._callbackQueue.push(callback)}}else{func._callbackQueue=func._callbackQueue||[];if(callback){func._callbackQueue.push(callback)}funcBody.call(self,function(){func._resolvedArgs=Array.prototype.slice.call(arguments);for(var i=0;i<func._callbackQueue.length;i++){func._callbackQueue[i].apply(self,arguments)}delete func._callbackQueue})}}},getUniqueId:function(){this.getUniqueId._uid=this.getUniqueId._uid||1;
return this.getUniqueId._uid++}}});this.Chat=modular.byName("Chat")}});nanoRep.BundleManager.define({name:"AlloyCom",require:[],data:{},ns:"Alloy",init:function(d,f,h){if(!this.version){var a={},g=[];this.version="0.41";this.runningMode=window.debugLevel||0;Alloy.Base=function c(){};Alloy.Base.polymorphismCtor=function(j,i){if(this.mBase!==null&&typeof(this.mBase.prototype.polymorphismCtor)==="function"){this.initBase.apply(this,i);this.mBase.prototype.polymorphismCtor(j,i)}if(this.ctor!==this.mBase.prototype.ctor){this.ctor.apply(j,i)}};Alloy.Base.extend=function(l){var j=function(){if(typeof(l)==="object"&&l.abstractClass&&this instanceof j){throw ("Trying to create an instance of an abstract class")}if(this.mBase!==null&&typeof(this.mBase.abstractClass)==="object"){for(var n in this.mBase.abstractClass){if(typeof(this[n])!=="function"){throw ("un-implemented abstract method: "+n)}}}this.polymorphismCtor(this,arguments);if(Alloy.runningMode>2){profiler.registerObjectCreation(this)}};for(var k in l){switch(k){case"name":case"prototype":case"abstractClass":continue}j[k]=l[k]}for(var k in this.prototype){j.prototype[k]=this.prototype[k]}if(l._prototype){for(var k in l._prototype){j.prototype[k]=l._prototype[k]}}if(typeof(l)==="object"&&l.abstractClass){j.abstractClass={}}j.prototype.polymorphismCtor=Alloy.Base.polymorphismCtor;j.extend=this.extend;j.prototype.mBase=this;if(typeof(l)!=="object"||typeof(l.name)!=="string"){throw ("Class name is missing (ctorObject.name)")}var i=l.name.replace(/^\s+|\s+$/g,"");if(!i){throw ("Invalid class name")}j.prototype.__className__=j.__className__=i;return j};Alloy.Base.__className__="Base Class";Alloy.Base.prototype.__className__="Base Class";Alloy.Base.prototype.mBase=null;Alloy.Base.prototype.mIsDisposed=false;Alloy.Base.prototype.ctor=function(){};Alloy.Base.prototype.dtor=function(){delete this.mBase};Alloy.Base.prototype.initBase=function(){};Alloy.Base.prototype.isDisposed=function(){return this.mIsDisposed};Alloy.Base.prototype.executeBaseMethod=function(j,i){if(!this.mBase){throw ("Alloy.Base.prototype.executeBaseMethod: no base!")
}this.mBase.prototype[j].apply(this,i||[])};Alloy.Base.prototype.dispose=function(){if(this.mIsDisposed){return false}this.mIsDisposed=true;var j=this.dtor;var k=this.dtor.apply(this,arguments);if(k===false){this.mIsDisposed=false;return false}if(Alloy.runningMode>2){profiler.registerObjectDisposal(this)}var i=this.mBase;while(i!==null){if(i.prototype.dtor!==j){i.prototype.dtor.apply(this,arguments);j=i.prototype.dtor}i=i.prototype.mBase}this.__dispose__();return true};Alloy.Base.prototype.__dispose__=function(){for(var l in this){try{switch(l){case"mBase":case"__dispose__":case"polymorphismCtor":case"extend":case"__className__":continue;break}if(typeof(this[l])==="undefined"||this[l]===null){continue}if(typeof(this[l])!=="function"&&typeof(this[l])!=="object"){continue}if(typeof(this[l].dispose)==="function"){this[l].dispose()}if(this[l] instanceof Array){for(var m in this[l]){if(this[l][m]&&typeof(this[l][m].dispose)==="function"){this[l][m].dispose()}}}delete this[l]}catch(k){if(Alloy.runningMode>1){alert("base::__dispose__: error disposing:"+l+". "+k.message)}}}};Alloy.Base.prototype.isDerivedOf=function(i,k){k=k===true;if(k&&this.__className__===i.__className__){return false}if(this.__className__===i.__className__){return true}var l=false;var j=this.mBase;while(j!==null&&!l){if(i.__className__===j.__className__){l=true}j=j.prototype.mBase}return l};Alloy.Base.isDerivedOf=function(i,j){if(i===null){return false}if(typeof(i)!=="object"||typeof(i.isDerivedOf)!=="function"){return false}return i.isDerivedOf(j)};a.Com=Alloy.Com={SUCCESS:200,FAIL:400,TIMEOUT:500,enumMethod:{GET:"GET",POST:"POST"},cbId:new Date().getTime()%1000,prepareQueryStringParameters:function(k){var j={};for(var i in k){switch(Object.prototype.toString.call(k[i])){case"[object Function]":break;case"[object Date]":case"[object Array]":case"[object Object]":j[i]=JSON.stringify(k[i]);break;default:j[i]=k[i]}}return j}};Alloy.ajax=function(i){return new Promise(function(m,l){var r=null;if(typeof(XMLHttpRequest)==="function"||typeof(XMLHttpRequest)==="object"){r=new XMLHttpRequest()
}else{throw"Cannot create ajax object"}if(i.method==a.Com.enumMethod.GET&&i.data){i.url+="?"+i.data}r.open(i.method,i.url,true);if(i.headers){for(var j in i.headers){r.setRequestHeader(j,i.headers[j])}}if(i.withCredentials){r.withCredentials=true}r.onreadystatechange=function(){switch(this.readyState){case 4:k(a.Com.SUCCESS);break}};r.onerror=function(){k(a.Com.FAIL)};r.onload=function(){k(a.Com.SUCCESS)};var k=function(u){if(!o){return}clearTimeout(q);o=false;var w=-1;try{w=r.status;if(!w){w=-1;p=true}}catch(s){if(p){w=-1}else{w=400}}var v=r.responseText||"";switch(w){case 200:u=a.Com.SUCCESS;break;case 400:case 403:case 404:u=a.Com.FAIL;break;default:if(p){u=a.Com.TIMEOUT}else{u=a.Com.FAIL}break}if(i.handler){i.handler(u,v,r)}var t;var n=r.getResponseHeader("Content-Type");if(n==="application/json"||n==="application/json;charset=utf-8"){try{t=JSON.parse(r.responseText)}catch(s){setTimeout(function(){throw new Error("Incorrect JSON response")});l({status:u,text:v,xhr:r})}}if(u===a.Com.SUCCESS){m({status:u,text:v,response:t,xhr:r})}else{l({status:u,text:v,response:t,xhr:r})}};var q=setTimeout(function(){if(!o){return}p=true;r.abort();if(o){k(a.Com.TIMEOUT)}},(i.timeout||10000));var o=true;var p=false;if(i.method===a.Com.enumMethod.POST){r.send(i.data)}else{r.send(null)}})};var b={};Alloy.jsonp=function(k){var j="_jspcb"+(Alloy.Com.cbId++);if(k.cb){j=k.cb}if(b[j]){var i=b[j];var n=i.parentNode;if(n){n.removeChild(i)}}window[j]=function(s){clearTimeout(q);if(Alloy.Base.isDerivedOf(k.handler,Alloy.Handler)){k.handler.handle(a.Com.SUCCESS,s,k)}else{k.handler(a.Com.SUCCESS,s,k)}try{delete window[j]}catch(r){window[j]=undefined}var t=i.parentNode;if(t){t.removeChild(i)}delete b[j];if(typeof(k.repeat)==="number"&&k.repeat){setTimeout(function(){k.repeat=0;Alloy.jsonp(k)},k.repeat)}else{if(k.handler.dispose){k.handler.dispose()}}};var o=[];o.push(k.url);if(k.url.contains("?")){o.push("&")}else{o.push("?")}o.push(k.callback_arg||"cb");o.push("=");o.push(j);if(k.params){for(var l in k.params){if(k.params[l]==null){continue}if(Object.prototype.toString.call(k.params[l])==="[object Object]"){for(var m in k.params[l]){if(k.params[l][m]==null){continue
}o.push("&");o.push(encodeURIComponent(l));o.push("[");o.push(encodeURIComponent(m));o.push("]=");o.push(encodeURIComponent(k.params[l][m]))}}else{o.push("&");o.push(encodeURIComponent(l));o.push("=");o.push(encodeURIComponent(k.params[l]))}}}var i=document.createElement("script");i.type="text/javascript";i.async=true;i.defer=true;i.src=o.join("");i.onload=function(){clearTimeout(q)};i.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}clearTimeout(q)};b[j]=i;document.getElementsByTagName("head")[0].appendChild(i);var p=function(){var r=i.parentNode;if(r){r.removeChild(i)}delete b[j];window[j]=function(){};if(Alloy.Base.isDerivedOf(k.handler,Alloy.Handler)){k.handler.handle(a.Com.TIMEOUT,null,k)}else{k.handler(a.Com.TIMEOUT,null,k)}if(typeof(k.repeat)==="number"&&k.repeat){setTimeout(function(){k.repeat=0;Alloy.jsonp(k)},k.repeat)}else{if(k.handler.dispose){k.handler.dispose()}}};var q=setTimeout(p,k.timeout||10000)};Alloy.inject=function(j,i){j.apply(i||window,[a])}}}});ISQ.Widget.preventOuterScroll=function(d){var a=function(f){if(!window.nanorepScrollLocked){return true}f.preventDefault();f.stopPropagation();return false};var c=function(){window.nanorepScrollLocked=true};var b=function(){window.nanorepScrollLocked=false};window.nanorepScrollLocked=false;if(ISQ.Http.browser.app!="ff"){window.addEvents(window,"onmousewheel",a)}window.addEvents(d,"onmouseenter",c);window.addEvents(d,"onmouseleave",b)};ISQ.Widget.appendConfigurationsToIframeSource=function(a,b){a.push("#account=");a.push(b.account);if(b.kb){a.push("&kb=");a.push(b.kb)}if(b.splitTestGroup){a.push("&splittestgroup=");a.push(b.splitTestGroup)}if(b.preview){a.push("&preview=true")}a.push("&doctype=");a.push(ISQ.Widget.doctype);a.push("&refencoded=true&referer=");a.push(ISQ.Http.Cookies.encode64(b.referer));if(!ISQ.Widget.supportsPostMessage&&b.cdcFrame){a.push("&cdcFrame=");a.push(ISQ.Widget.getInnerFrameUrl(b.cdcFrame,window.location.href));a.push("&cdcversion=");a.push(b.cdcVersion)}if(ISQ.Widget.supportsPostMessage){a.push("&cnf=true")
}if(b.pageId){a.push("&pageId=");a.push(b.pageId)}if(b.searchDelay){a.push("&searchDelay=");a.push(b.searchDelay)}if(b.naive){a.push("&naive=");a.push(b.naive)}a.push("&reportEvents=true");if(b.debug){a.push("&debug=isq")}ISQ.Widget.appendCustomValuesToStringBuilder(a,b.customValues)};ISQ.Widget.appendCustomValuesToStringBuilder=function(c,a){if(!a){return}var d;for(var b in a){d=typeof(a[b]);if(d==="function"||d==="object"){continue}c.push("&");c.push(b);c.push("=");if(d==="string"){if(b==="onloadQuestionId"||b==="languageCode"||b=="configId"){c.push(a[b])}else{c.push(ISQ.Http.Cookies.encode64(a[b]))}}else{c.push(a[b])}}};ISQ.Widget.downloadAndSendCNF=function(c){if(!ISQ.Widget.CNFStatus){ISQ.Widget.CNFStatus=[]}var b=ISQ.Widget.CNFStatus[c.id]={downloaded:false,waitingForDownload:false};if(!window._nRepData.eCNFLoaded){window._nRepData.eCNFLoaded=new ISQ.Event()}if(c.useExistingCNF&&((c.id==="float"&&typeof(ISQ.Cnf_Float)==="object")||(c.id==="embed"&&typeof(ISQ.Cnf_Embed)==="object"))){if(!ISQ.Widget.supportsPostMessage){return false}ISQ.Widget.cnfLoaded(c);c.useExistingCNF=false;b.downloaded=true;return true}var a=function(){var d=null;if(c.type==="float"){d=ISQ.Cnf_Float}else{if(c.type==="embed"){d=ISQ.Cnf_Embed}}if(d.controlGroup){ISQ.Widget.handleEventMessage({type:"notLoad",reason:"conversion control group"},c);return}if(ISQ.Widget.getCustomHost()){d.customServerHost=ISQ.Widget.getCustomHost()}else{c.dynamicHost="//"+d.serverUrl}ISQ.Widget.cnfLoaded(c);if(!ISQ.Widget.supportsPostMessage){return}b.downloaded=true;if(!b.waitingForDownload){return}if(c.type==="float"){ISQ.Widget.sendCNFData(ISQ.Cnf_Float,c)}else{ISQ.Widget.sendCNFData(ISQ.Cnf_Embed,c)}};ISQ.Tools.Parallel.waitForAll([function(d){ISQ.Widget.downloadCnf(c,d)},function(d){ISQ.Widget.UVT.syncToken(c.account,d)}],a);return ISQ.Widget.supportsPostMessage};ISQ.Widget.cnfLoaded=function(widgetData){var cnf=null;if(widgetData.type==="float"){cnf=ISQ.Cnf_Float}else{cnf=ISQ.Cnf_Embed}if(!cnf){return}var chatConfig=eval("("+cnf.chatConfiguration+")");if(chatConfig.active==="LP"){if(typeof(lpMTagConfig)!="undefined"&&typeof(lpMTagConfig.LPSID_VAR)!="undefined"){chatConfig.LP.visitorId=lpMTagConfig.LPSID_VAR;
cnf.chatConfiguration=ISQ.Data.jsonToString(chatConfig)}else{var lptagInterval=setInterval(function(){if(typeof(lpMTagConfig)!="undefined"&&typeof(lpMTagConfig.LPSID_VAR)!="undefined"){stringBuilder=[];stringBuilder.push("subject=visitorId&data=");stringBuilder.push(lpMTagConfig.LPSID_VAR);widgetData.cdcUser.sendMessage(stringBuilder.join(""));clearInterval(lptagInterval)}},500)}}window._nRepData.eCNFLoaded.dispatch(widgetData.id);if(widgetData.eCnfLoaded){widgetData.eCnfLoaded()}ISQ.Widget.loadGuidance(widgetData,cnf)};ISQ.Widget.loadGuidance=function(d,a){if(!a.hasGuides){return}window.guidanceAccount=d.account;window.serverUrl=ISQ.Widget.getAccountURL(d.account);(function(){var f=document.createElement("script");f.type="text/javascript";f.src=(d.dynamicHost.indexOf("//")===0?"":"//")+d.dynamicHost+"/guidanceEditor/viewer.js?cv=8D744A3B6CD4B40";document.getElementsByTagName("head")[0].appendChild(f)})();if(!window.GuidanceAPI){window.GuidanceAPI={}}window.GuidanceAPI.allGuidesWithoutSteps=a.guides;var b=function(g){if(!d.cnfDataSent){setTimeout(function(){b(g)},100);return}var f=[];f.push("subject=guidesOptions&data=");var j=[];for(var h=0;h<g.length;h++){if(g[h].options.triggerAt.search&&!g[h].isStopped){j.push(g[h].id+":true")}else{j.push(g[h].id+":false")}}f.push(j.join("|"));d.cdcUser.sendMessage(f.join(""))};if(GuidanceAPI.loadedGuides){b(GuidanceAPI.loadedGuides);return}var c=GuidanceAPI.onload;GuidanceAPI.onload=function(f){b(f);if(c){c(f)}}};ISQ.Widget.downloadCnf=function(f,a){var c=null;if(f.preview){c=escape(f.referer)}else{if(f.customValues&&f.customValues.configId){c="!"+f.customValues.configId}}var b=f.type==="float";var d=ISQ.Widget.buildCNFSource(f.account,b,f.kb,c,f.preview,f.splitTestGroup);Alloy.jsonp({url:d,handler:function(h,g){if(b){ISQ.Cnf_Float=g}else{ISQ.Cnf_Embed=g}a()}});return true};ISQ.Widget.sendCNFData=function(cnfObject,widgetData){var cnfStatusObject=ISQ.Widget.CNFStatus[widgetData.id];cnfStatusObject.waitingForDownload=true;if(!cnfStatusObject.downloaded){return}if(typeof(cnfObject.chatProviders)!="undefined"){eval(cnfObject.chatProviders)
}var amount=1800;var internalSend=function(substring_,finished){stringBuilder=[];stringBuilder.push("subject=cnf&data=");stringBuilder.push(substring_);if(finished){stringBuilder.push("&finished=true")}widgetData.cdcUser.sendMessage(stringBuilder.join(""))};var str=ISQ.Data.jsonToString(cnfObject);str=ISQ.Http.Cookies.encode64(str);var ndxStart=0;if(amount<str.length){while(ndxStart<str.length){if(ndxStart+amount>str.length){amount=str.length-ndxStart}internalSend(str.substr(ndxStart,amount));ndxStart+=amount}internalSend("",true)}else{internalSend(str,true)}if(widgetData.eAfterCnfSent){widgetData.eAfterCnfSent()}widgetData.cnfDataSent=true};ISQ.Widget.sendingMessagesToWidget=function(a){return ISQ.Widget.supportsPostMessage||a.formValues instanceof Array||typeof(a.context)==="object"||typeof(a.customParams)==="object"};ISQ.Widget.initCDC=function(g,c,a){a=a||{};var f=ISQ.Widget.getAccountDomain(g.account,a.serverUrl);if(ISQ.Widget.supportsPostMessage){g.cdcVersion=3}else{if(!g.cdcVersion){g.cdcVersion=0}}var d=ISQ.Widget.sendingMessagesToWidget(g);g.cdcUser=null;switch(g.cdcVersion){case 0:case 1:case 2:if(g.cdcVersion!==0){ISQ.Widget.cdcMessageEvent.addHandler(c,g)}if(d){g.cdcUser=new ISQ.CDC.User({targetWindowName:g.iframe.id,proxyIFrameUrl:f+"/common/cdc/cdc.html",server:f})}break;case 3:var b={allowMessagesFrom:g.staticHost.indexOf("//cdn-")>-1?g.staticHost:window.location.protocol+f,widget:g.type};if(d){b.server=f;b.targetWindowName=g.iframe.id;b.proxyIFrameUrl=f+"/common/cdc/cdc.html"}g.cdcUser=new ISQ.CDC.User(b);g.cdcUser.incomingMessageEvent.addHandler(c,g);break}};ISQ.Widget.APIKeyEndDelimiter="<";ISQ.Widget.APIValueEndDelimiter="(";ISQ.Widget.sendAPItoWidget=function(n){var j=ISQ.Widget.sendingMessagesToWidget(n);if(!n.cdcUser||!j){return}var k=[];k.push("subject=api");var d=n.formValues;if((d instanceof Array)&&d.length!==0){k.push("&form=");var g,m,l;for(var f=0;f<d.length;++f){var c=d[f];if(!(c instanceof Array)||c.length<2){continue}if(c.length===2){g=c[0];m=c[1];l=null}else{g=c[1];l=c[0];m=c[2]}if(f!==0){k.push(ISQ.Widget.APIKeyEndDelimiter)
}k.push(ISQ.Http.Cookies.encode64(g));k.push(ISQ.Widget.APIValueEndDelimiter);k.push(ISQ.Http.Cookies.encode64(m));if(l){k.push(ISQ.Widget.APIValueEndDelimiter);k.push(ISQ.Http.Cookies.encode64(l))}}}var a=n.context;if(typeof(a)==="object"){k.push("&context=");ISQ.Widget.CDC_appendKeyValueToMessage(a,k)}var b=n.customParams;if(typeof(b)==="object"){k.push("&customparams=");ISQ.Widget.CDC_appendKeyValueToMessage(b,k)}var h=n.searchByLabels;if(h instanceof Array){k.push("&searchbylabels=");k.push(ISQ.Http.Cookies.encode64(h.join(",")))}n.cdcUser.sendMessage(k.join(""))};ISQ.Widget.fixStealFocus=function(c){if(!c.iframe){return}var b=c.setFocus;if(!b){return}b=ISQ.Html._(b);if(!b){return}var a=function(){try{b.focus()}catch(d){}};if(window.attachEvent){c.iframe.attachEvent("onload",a)}else{if(window.addEventListener){c.iframe.addEventListener("load",a,true)}}};ISQ.Widget.resizeIframeOnLoad_IE=function(c,d,a,b){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){return false}if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7){if(document.readyState==="complete"){return false}if(!c.registeredOnload){c.registeredOnload=true;window.attachEvent("onload",function(){b(c,parseInt(d),parseInt(a)+1)})}return true}else{if(document.readyState!=="complete"||window!=window.top){b(c,parseInt(d),parseInt(a)+1);c.cdcUser.sendMessage("subject=refreshSize");return true}else{return false}}};ISQ.Widget.incomingCDCMessageOrginizer=null;ISQ.Widget.incomingCDCMessage=function(f){if(f.charAt(0)==="?"){f=f.substr(1)}var g=ISQ.Tools.stringToPairArray(f,"=","&",true,false);if(!ISQ.Widget.incomingCDCMessageOrginizer){ISQ.Widget.incomingCDCMessageOrginizer=[]}var a=ISQ.Widget.incomingCDCMessageOrginizer[g.widget];if(!a){a=ISQ.Widget.incomingCDCMessageOrginizer[g.widget]={};a.lastHandledOrdinal=0;a.pendingMessages=null}if(g.subject&&g.subject=="reset"){a.lastHandledOrdinal=0;a.pendingMessages=null}var k=parseInt(g.ord);var b=k-a.lastHandledOrdinal;if(b<=0){return}if(b>1){if(a.pendingMessages===null){a.pendingMessages=[];a.pendingMessagesCount=0
}a.pendingMessages[k]=g;++a.pendingMessagesCount}else{try{ISQ.Widget.cdcMessageEvent.dispatch(g)}catch(c){}if(a.pendingMessages!==null){var j=a.pendingMessagesCount;var h=k+1;for(var d=0;d<j;++d,++h){if(!a.pendingMessages[h]){break}ISQ.Widget.cdcMessageEvent.dispatch(a.pendingMessages[h]);k=h;--a.pendingMessagesCount}if(a.pendingMessagesCount===0){a.pendingMessages=null}}a.lastHandledOrdinal=k}};if(!ISQ.Widget.cdcMessageEvent){ISQ.Widget.cdcMessageEvent=new ISQ.Event()}if(!ISQ.Widget.incomingCustomCDCMessage){ISQ.Widget.incomingCustomCDCMessage=new ISQ.Event()}ISQ.Widget.APIProxyHandler=(function(){var a=function(c,b,j){var f=c.split("."),g=window,h=null;for(var d=0;d<f.length;d++){h=f[d];if(d===0&&f[d]==="window"){continue}if(d<f.length-1){g=g[h]}}var k=function(i){return function(){var l=[];for(var m=0;m<arguments.length;m++){l[m]=JSON.parse(JSON.stringify(arguments[m]))}var n={type:"APIProxy",funcId:i,args:l};j.cdcUser.sendMessage("subject=apiproxy&data="+ISQ.Tools.Base64.encodeString(ISQ.Data.jsonToString(n)))}};for(var d=0;d<b.length;d++){if(typeof b[d]==="string"&&b[d].indexOf("_funcId")===0){b[d]=k(b[d])}}g[h].apply(g,b)};return function(b,c){a(b.func,b.args,c)}}());if(window._nRepData&&window._nRepData.onApiProxyReady){try{window._nRepData.onApiProxyReady()}catch(e){if(window.console&&window.console.log){window.console.log("API Proxy error:",e)}}}ISQ.Widget.handleCommonCDCMessage=function(messageArgs,widgetData){switch(messageArgs.subject){case"cnf":if(widgetData.id==="float"){ISQ.Widget.sendCNFData(ISQ.Cnf_Float,widgetData)}else{ISQ.Widget.sendCNFData(ISQ.Cnf_Embed,widgetData)}break;case"apiproxy":ISQ.Widget.APIProxyHandler(ISQ.Data.parseJson(ISQ.Tools.Base64.decodeString(messageArgs.data)),widgetData);break;case"event":ISQ.Widget.handleEventMessage(messageArgs,widgetData);break;case"pagescript":ISQ.API.runPageScript(messageArgs.data,true);break;case"chatResumeRequest":if(_nRepData.chatInResume){ISQ.Widget.preventChatResuming(widgetData);break}if(!_nRepData.chatInResume){_nRepData.chatInResume=true}ISQ.Widget.aboutToResumeChat(widgetData);
break;case"chatEnded":_nRepData.chatInResume=false;break;case"loadChat":case"startCustomChat":var loadCustomChat=function(){var config=eval("("+messageArgs.config+")");switch(config.active){case"LiveChatInc":ISQ.Widget.Proxy.Chat.LiveChatInc.start(messageArgs.subject,config,widgetData);break;case"Zopim":ISQ.Widget.Proxy.Chat.Zopim.start(messageArgs.subject,config,widgetData);break;case"Olark":ISQ.Widget.Proxy.Chat.Olark.start(messageArgs.subject,config,widgetData);break;case"SalesForce":ISQ.Widget.Proxy.Chat.SalesForce.start(messageArgs.subject,config,widgetData);break;case"SnapEngage":ISQ.Widget.Proxy.Chat.SnapEngage.start(messageArgs.subject,config,widgetData);break;case"LiveEngage":ISQ.Widget.Proxy.Chat.LiveEngage.start(messageArgs.subject,config,widgetData);break}};if(!isNSexists("ISQ.Widget.Proxy.Chat")){ISQ.Tools.appendScript("/widget/scripts/chatProviders.js",new ISQ.Handler(loadCustomChat))}else{loadCustomChat()}break;case"hideWidget":(_nRepData["float"]||_nRepData.embed).container.style.margin="-9999px";break;case"showWidget":(_nRepData["float"]||_nRepData.embed).container.style.margin="";break;default:ISQ.Widget.incomingCustomCDCMessage.dispatch(messageArgs,widgetData);break}};ISQ.Widget.aboutToResumeChat=function(a){a.cdcUser.sendMessage("subject=chatResumeApproved")};ISQ.Widget.preventChatResuming=function(a){a.cdcUser.sendMessage("subject=preventChatResuming")};ISQ.Widget.createMobileBlockerLink=function(g,c,h,d){if(!ISQ.Http.browser.isMobile){return}var b=g.mobileBlockerLink=document.createElement("a");b.className="nR_noRemove";b.style.cssText="display:block;width: "+h+";height:"+g.height+"px;position:relative;left:0px;top:-"+g.height+"px;z-index:1001;background:transparent;";c.appendChild(b);b.href=g.iframe.src;b.target="_blank";b.onclick=function(a){if(g.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk){this.style.display="none";var i=document.elementFromPoint(a.clientX,a.clientY);while(i!=null&&i!==g.backImgDiv&&i!==document.body){i=i.parentNode}this.style.display="block";if(i==g.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk&&ISQ.Cnf_Float.floatBackImageAsk>0){var j=this.href;
if(!this.hrefLength){this.hrefLength=j.length}if(j.contains("#")){j+="&onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}else{j+="#onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}this.href=j}else{if(this.hrefLength&&this.href.length!=this.hrefLength){this.href=this.href.substring(0,this.hrefLength)}}}g.cdcUser.sendMessage("subject=mobileOpenNewWindow")};var f=_("ozen");if(g.id==="float"&&f&&f.nodeName==="A"){f.href=g.iframe.src;f.target="_blank";f.onclick=function(a){if(g.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk){this.style.display="none";var i=document.elementFromPoint(a.clientX,a.clientY);while(i!=null&&i!==g.backImgDiv&&i!==document.body){i=i.parentNode}this.style.display="block";if(i==g.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk&&ISQ.Cnf_Float.floatBackImageAsk>0){var j=this.href;if(!this.hrefLength){this.hrefLength=j.length}if(j.contains("#")){j+="&onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}else{j+="#onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}this.href=j}else{if(this.hrefLength&&this.href.length!=this.hrefLength){this.href=this.href.substring(0,this.hrefLength)}}}g.cdcUser.sendMessage("subject=mobileOpenNewWindow")}}};ISQ.Widget.Mobile={};ISQ.Widget.Mobile.resizeStart=function(){if(!ISQ.Http.browser.isMobile||ISQ.Http.browser.oldAndroid){return}if(!ISQ.Widget.Mobile.resizeInterval){ISQ.Widget.Mobile.resizeInterval=setInterval(ISQ.Widget.Mobile.resizeTimerElapsed,200)}window.addEventListener("orientationchange",ISQ.Widget.Mobile.orientationChanged)};ISQ.Widget.Mobile.resizeStop=function(){if(ISQ.Widget.Mobile.resizeInterval){clearInterval(ISQ.Widget.Mobile.resizeInterval)}ISQ.Widget.Mobile.resizeInterval=null;window.removeEventListener("orientationchange",ISQ.Widget.Mobile.orientationChanged)};ISQ.Widget.Mobile.resizeTimerElapsed=function(){if(!ISQ.Cnf_Float){return}var b=ISQ.Widget.Mobile.sizerDiv;if(!b){b=createDiv(document.body);b.style.cssText="width:0; height:0; position:fixed; bottom:0;right:0;";ISQ.Widget.Mobile.sizerDiv=b}if(b.offsetLeft!=ISQ.Widget.Mobile.oldViewportWidth||ISQ.Widget.Mobile.forceNextAction){if(ISQ.Cnf_Embed){ISQ.Widget.Mobile.forceNextAction=ISQ.Embed.Mobile.resizeAction(b.offsetLeft,b.offsetTop)
}ISQ.Widget.Mobile.oldViewportWidth=b.offsetLeft;var a=ISQ.Cnf_Float||ISQ.Cnf_Embed;if(!a.mobileWidgetEnabled){return}if(ISQ.Cnf_Float&&ISQ.Cnf_Float.mobileResponsive){return}if(ISQ.Cnf_Embed&&ISQ.Cnf_Embed.mobileResponsive&&ISQ.Embed.Mobile.isMobileOptimized()){return}ISQ.Widget.Mobile.forceNextAction|=ISQ.Widget.Mobile.resizeAction(b.offsetLeft,b.offsetTop)}};ISQ.Widget.Mobile.orientationChanged=function(){ISQ.Widget.Mobile.oldViewportWidth=null};ISQ.Widget.Mobile.resizeAction=function(b,a){if(_nRepData["float"]&&!_nRepData["float"].widgetLoaded){return true}if(!ISQ.Widget.Mobile.teaser){if(ISQ.Widget.Mobile.buildTeaserElement(b,a)){ISQ.Widget.Mobile.teaser.scale(b,a)}return false}if(ISQ.Widget.Mobile.timer){clearTimeout(ISQ.Widget.Mobile.timer)}ISQ.Widget.Mobile.teaser.style.display="none";ISQ.Widget.Mobile.timer=setTimeout(function(){ISQ.Widget.Mobile.teaser.scale(b,a)},200);return false};ISQ.Widget.Mobile.buildTeaserElement=function(j,i){if(ISQ.Widget.isMobileWidget){return}var k=_nRepData["float"]||_nRepData.embed;var a=ISQ.Cnf_Float||ISQ.Cnf_Embed;var b=_nRepData["float"]&&_nRepData["float"].dockMethod==nanoRep.Float.enumDockMethod.RIGHT;var h=ISQ.Widget.Mobile.teaser=createDiv(document.body);h.style.cssText="visibility:hidden; text-align:center; width:100%; bottom:0; z-index:1000; font-family:Arial;";h.style.color=a.titleColor||"#FFF";h.style.backgroundColor=a.titleBGColor||"#009FD4";h.style.position="fixed";if(ISQ.Tools.isLanguageRTL(a.kbLanguageCode)){h.style.direction="rtl"}h.heightRatio_portrait=1/18;h.heightRatio_landscape=1/9;h.fontRatio=0.8;var f=i>j?h.heightRatio_portrait:h.heightRatio_landscape;var d=i*f;var c=Math.floor(d*h.fontRatio)+"px";h.style.height=Math.ceil(d)+"px";h.style.lineHeight=Math.ceil(d)+"px";h.style.fontSize=c;h.style.bottom=-1*Math.ceil(d/3)+"px";var g=createElement("span",h);g.style.cssText="text-overflow:nowrap; font-size: inherit; color: inherit;";g.innerHTML=a.titleTeaserText;h.textSpan=g;h.onclick=function(){ISQ.Widget.Mobile.openWidgetInNewWindow(k)};h.widthRatio=d/(g.offsetWidth*1.15);
h.leftRatio=1/5;h.paddingRatio=1/9;h.borderRatio=1/5;h.scale=function(q,p){var n=p>q?this.heightRatio_portrait:this.heightRatio_landscape;var m=p*n;var r=m/this.widthRatio;this.style.width=Math.ceil(r)+"px";this.style.height=this.style.lineHeight=Math.ceil(m)+"px";var o=Math.ceil(m*this.leftRatio)+"px";if(!b){this.style.left=o}else{this.style.right=o}this.style.letterSpacing=r>350?"-2px":r>150?"-1px":"";this.style.fontSize=Math.floor(m*this.fontRatio)+"px";var l=Math.ceil(m*this.borderRatio);this.style.borderRadius=l+"px "+l+"px 0 0";this.style.visibility="visible";this.style.display="block"};nanoRep.Widget.PositionAnimator.setBottom(h,0);nanoRep.Widget.PositionAnimator.start();return h};ISQ.Widget.Mobile.openWidgetInNewWindow=function(a){a.cdcUser.sendMessage("subject=mobileOpenNewWindow");window.open(a.iframe.src)};ISQ.Widget.Mobile.forceNextAction=false;ISQ.Widget.applyContextFromCookie=function(d){var a=ISQ.Http.Cookies._read("nrContext2");if(!a){return}var b=a.split(",");if(!d.context){d.context={}}for(var c=0;c<b.length;c+=2){if(d.context[b[c]]){continue}d.context[b[c]]=b[c+1]}};ISQ.Widget.applyContextToCookie=function(a){var b=[];for(key in a){b.push(key);b.push(",");b.push(a[key]);b.push(",")}b.splice(b.length-1,1);var c=b.join("");ISQ.Http.Cookies._write("nrContext2",c,"/",ISQ.Http.domain(),false,(24*60*60*30),true)};ISQ.API.init=function(a){ISQ.API.defaultWidgetData=a};ISQ.API.getWidgetData=function(a){var b=null;if(a){b=_nRepData[a]}return b||ISQ.API.defaultWidgetData};ISQ.API.openContactForm=function(a){var b=ISQ.API.getWidgetData(a);if(!b||!b.cdcUser){return}if(b.id=="float"){if(ISQ.Http.browser.isMobile){return}}else{if(ISQ.Http.browser.oldAndroid){return}}b.cdcUser.sendMessage("subject=openContactForm")};ISQ.API.startChat=function(a,b){var d=ISQ.API.getWidgetData(b);if(!d||!d.cdcUser){return}if(d.id=="float"){if(ISQ.Http.browser.isMobile){return}nanoRep.Float.changeState(nanoRep.Float.enumStates.expand)}else{if(ISQ.Http.browser.oldAndroid){return}}if(d.autoMinimizeTimer){clearTimeout(d.autoMinimizeTimer)
}var c="subject=startChat";if(a){c+="&countStatsOnly=true"}d.cdcUser.sendMessage(c)};ISQ.API.customizeWidget=function(a,b){if(typeof(a)!="object"){return}var d=ISQ.API.getWidgetData(b);if(!d||!d.cdcUser){return}var c="subject=customize";if(a.bgcolor){c+="&bgcolor="+a.bgcolor}if(a.title){c+="&title="+a.title}d.cdcUser.sendMessage(c)};ISQ.API.ask=function(b,a){if(!b){b=""}var c=ISQ.API.getWidgetData(a);if(!c||!c.cdcUser){return}c.cdcUser.sendMessage("subject=ask&question="+b)};ISQ.API.askById=function(c,a,d){if(!c){return}var f=ISQ.API.getWidgetData(a);if(!f||!f.cdcUser){return}var b="subject=askById&questionid="+c;if(d){b+="&sender="+d}f.cdcUser.sendMessage(b)};ISQ.API.importCustomParams=function(b){if(b.table){b.customParams=ISQ.API.getCustomParamsFromTable(b)}else{if(b.ul){b.customParams=ISQ.API.getCustomParamsFromUl(b)}}if(!b.customParams){return}var a=function(f){var c=f?window._nRepData[f]:_nRepData;if(!c){return}if(!c.customParams){c.customParams=b.customParams}else{for(var d in b.customParams){if(c.customParams[d]){continue}c.customParams[d]=b.customParams[d]}}};a("");if(b.widget){a(b.widget)}else{a("float");a("embed")}};ISQ.API.getCustomParamsFromTable=function(g){if(!g.table){return}var l=window._(g.table);if(!l){return}var b=[];var q=l.getElementsByTagName("TR");var n,o,c=false,h,j,f;var a=-1;var k="";for(var p=0;p<q.length;++p){k="noText";h=j="";n=[];o=q[p].getElementsByTagName("TH");for(var d=0;d<o.length;++d){n.push(o[d])}o=q[p].getElementsByTagName("TD");for(var d=0;d<o.length;++d){n.push(o[d])}a++;for(var m=0;m<n.length;++m){f=n[m].innerText||n[m].textContent;if(!f){continue}f=f.Trim();k="hasText";if(g.skipRows&&ISQ.Data.indexOfArray(g.skipRows,a)!==-1){k="skip";break}else{if(!h){h=f}else{if(!j){j=f;break}}}}if(k==="noText"){--a;continue}if(k==="skip"){continue}if(!h||!j){continue}b[h]=j}return b};ISQ.API.getCustomParamsFromUl=function(g){if(!g.ul){return}var l=window._(g.ul);if(!l){return}var f=l.getElementsByTagName("LI");var a=[];var c,h,k="";for(var b=0;b<f.length;++b){h=k="";for(var d=0;d<f[b].children.length;
++d){if(f[b].children[d].localName=="small"){h=f[b].children[d].innerHTML.replace(/:/g,"").Trim()}else{if(f[b].children[d].localName=="b"){k=f[b].children[d].innerHTML.Trim()}}}if(!h||!k){return}a[h]=k}return a};ISQ.API.runPageScript=function(script,encoded){if(!script){return}try{if(encoded){eval(ISQ.Tools.Base64.decodeString(script))}else{eval(script)}}catch(e){}};ISQ.Widget=ISQ.Widget||{};ISQ.Widget.parseCustomParams=function(g){var f={},d,b,c;g=g.split(",");function a(h){return h.replace(/(\\\\|\\colon|\\comma)/g,function(i){switch(i){case"\\\\":return"\\";case"\\colon":return":";case"\\comma":return","}})}for(d=0,b=g.length;d<b;++d){c=g[d].split(":",2);if(c.length===2){f[a(c[0])]=a(c[1])}}return f};ISQ.Widget.getInnerFrameUrl=function(h,m,d){h=h||"CDCframe.html";var a=m.indexOf("://")+3;var g;var b;var f="";if(a!==2){g=m.indexOf("/",a);f=m.substring(0,a);b=m.substring(a,g)}else{g=m.indexOf("/");b=m.substring(0,g)}var i=h.indexOf("://")+3;var l;var j;var k="";if(i!==2){l=h.indexOf("/",i);k=h.substring(0,i);j=h.substring(i,l)}else{l=h.indexOf("/");j=h.substring(0,l)}if(f&&j===b){if(k!==f){return h.replace(k,f)}return h}else{if(d){if(j===ISQ.Http.domain()){return h}return""}}var c="";if(h.charAt(0)==="/"){c=f+b+h}else{if(i!==2){c=f+b+h.substring(l)}else{c=f+b+"/"+h}}return c};ISQ.Widget.APIKeyEndDelimiter="<";ISQ.Widget.APIValueEndDelimiter="(";ISQ.Widget.buildNRLinkUrl=function(a,d,h){var g=new Array();g.push("https://www.nanorep.com/?source=poweredBy&aid=");g.push(a);if(d){g.push("&utm_source=");var f=ISQ.Http.domain(false,d).split(".");var c=g.length;for(var b=f.length-1;b>=0;b--){g.splice(c,0,f[b]);if(f[b].length>3){break}if(b>0){g.splice(c,0,".")}}}g.push("&utm_medium=widget&utm_content=");g.push(h);return g.join("")};ISQ.Widget.addCssStyles=function(b,a){if(typeof(b)==="string"&&b){if(b.contains(" ")){ISQ.CSS.addNewStyle(b,a)}else{ISQ.CSS.addNewStyle(ISQ.Tools.Base64.decode(b),a)}}};ISQ.Widget.buildCNFSource=function(a,b,c,g,f,h){var d=[];d.push(ISQ.Widget.getAccountURL(a));d.push("/widget/scripts/cnf.js?account=");
d.push(a);d.push("&key=");d.push(ISQ.Http.Cookies.encode64(ISQ.Http.domain(true,g?g:null)));if(h){d.push("&splittestgroup=");d.push(h)}if(g){refererStart=g.indexOf("//");if(refererStart>0&&refererStart<8){refererStart+=2}else{refererStart=0}g=g.substring(refererStart);if(g.indexOf("www.")==0){g=g.replace("www.","")}d.push("&referer=");d.push(g)}if(b){d.push("&isFloat=true")}if(c){d.push("&kb=");d.push(c)}if(f){d.push("&preview=true")}if(ISQ.Http.browser.isIPhone){d.push("&d=1")}return d.join("")};ISQ.Widget.handleEventMessage=function(messageArgs,widgetData){var type=messageArgs.type;var handl,query;var timer=3000;switch(type){case"query":if(!widgetData.events){break}handl=widgetData.events[type];query=ISQ.Tools.Base64.decodeString(messageArgs.data);var isAutoQuestion=messageArgs.isautoquestion=="true";if(handl){if(isAutoQuestion){handl(query,true)}else{this.queryTimer=setTimeout(function(){handl(query,false)},timer)}if(false){if(typeof(lpMTagConfig)==="undefined"){return}if(typeof(lpMTagConfig.pageVar)==="undefined"){lpMTagConfig.pageVar=[]}lpMTagConfig.pageVar[lpMTagConfig.pageVar.length]="nanoRep_question="+query}}var noWaitHandl=widgetData.events.query_noWait;if(noWaitHandl){noWaitHandl(query,isAutoQuestion)}break;case"nodata":if(!widgetData.events){break}handl=widgetData.events.noData;if(handl){handl()}break;case"scriptload":if(!widgetData.events){break}handl=widgetData.events.scriptload;if(handl){handl()}break;case"notLoad":if(widgetData.preview){break}var reason=messageArgs.reason||"";if(widgetData.events){handl=widgetData.events.notLoad;if(handl){handl(reason)}}if(typeof(ga)==="function"){ga("send","event","nanoRep",widgetData.type+" widget not loaded: "+reason,{nonInteraction:1})}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep",widgetData.type+"widget not loaded: "+reason,"","",true])}break;case"load":if(messageArgs.integrate_ga==="true"&&(typeof(widgetData.preview)=="undefined"||!widgetData.preview)){var events=widgetData.events;if(!events){events=widgetData.events={}}if(typeof(ga)==="function"){ga("send","event","nanoRep",widgetData.type+" widget loaded",{nonInteraction:1})
}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep",widgetData.type+" widget loaded","","",true])}var userActiveFunc=events.userActive;events.userActive=function(){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep User Active")}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep User Active"])}if(userActiveFunc){try{userActiveFunc()}catch(e){console.log(e)}}};var queryFunc=events.query;events.query=function(queryText,isAutoQuestion){if(!isAutoQuestion){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Query",queryText)}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Query",queryText])}}if(queryFunc){try{queryFunc(queryText,isAutoQuestion)}catch(e){console.log(e)}}};var incomingSearchResultsFunc=events.incomingSearchResults;events.incomingSearchResults=function(hasResults,isAutoQuestion,query,results){if(hasResults&&!isAutoQuestion){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Results Shown")}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Results Shown"])}}if(incomingSearchResultsFunc){try{incomingSearchResultsFunc(hasResults,isAutoQuestion,query,results)}catch(e){console.log(e)}}};var escFunc=events.escalation;events.escalation=function(type,queryText){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Escalation",queryText)}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Escalation",queryText])}if(escFunc){try{escFunc(type,queryText)}catch(e){console.log(e)}}};var likeFunc=events.like;events.like=function(queryText,answer,action){if(action>1){if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Dislike ("+action+")",answer)}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Dislike ("+action+")",answer])}}else{if(typeof(ga)==="function"){ga("send","event","nanoRep","nanoRep Like",answer)}if(typeof(_gaq)!=="undefined"){_gaq.push(["_trackEvent","nanoRep","nanoRep Like",answer])}}if(likeFunc){try{likeFunc(queryText,answer,action)
}catch(e){console.log(e)}}}}if(!widgetData.events){break}handl=widgetData.events[type];if(handl){handl()}break;case"userstartedtyping":handl=widgetData.events.userStartedTyping;if(handl){handl()}if(this.queryTimer){clearTimeout(this.queryTimer)}if(this.incomingSearchResultsTimer){clearTimeout(this.incomingSearchResultsTimer)}break;case"incomingsearchresults":if(!widgetData.events){break}isAutoQuestion=messageArgs.isautoquestion=="true";var hasResults=messageArgs.hasresults==="true";var results=eval("("+ISQ.Tools.Base64.decodeString(messageArgs.results)+")");var query=messageArgs.query?ISQ.Tools.Base64.decodeString(messageArgs.query):null;handl=widgetData.events.incomingSearchResults;if(handl){if(isAutoQuestion){handl(hasResults,true,query,results)}else{this.incomingSearchResultsTimer=setTimeout(function(){handl(hasResults,false,query,results)},timer)}}noWaitHandl=widgetData.events.incomingSearchResults_noWait;if(noWaitHandl){noWaitHandl(hasResults,isAutoQuestion,query,results)}break;case"answerPageChanged":var answerId=messageArgs.answerid;var page=messageArgs.page;handl=widgetData.events.answerPageChanged;if(handl){handl(answerId,page)}break;case"escalation":if(!widgetData.events){break}handl=widgetData.events[type];if(!handl){break}query=ISQ.Tools.Base64.decodeString(messageArgs.query);var escType=messageArgs.esctype;handl(escType,query);break;case"like":if(!widgetData.events){break}handl=widgetData.events[type];if(!handl){break}query=ISQ.Tools.Base64.decodeString(messageArgs.query);var answer=ISQ.Tools.Base64.decodeString(messageArgs.answer);var action=messageArgs.action;handl(query,answer,action);break;case"useractive":if(!widgetData.events){break}handl=widgetData.events.userActive;if(handl){handl()}break;case"directionchanged":if(!widgetData.events){break}handl=widgetData.events.directionChanged;if(handl){handl(messageArgs.rtl==="true")}break;case"chatavailable":if(!widgetData.events){break}handl=widgetData.events.chatAvailable;if(handl){handl(messageArgs.value==="true")}break;case"quote":if(!widgetData.events){break
}handl=widgetData.events.quote;var query=ISQ.Tools.Base64.decodeString(messageArgs.query);var text=ISQ.Tools.Base64.decodeString(messageArgs.text);if(handl){handl(query,messageArgs.answerid,text)}break}};if(typeof(ISQ.Widget.state)==="undefined"){ISQ.Widget.API={};ISQ.Widget.API.customParams=null;ISQ.Widget.API.getCurrentURL=function(){return window.location.href};ISQ.Widget.API.getCustomParams=function(){return _nRepData.customParams||{}};ISQ.Widget.API.openContactForm=function(){ISQ.API.openContactForm()};ISQ.Widget.API.updateContext=function(b,a){};ISQ.Widget.API.reAsk=function(){}}ISQ.Widget.extractDataFromScript=function(g){var f={};var h=document.getElementsByTagName("script");var j,a;for(var b=0;b<h.length;++b){j=h[b].getAttribute("src");if(!j){continue}if(!j.contains(g)){continue}if(!ISQ.WhiteLabels.isAlllowedDomain(j)&&j.startsWith("http")){continue}var c=-1;if(j.startsWith("/")||!j.startsWith("http")){c=window.location.href.indexOf("/",8);if(c===-1){f.staticHost=window.location.href}else{f.staticHost=window.location.href.substr(0,c)}if(!ISQ.WhiteLabels.isAlllowedDomain(f.staticHost)){f.staticHost=null;continue}}else{c=j.indexOf("/",8);if(c!==-1){f.staticHost=j.substr(0,c)}}j=j.substring(j.indexOf("?")+1);a=ISQ.Tools.stringToPairArray(j,"=","&",true,false);f.cdcFrame=a.innerframeurl;if(!f.cdcFrame){f.cdcFrame=a.cdcframe}if(f.cdcFrame){f.cdcVersion=a.cdcversion;if(!f.cdcVersion){f.cdcVersion=1}f.cdcVersion=parseInt(f.cdcVersion)}f.account=a.account;var d=a.preview;if(d==="true"){f.preview=true;f.referer=a.referer}f.debug=a.debug||false;break}return f};ISQ.CDC=initializeNS("ISQ.CDC");if(typeof(nanoRep)==="undefined"){window.nanoRep={}}if(typeof(nanoRep.CDC)==="undefined"){nanoRep.CDC={}}nanoRep.CDC.Helper={splitURLArguments:function(f){var h=new Array();var j=f;var c=j.length;if(c===0){return h}var b=function(k){return unescape(k.join("").toString()).replace(/^\s+|\s+$/g,"")};var i=1;var d="";var g=0;var a=new Array();while(g<c){switch(i){case 1:if(j.charAt(g)!=="="){a.push(j.charAt(g))}else{i=2;d=b(a).toLowerCase();
a=new Array()}break;case 2:if(j.charAt(g)!=="&"){a.push(j.charAt(g))}else{i=1;h[d]=b(a);a=new Array()}break}++g}if(i===2){h[d]=b(a)}return h},getTargetWindow:function(a,c){if(!a){return window.top}var g=window;if(c){g=window.parent}if(a==="parent"){return g.parent}var f=false;var d;do{try{if(g===window.top){f=true}d=g.frames[a];if(d){return d}}catch(b){}g=g.parent}while(!f);return window.top},parseMessage:function(a){if(!a){return""}var b=nanoRep.CDC.Helper.splitURLArguments(a);b.s=unescape(b.s);b.t=unescape(b.t);return b}};ISQ.CDC.User=ISQ.Base.extend({name:"ISQ.CDC.User"});ISQ.CDC.User.prototype.ctor=function(b){this.mTargetWindowName=b.targetWindowName||"";this.mProxyIFrameUrl=b.proxyIFrameUrl||null;this.mAllowMessagesFrom=b.allowMessagesFrom||null;this.incomingMessageEvent=new ISQ.Event();this.mWidget=b.widget||null;this.eFilterMessages=new ISQ.Event();if(typeof(ISQ.CDC.users)==="undefined"){ISQ.CDC.users=new Array()}ISQ.CDC.users.push(this);if(typeof(window.postMessage)!="function"&&typeof(window.postMessage)!="object"){this.mLegacyMode=true;this.mHost_l=window.location.protocol+"//"+window.location.host;if(this.mProxyIFrameUrl){if(this.mProxyIFrameUrl.contains("?")){this.mProxyIFrameUrl+="&srv="+b.server}else{this.mProxyIFrameUrl+="?srv="+b.server}}}else{var a=this;this.mPostMessageEventListener=function(d){if(d.origin!==a.mAllowMessagesFrom){return}var c=ISQ.CDC.Helper.splitURLArguments(d.data);c.s=unescape(d.origin);c.t="*";a.dispatchMessage(c)};if(window.addEventListener){window.addEventListener("message",this.mPostMessageEventListener,false)}else{if(window.attachEvent){window.attachEvent("onmessage",this.mPostMessageEventListener)}}}};ISQ.CDC.User.prototype.dtor=function(){if(this.mProxyIFrame_l&&this.mProxyIFrame_l.parentNode!==null){document.body.removeChild(this.mProxyIFrame_l)}if(!this.mLegacyMode){if(window.removeEventListener){window.removeEventListener("message",this.mPostMessageEventListener,false)}else{if(window.detachEvent){window.detachEvent("onmessage",this.mPostMessageEventListener)}}}};ISQ.CDC.User.prototype.sendMessage=function(b,f){f=f||"*";
if(!this.mLegacyMode){var g=ISQ.CDC.Helper.getTargetWindow(this.mTargetWindowName);b+="&ord="+(++this.mMessageOrdinal);g.postMessage(b,f)}else{if(!this.mMessagesOnSent){this.mMessagesOnSent=new Array()}if(!this.mProxyIFrameBaseUrl_l){var a=new Array();a.push(this.mProxyIFrameUrl);a.push("#");a.push("s=");a.push(escape(this.mHost_l));a.push("&t=");a.push(escape(f));a.push("&twnd=");a.push(this.mTargetWindowName);this.mProxyIFrameBaseUrl_l=a.join("")}var c=function(h,m,i){var o=new Array();o.push(h.mProxyIFrameBaseUrl_l);o.push("&");o.push(i);o.push("&ord=");o.push(m);var n="position: absolute; left: 0px; top:-1100px;height:70px;width:70px;";var j=document.createElement("iframe");var k=ISQ.CDC.User.getIframeId();j.setAttribute("id",k);j.setAttribute("name",k);j.setAttribute("src",o.join(""));j.setAttribute("frameBorder","1");j.setAttribute("scrolling","auto");j.setAttribute("width","70px");j.setAttribute("height","70px");j.setAttribute("style",n);if(j.style.setAttribute){j.style.setAttribute("cssText",n)}document.body.appendChild(j);var l=function(){setTimeout(function(){h.mMessagesOnSent[m]=null},100)};if(ISQ.Http.browser.app==="opera"){j.onload=l}else{if(document.addEventListener){j.addEventListener("load",l,true)}else{if(document.attachEvent){j.attachEvent("onload",l)}}}};var d=++this.mMessageOrdinal;this.mMessagesOnSent[d]=new c(this,d,b)}};ISQ.CDC.User.prototype.dispatchMessage=function(d){if(d.widget&&this.mWidget!==d.widget){return}var h={message:d,filter:false};this.eFilterMessages.dispatch(h);if(h.filter){return}if(d.subject&&d.subject=="reset"){this.mLastHandledMessageOrdinal=0;this.mMessageOrdinal=0;this.mReceivedMessages=null;this.mWasReset_debug=true}var j=parseInt(d.ord);var a=j-this.mLastHandledMessageOrdinal;if(a<=0){return}if(a>1){if(this.mReceivedMessages===null){this.mReceivedMessages=new Array();this.mReceivedMessagesCount=0}this.mReceivedMessages[j]=d;++this.mReceivedMessagesCount}else{try{this.incomingMessageEvent.dispatch(d)}catch(b){}if(this.mReceivedMessages!==null){var g=this.mReceivedMessagesCount;
var f=j+1;for(var c=0;c<g;++c,++f){if(!this.mReceivedMessages[f]){break}this.incomingMessageEvent.dispatch(this.mReceivedMessages[f]);j=f;--this.mReceivedMessagesCount}if(this.mReceivedMessagesCount===0){this.mReceivedMessages=null}}this.mLastHandledMessageOrdinal=j}};ISQ.CDC.User.prototype.targetWindowName=function(){return this.mTargetWindowName};ISQ.CDC.User.prototype.allowMessagesFrom=function(){return this.mAllowMessagesFrom};ISQ.CDC.User.prototype.mTargetWindowName=null;ISQ.CDC.User.prototype.mLegacyMode=false;ISQ.CDC.User.prototype.mHost_l="";ISQ.CDC.User.prototype.mProxyIFrameUrl=null;ISQ.CDC.User.prototype.mProxyIFrameBaseUrl_l=null;ISQ.CDC.User.prototype.mCurrentHeight=70;ISQ.CDC.User.prototype.incomingMessageEvent=null;ISQ.CDC.User.prototype.eFilterMessages=null;ISQ.CDC.User.prototype.mPostMessageEventListener=null;ISQ.CDC.User.prototype.mIsCDCStation=true;ISQ.CDC.User.prototype.mMessageOrdinal=0;ISQ.CDC.User.prototype.mAllowMessagesFrom=null;ISQ.CDC.User.prototype.mMessagesOnSent=null;ISQ.CDC.User.prototype.mReceivedMessages=null;ISQ.CDC.User.prototype.mLastHandledMessageOrdinal=0;ISQ.CDC.User.prototype.mReceivedMessagesCount=0;ISQ.CDC.User.prototype.mWasReset_debug=false;ISQ.CDC.User.getIframeId=function(){return"nR_CDC"+ISQ.CDC.User.iframeIdCounter++};ISQ.CDC.User.iframeIdCounter=new Date().getTime();nanoRep.FAQ=initializeNS("nanoRep.FAQ");nanoRep.FAQ.Texts={en:{like:"Good answer!",likeActive:"You like this",dislike:"Needs improvement",dislikeActive:"You dislike this",ok:"OK",cancel:"Cancel",dislikeOptionsTitle:"What's wrong with this answer?",likeTexts:{0:"Like",2:"Answer is incorrect or inaccurate",3:"Missing important information",4:"Answer irrelevant to the page",5:"Didn't find what I was looking for",6:"Missing or incorrect information"}},pl:{like:"Like",likeActive:"Chcesz tego",dislike:"Nie lubi",dislikeActive:"Nie lubi",ok:"OK",cancel:"Anuluj",dislikeOptionsTitle:"Jaki jest problem z odpowiedzi?",likeTexts:{0:"Like",2:"Odpowied jest niepoprawna bd nieprecyzyjna",3:"Brakuje wanych informacji",4:"Odpowied jest niezwizana z tematem",5:"Nie mog znale to, czego szukasz",6:"Brak lub nieprawidowe informacje"}},da:{like:"Like",likeActive:"Du kan lide denne",dislike:"Dislike",dislikeActive:"Du kan ikke lide denne",ok:"OK",cancel:"Annuller",dislikeOptionsTitle:"Hvad er der galt med dette svar?",likeTexts:{0:"Like",2:"Svaret er forkert eller uprcist",3:"Mangler vigtig information",4:"Svaret er irrelevant",5:"Jeg kunne ikke finde, hvad jeg ledte efter",6:"Manglende eller forkerte oplysninger"}},hu:{like:"Like",likeActive:"You like this",dislike:"Dislike",dislikeActive:"You dislike this",ok:"Rendben",cancel:"Mgse",dislikeOptionsTitle:"Mi a baj a vlasszal?",likeTexts:{0:"Like",2:"A vlasz helytelen vagy pontatlan",3:"Fontos informci hinyzik belle",4:"A vlasz nem relevns",5:"n nem talltam, amit kerestem",6:"Hinyz vagy helytelen informci"}},tr:{like:"Like",likeActive:"You like this",dislike:"Dislike",dislikeActive:"You dislike this",ok:"OK",cancel:"Cancel",dislikeOptionsTitle:"What's wrong with this answer?",likeTexts:{0:"Like",2:"Answer is incorrect or inaccurate",3:"Missing important information",4:"Answer irrelevant to the page",5:"Didn't find what I was looking for",6:"Missing or incorrect information"}},sv:{like:"Liksom",likeActive:"Du gillar det hr inlgget",dislike:"Motvilja",dislikeActive:"Du gillar inte det hr",ok:"OK",cancel:"Avbryt",dislikeOptionsTitle:"Vad r det fr fel p detta svar?",likeTexts:{0:"Liksom",2:"Svaret r felaktigt eller oriktigt",3:"Saknar viktig information",4:"Svaret r irrelevant",5:"Jag hittade inte det jag letade efter",6:"Saknas eller felaktig information"}},de:{like:"Gefllt mir",likeActive:"Sie mgen dieses",dislike:"Dislike",dislikeActive:"Sie mgen diese",ok:"OK",cancel:"Abbrechen",dislikeOptionsTitle:"Was ist falsch mit dieser Antwort?",likeTexts:{0:"Gefllt mir",2:"Antwort ist nicht richtig oder ungenau",3:"Es fehlen wichtige Informationen",4:"Die Antwort ist irrelevant",5:"Ich fand nicht, was ich gesucht habe",6:"Fehlende oder falsche Informationen"}},ar:{like:"",likeActive:"  ",dislike:"",dislikeActive:"  ",ok:"",cancel:"",dislikeOptionsTitle:"    ",likeTexts:{0:"",2:"     ",3:"  ",4:"   ",5:"     ",6:"    "}},zh:{like:"Like",likeActive:"",dislike:"",dislikeActive:"",ok:"",cancel:"",dislikeOptionsTitle:"",likeTexts:{0:"Like",2:"",3:"",4:"",5:"",6:""}},ru:{like:"Like",likeActive:"  ",dislike:" ",dislikeActive:"  ",ok:"OK",cancel:"",dislikeOptionsTitle:"     ?",likeTexts:{0:"Like",2:"   ",3:"    ",4:"    ",5:"    ,   ",6:"   "}},ja:{like:"Like",likeActive:"",dislike:"",dislikeActive:"",ok:"OK",cancel:"",dislikeOptionsTitle:"?",likeTexts:{0:"Like",2:"",3:"",4:"",5:"",6:""}},ko:{like:"Like",likeActive:" ",dislike:"",dislikeActive:" ",ok:"",cancel:"",dislikeOptionsTitle:"   ?",likeTexts:{0:"Like",2:"   .",3:"  .",4:"  .",5:"      ",6:"   "}},fr:{like:"J'aime",likeActive:"Vous aimez ce",dislike:"Antipathie",dislikeActive:"Yous n'aime pas ce",ok:"OK",cancel:"annuler",dislikeOptionsTitle:"Pourquoi cette rponse est-elle errone ?",likeTexts:{0:"J'aime",2:"La rponse est inexacte ou imprcise",3:"Des informations importantes sont manquantes",4:"La rponse est hors sujet",5:"Je n'ai pas trouv ce que je cherchais",6:"Information manquante ou incorrecte"}},it:{like:"Mi piace",likeActive:"Ti piace questo",dislike:"Antipatia",dislikeActive:"Non ti piace questo",ok:"OK",cancel:"Annulla",dislikeOptionsTitle:"Cosa c' di sbagliato in questa risposta?",likeTexts:{0:"Mi piace",2:"La risposta  errata o inaccurata",3:"Mancano informazioni importanti",4:"La risposta  irrilevante",5:"Non ho trovato quello che cercavo",6:"Informazioni mancanti o errate"}},nl:{like:"Vind ik leuk",likeActive:"U houdt van dit",dislike:"Afkeer",dislikeActive:"Je vind dit niet leuk",ok:"OK",cancel:"Annuleren",dislikeOptionsTitle:"Wat klopt er niet aan dit antwoord?",likeTexts:{0:"Vind ik leuk",2:"Antwoord is onjuist of onnauwkeurig",3:"Belangrijke informatie ontbreekt",4:"Het antwoord doet niet ter zake",5:"Heeft u niet gevonden wat ik zocht",6:"Ontbrekende of onjuiste informatie"}},pt:{like:"Gosto",likeActive:"Voc gosta disso",dislike:"Antipatia",dislikeActive:"Voc no gosta deste",ok:"OK",cancel:"Cancelar",dislikeOptionsTitle:"O que h de errado com esta resposta?",likeTexts:{0:"Gosto",2:"A resposta  incorreta ou inexata",3:"Faltam informaes importantes",4:"A resposta  irrelevante",5:"No encontrou o que estava procurando",6:"Informaes ausentes ou incorretas"}},es:{like:"Me gusta",likeActive:"Si le gusta este",dislike:"No me gusta",dislikeActive:"No le gusta este",ok:"Aceptar",cancel:"Cancelar",dislikeOptionsTitle:"Cul es el problema con esta respuesta?",likeTexts:{0:"Me gusta",2:"La respuesta es incorrecta o inexacta",3:"Falta informacin importante",4:"La respuesta es irrelevante",5:"No encontr lo que buscaba",6:"Informacin faltante o incorrecta"}},iw:{like:"",likeActive:"  ",dislike:" ",dislikeActive:"   ",ok:"",cancel:"",dislikeOptionsTitle:"    ?",likeTexts:{0:"",2:"   /  ",3:"  ",4:"   ",5:"    ",6:"    "}},no:{like:"Like",likeActive:"Du liker dette",dislike:"Dislike",dislikeActive:"Du liker ikke dette",ok:"OK",cancel:"Avbryt",dislikeOptionsTitle:"Hva er galt med dette svaret?",likeTexts:{0:"Like",2:"Svaret er feil eller unyaktig",3:"Mangler viktig informasjon",4:"Svaret er ikke relevant",5:"Fant ikke det jeg var ute etter",6:"Mangelfull eller feilaktig informasjon"}},fi:{like:"Tykk",likeActive:"Pidt tst",dislike:"En tykk",dislikeActive:"Et pid tm",ok:"Ok",cancel:"Peruuta",dislikeOptionsTitle:"Miksi tm vastaus ei ole riittv?",likeTexts:{0:"Tykk",2:"Vastaus on virheellisi tai eptarkkoja",3:"Puuttuu trkeit tietoja",4:"Vastaus on epolennainen",5:"Etk lytnyt mit olin etsimss",6:"Puuttuva tai vr tieto"}}};
nanoRep.FAQ.Texts.nb=nanoRep.FAQ.Texts.no;nanoRep.FAQ.Texts.nn=nanoRep.FAQ.Texts.no;ISQ.Widget=initializeNS("ISQ.Widget");ISQ.Widget.combineContext=function(c,d,f){if(!c){return d}if(d){for(var g in d){var h=g.toLowerCase();d[h]=d[g];if(h!==g){delete d[g]}}}var j=null;if(d||f){for(var b in c){if(d&&d[b.toLowerCase()]){continue}for(var a=0;a<c[b].length;++a){var i=null;if(f){i=f[c[b][a]]}if(!i){continue}if(!j){j=[];for(var k in d){j[k]=d[k]}}j[b.toLowerCase()]=i;break}}}return j||d};if(typeof nanoRep.FAQ.Localization=="undefined"){nanoRep.FAQ.Localization={}}nanoRep.FAQ.init=function(a,b){nanoRep.FAQ.Localization=nanoRep.FAQ.Texts[a]||nanoRep.FAQ.Texts.en;nanoRep.FAQ.dynamicHost=b};nanoRep.FAQ.dynamicHost=null;nanoRep.FAQ.Likes={};nanoRep.FAQ.Likes.enumFeedback={positive:1,wrongAnswer:2,wrongContent:4,wrongContext:8};nanoRep.FAQ.Likes.mData={div:null,options:[],pastActions:null,hasContext:false};nanoRep.FAQ.Likes.buildThumbUpIcon=function(b,n,i,q,c,a,g,o,l,p,m){l=l||nanoRep.FAQ.Localization;var r=createDiv(null,".nanoRepMP_likeIcon");r.onclick=function(){nanoRep.FAQ.Likes.saveData(r,b,q,c,a,g,o,p);nanoRep.FAQ.Likes.sendThumbAction(nanoRep.FAQ.Likes.enumFeedback.positive,l)};var h=nanoRep.FAQ.Likes.getLastAction(b);nanoRep.FAQ.Likes.setThumbStyles(h.action,r,null,false,l);if(h.action==0&&h.cacheVar==c){i++}if(m){n.appendChild(r);r.className+=" nanoRepMP_likeIconStandAlone";r.innerHTML=i?ISQ.Tools.getPrettyNumber(i,0,false,true):"0";r.likes=i;return r}var j=createDiv(n,"white-space:nowrap;");var k=createDiv(null,"white-space:nowrap;display:inline;");if(i&&i>999){k.title=ISQ.Tools.getPrettyNumber(i)}var f=(ISQ.Widget.HTML.dynamicRTLCssLoaded)?"rtl":"ltr";if(f=="ltr"){j.appendChild(r);j.appendChild(k);createDiv(k,".newLikesLeftEdge&display:inline-block;float:none;vertical-align:top;")}var d=createDiv(k,".newlikes&display:inline-block;float:none;vertical-align:top;cursor:default");if(f=="rtl"){d.className+=" newlikesRTL";createDiv(k,".newLikesRightEdge&display:inline-block;float:none;vertical-align:top;");k.appendChild(d);
j.appendChild(r);j.appendChild(k)}d.innerHTML=i?ISQ.Tools.getPrettyNumber(i,0,false,true):"0";r.likes=i;r.countElement=d;r.countContainer=k;return r};nanoRep.FAQ.Likes.buildThumbDownIcon=function(b,i,f,l,c,a,d,j,g,k,h,n){g=g||nanoRep.FAQ.Localization;var m=createDiv(i,".nanoRepMP_likeIcon &.nanoRepMP_dislikeIcon");m.widgetAnswer=n||false;f.thumbDown=m;m.onclick=function(){nanoRep.FAQ.Likes.saveData(f,b,l,c,a,d,j,k);var o=nanoRep.FAQ.Likes.getLastAction(b);if(o.action>nanoRep.FAQ.Likes.enumFeedback.positive){nanoRep.FAQ.Likes.sendThumbAction(o.action,g)}else{nanoRep.FAQ.Likes.toggleDislikeOptions(false,g)}};nanoRep.FAQ.Likes.setThumbStyles(nanoRep.FAQ.Likes.getLastAction(b).action,f,m,false,g);return m};nanoRep.FAQ.Likes.getLastAction=function(articleId){var pastActions=nanoRep.FAQ.Likes.mData.pastActions;var lastAction={action:null,cacheVar:null};if(!pastActions){var currentVal=ISQ.Tools.Storage.get("faqActions");if(currentVal){pastActions=eval("("+currentVal+")")}}if(!pastActions){pastActions={}}nanoRep.FAQ.Likes.mData.pastActions=pastActions;if(pastActions[articleId]&&typeof(pastActions[articleId].action)!=="undefined"){lastAction=pastActions[articleId]}return lastAction};nanoRep.FAQ.Likes.saveData=function(k,b,j,c,a,f,h,i,d,g){nanoRep.FAQ.Likes.mData.thumbUp=k;nanoRep.FAQ.Likes.mData.thumbDown=k.thumbDown||null;nanoRep.FAQ.Likes.mData.articleId=b;nanoRep.FAQ.Likes.mData.account=a;nanoRep.FAQ.Likes.mData.rtl=j||false;nanoRep.FAQ.Likes.mData.cacheVar=c;nanoRep.FAQ.Likes.mData.account=a;nanoRep.FAQ.Likes.mData.kb=f;nanoRep.FAQ.Likes.mData.preview=h;nanoRep.FAQ.Likes.mData.referrer=i;nanoRep.FAQ.Likes.mData.keywordsetId=g||null;nanoRep.FAQ.Likes.mData.callback=d||null};nanoRep.FAQ.Likes.setThumbStyles=function(a,d,c,f,b){b=b||nanoRep.FAQ.Localization;d=d||nanoRep.FAQ.Likes.mData.thumbUp;c=c||nanoRep.FAQ.Likes.mData.thumbDown;if(d){if(a==nanoRep.FAQ.Likes.enumFeedback.positive){ISQ.CSS.addClass(d,"nanoRepMP_likeIconCurrent");d.title=b.likeActive}else{ISQ.CSS.removeClass(d,"nanoRepMP_likeIconCurrent");d.title=b.like}}if(c){if(a>nanoRep.FAQ.Likes.enumFeedback.positive){ISQ.CSS.addClass(c,"nanoRepMP_dislikeIconCurrent");
c.title=b.dislikeActive}else{ISQ.CSS.removeClass(c,"nanoRepMP_dislikeIconCurrent");c.title=b.dislike}}if(f){nanoRep.FAQ.Likes.updateLikeCount(d,a==nanoRep.FAQ.Likes.enumFeedback.positive)}};nanoRep.FAQ.Likes.updateLikeCount=function(b,a){b.likes=a?b.likes+1:b.likes-1;if(b.countElement){b.countElement.innerHTML=b.likes>0?ISQ.Tools.getPrettyNumber(b.likes,0,false,true):"0";if(b.likes&&b.likes>999){b.countElement.parentNode.title=ISQ.Tools.getPrettyNumber(b.likes)}}else{b.innerHTML=b.likes>0?ISQ.Tools.getPrettyNumber(b.likes,0,false,true):"0"}};nanoRep.FAQ.Likes.toggleDislikeOptions=function(c,f){f=f||nanoRep.FAQ.Localization;if(typeof(nanoRep.FAQ.Likes.mData)=="undefined"){return}var a=nanoRep.FAQ.Likes.mData.thumbDown;if(!a){return}if(!nanoRep.FAQ.Likes.mData.div){nanoRep.FAQ.Likes.buildDislikeOptions(a)}var b=nanoRep.FAQ.Likes.mData.div;if(b.style.display=="block"||c){b.style.display="none";a.title=a.oldTitle;ISQ.CSS.removeClass(a,"nanoRepMP_dislikeIconOpen");if(b.faqFader){b.faqFader.parentNode.removeChild(b.faqFader);b.faqFader=null}a.removeChild(b);for(var d in nanoRep.FAQ.Likes.mData.options){nanoRep.FAQ.Likes.mData.options[d].checked=false}ISQ.Tools.addRemoveClickOutsideElementsListener("dislikeOptions",false);clearNode(nanoRep.FAQ.Likes.mData.div);nanoRep.FAQ.Likes.mData.div=null}else{a.appendChild(b);a.oldTitle=a.title;a.title="";b.style.display="block";ISQ.CSS.addClass(a,"nanoRepMP_dislikeIconOpen");nanoRep.FAQ.Likes.setDislikeOptionsPosition();ISQ.Tools.addRemoveClickOutsideElementsListener("dislikeOptions",true,[b],new ISQ.Handler(function(g){if(ISQ.Html.getEventTarget(g)==nanoRep.FAQ.Likes.mData.thumbDown){return}nanoRep.FAQ.Likes.toggleDislikeOptions(true,f);if(nanoRep.FAQ.Likes.dislikeTimer){clearInterval(nanoRep.FAQ.Likes.dislikeTimer)}}))}ISQ.Tools.blinkElement(b,0,false,"validationErr")};nanoRep.FAQ.Likes.dislikeTimer=null;nanoRep.FAQ.Likes.setDislikeOptionsPosition=function(){var b=nanoRep.FAQ.Likes.mData.div;if(!b.parentNode){return}b.style.height="auto";if(ISQ.Widget.HTML&&ISQ.Widget.HTML.contentWrapper&&ISQ.Widget.HTML.contentWrapper.offsetWidth<420){b.className+=" narrowWidget_dislikeOptions"
}else{}var d="0";var f=ISQ.Html.pageSize(true);if(f.h>400){if(b.parentNode.offsetTop+150>f.h-30){d="-130"}else{d="0"}}b.style.bottom="auto";if(ISQ.Widget.HTML&&ISQ.Widget.HTML.contentWrapper){var c=createDiv(ISQ.Widget.HTML.widgetContainer,".widgetFAQBlocker");b.faqFader=c;b.faqFader.style.position="fixed";b.faqFader.onclick=function(){};var g=(ISQ.Widget.HTML.contentWrapper.offsetWidth-b.offsetWidth)/2;b.style.left=g+"px";var i=ISQ.Widget.HTML.widgetContainer.offsetHeight;if(ISQ.Widget.isFloat){var d=(ISQ.Widget.HTML.contentWrapper.offsetHeight-b.offsetHeight)/2;d+=ISQ.Widget.HTML.searchWrapper.offsetHeight+ISQ.Widget.HTML.titleWrapper.offsetHeight;b.style.top=d+"px";if(ISQ.Http.browser.isMobile){b.style.top=(screen.height-b.offsetHeight)/2+"px"}}else{var a=b.parentNode.getBoundingClientRect();b.style.top=a.top-(b.offsetHeight)/2+"px";if(a.top+b.offsetHeight>i){b.style.top=i-b.offsetHeight-ISQ.Widget.HTML.footerWrapper.offsetHeight+"px"}}if(ISQ.Http.browser.isMobile){nanoRep.FAQ.Likes.dislikeTimer=setInterval(function(){var h=(ISQ.Widget.HTML.contentWrapper.offsetWidth-b.offsetWidth)/2;b.style.left=h+"px"},250)}}else{if(nanoRep.FAQ.Likes.mData.rtl){b.style.left="20px"}else{b.style.right="20px"}}};nanoRep.FAQ.Likes.buildDislikeOptions=function(a,j){j=j||nanoRep.FAQ.Localization;var k=ISQ.Http.browser.isMobile?" &.mobile":"";var c=nanoRep.FAQ.Likes.mData.div=createDiv(document.body,".nanoRepMP_dislikeOptions"+k);c.onclick=function(i){ISQ.Html.getDomEvent(i).cancel()};createLink({parent:c,text:"x",style:".closeIcon",onclick:function(){nanoRep.FAQ.Likes.toggleDislikeOptions(false,j)}});createDiv(c,".nanoRepMP_dislikeOptionsTitle").innerHTML=j.dislikeOptionsTitle;var l=[];var d=nanoRep.FAQ.Likes.mData.hasContext||(typeof(_session)==="function"&&_session().hasContext&&_session().hasContext());if(a.widgetAnswer){l=[6,5];if(d){l.push(4)}}else{if(d){l=[6,4]}else{l=[2,3]}}var o={0:nanoRep.FAQ.Likes.enumFeedback.positive,2:nanoRep.FAQ.Likes.enumFeedback.wrongContent,3:nanoRep.FAQ.Likes.enumFeedback.wrongContent,4:nanoRep.FAQ.Likes.enumFeedback.wrongContext,5:nanoRep.FAQ.Likes.enumFeedback.wrongAnswer,6:nanoRep.FAQ.Likes.enumFeedback.wrongContent};
var n=j.likeTexts;for(var f=0;f<l.length;f++){var g=l[f];var m=createRadio({type:"radio",name:"dislike",parent:c,text:n[g],value:o[g],holderStyle:"padding-top:4px;",onclick:function(){ISQ.Tools.blinkElement(c,0,false,"validationErr");if(ISQ.Http.isChrome()){var i=c.style.position;c.style.position="static";c.offsetHeight;c.style.position=i}}});nanoRep.FAQ.Likes.mData.options.push(m)}var b=createDiv(c,".nanoRepMP_dislikeOptionsBtns");var h=createLink({parent:b,text:j.ok,style:".button",onclick:function(){var p=-1;for(var q in nanoRep.FAQ.Likes.mData.options){if(nanoRep.FAQ.Likes.mData.options[q].checked){p=parseInt(nanoRep.FAQ.Likes.mData.options[q].value)}}if(p==-1){ISQ.Tools.blinkElement(c,3,true,"validationErr");return}if(nanoRep.FAQ.Likes.mData.callback){nanoRep.FAQ.Likes.mData.callback(nanoRep.FAQ.Likes.mData.articleId,nanoRep.FAQ.Likes.mData.keywordsetId,p)}else{nanoRep.FAQ.Likes.sendThumbAction(p,j)}nanoRep.FAQ.Likes.toggleDislikeOptions(false,j)}});h=createLink({parent:b,text:j.cancel,style:".button &.buttonLink",onclick:function(){nanoRep.FAQ.Likes.toggleDislikeOptions(false,j)}})};nanoRep.FAQ.Likes.sendThumbAction=function(b,h){h=h||nanoRep.FAQ.Localization;var c=nanoRep.FAQ.Likes.mData.articleId;var i=nanoRep.FAQ.Likes.mData.pastActions;var d=nanoRep.FAQ.Likes.mData.cacheVar;var a=nanoRep.FAQ.Likes.mData.account;var g=nanoRep.FAQ.Likes.mData.kb;var j=nanoRep.FAQ.Likes.mData.preview;var k=nanoRep.FAQ.Likes.mData.referrer;if(!c){throw ("articleId must be specified")}var l=null;if(typeof(i[c])!=="undefined"&&typeof(i[c].action)!=="undefined"){l=i[c].action;if(l==b){b=null}}if(b==null){delete i[c]}else{i[c]={};i[c].action=b;if(d){i[c].cacheVar=d}}if(!j){ISQ.Tools.Storage.set("faqActions",ISQ.Data.jsonToString(i));nanoRep.FAQ.Likes.mData.pastActions=i;var m=new Array();m.push(ISQ.Widget.getAccountURL(a));m.push("/widget/faqAction.gif?rnd=");m.push(Math.floor(Math.random()*1000000));m.push("&src=FAQ");m.push("&account=");m.push(a);if(g){m.push("&kb="+g)}m.push("&id=");m.push(c);if(b!=null){m.push("&action="+b)}if(l!=null){m.push("&undo="+l)
}if(k){m.push("&referer="+escape(k))}var f=new Image();f.src=m.join("");f.style.width="1px";f.style.height="1px";f.style.display="none"}nanoRep.FAQ.Likes.setThumbStyles(b,null,null,b==nanoRep.FAQ.Likes.enumFeedback.positive||l==nanoRep.FAQ.Likes.enumFeedback.positive,h)};nanoRep.FAQ.combineContext=function(b,f){if(!b){b={}}var c;var j={};for(var h in b){if(b.hasOwnProperty(h)){j[h.toLowerCase()]=b[h]}}b=j;if(typeof(_nRepData)=="undefined"||!_nRepData.customParams){c=b}if(!f){if(ISQ.Cnf_Float){c=ISQ.Widget.combineContext(ISQ.Cnf_Float.contextAttributes,b,_nRepData.customParams)}else{if(ISQ.Cnf_Embed){c=ISQ.Widget.combineContext(ISQ.Cnf_Embed.contextAttributes,b,_nRepData.customParams)}}}var g=false;if(c){for(var a in c){g=true;break}}if(g){nanoRep.FAQ.Likes.mData.hasContext=true;var i=[{from:",",to:" "},{from:":",to:" "}];var d=[];for(var a in c){if(!c[a]||typeof(c[a])!=="string"){continue}if(d.length!=0){d.push(",")}d.push(a.replacer(i));d.push(":");d.push(c[a].replacer(i))}return ISQ.Http.Cookies.encode64(d.join(""))}return undefined};nanoRep.FAQ.combineAndFormatContext=function(b,c){var a=nanoRep.FAQ.combineContext(b,c);return a?"&context="+a:""};nanoRep.FAQ.requestFaqLists=function(b){var c=new Array();var a=b.account||_nRepData.account;c.push(ISQ.Widget.getAccountURL(a,b.host&&b.host.replace("//","")));c.push("/api/faq/v1/list.js");c.push("?account=");c.push(a);if(b.isFloat){c.push("&isFloat=true")}if(b.kb){c.push("&kb="+b.kb)}c.push("&referer=");if(b.configId){c.push("!"+b.configId)}else{if(window.location.href.contains("nanorep.com")&&b.referer){c.push(escape(b.referer))}else{c.push(escape(window.location.href))}}if(b.encoding){c.push("&encoding="+b.encoding)}c.push(nanoRep.FAQ.combineAndFormatContext(b.context,b.disableContextCombine));ISQ.Tools.appendScript(c.join(""),function(){if(!nanoRep.FAQ.faqData){throw ("Invalid FAQ Data received")}if(b.callback){b.callback(nanoRep.FAQ.faqData)}else{nanoRep.FAQ.faqData=ISQ.Data.jsonToString(nanoRep.FAQ.faqData);var d=ISQ.Http.Cookies.encode64(nanoRep.FAQ.faqData);b.cdcUser.sendMessage("subject=faqData&data="+d)
}delete nanoRep.FAQ.faqData})};ISQ.Widget.CDC_getKeyValueArrayFromMessage=function(d,c){var b;if(c){b={}}else{b=[]}var i=d.split(ISQ.Widget.APIKeyEndDelimiter);var h,a,g;for(var f=0;f<i.length;++f){h=i[f].split(ISQ.Widget.APIValueEndDelimiter);a=ISQ.Http.Cookies.decode64(h[0]);g=ISQ.Http.Cookies.decode64(h[1]);b[a]=g}return b};ISQ.Widget.CDC_appendKeyValueToMessage=function(a,d){var b=true;for(var c in a){if(!b){d.push(ISQ.Widget.APIKeyEndDelimiter)}b=false;d.push(ISQ.Http.Cookies.encode64(c));d.push(ISQ.Widget.APIValueEndDelimiter);d.push(ISQ.Http.Cookies.encode64(a[c]))}};nanoRep.Widget.PositionAnimator={};nanoRep.Widget.PositionAnimator.element=null;nanoRep.Widget.PositionAnimator.side=0;nanoRep.Widget.PositionAnimator.bottom=0;nanoRep.Widget.PositionAnimator.dockRight=false;nanoRep.Widget.PositionAnimator.isRunning=false;nanoRep.Widget.PositionAnimator.timer=null;nanoRep.Widget.PositionAnimator.totalTime=1000;nanoRep.Widget.PositionAnimator.remainingTimeBottom=0;nanoRep.Widget.PositionAnimator.remainingTimeSide=0;nanoRep.Widget.PositionAnimator.factorBottom=0;nanoRep.Widget.PositionAnimator.factorSide=0;nanoRep.Widget.PositionAnimator.interval=20;nanoRep.Widget.PositionAnimator.lastTimerDate=0;nanoRep.Widget.PositionAnimator.stopAnimationInterval=100;nanoRep.Widget.PositionAnimator.setSide=function(b,c,a){nanoRep.Widget.PositionAnimator.element=b;nanoRep.Widget.PositionAnimator.side=c;nanoRep.Widget.PositionAnimator.remainingTimeSide=nanoRep.Widget.PositionAnimator.totalTime-100;nanoRep.Widget.PositionAnimator.factorSide=Math.abs(nanoRep.Widget.PositionAnimator.side-nanoRep.Widget.PositionAnimator.getCurrentSide())/20;nanoRep.Widget.PositionAnimator.dockRight=a};nanoRep.Widget.PositionAnimator.setBottom=function(a,b){if(b==0){b=-1}nanoRep.Widget.PositionAnimator.element=a;nanoRep.Widget.PositionAnimator.bottom=b;nanoRep.Widget.PositionAnimator.remainingTimeBottom=nanoRep.Widget.PositionAnimator.totalTime-100;nanoRep.Widget.PositionAnimator.factorBottom=Math.abs(nanoRep.Widget.PositionAnimator.bottom-nanoRep.Widget.PositionAnimator.getCurrentBottom())/20
};nanoRep.Widget.PositionAnimator.start=function(){if(!nanoRep.Widget.PositionAnimator.side&&!nanoRep.Widget.PositionAnimator.bottom){return}if(nanoRep.Widget.PositionAnimator.isRunning){return}nanoRep.Widget.PositionAnimator.isRunning=true;nanoRep.Widget.PositionAnimator.lastTimerDate=new Date();nanoRep.Widget.PositionAnimator.timer=setTimeout(nanoRep.Widget.PositionAnimator.timerElapsed,0)};nanoRep.Widget.PositionAnimator.getCurrentSide=function(){var a;if(nanoRep.Widget.PositionAnimator.dockRight){a=parseInt(nanoRep.Widget.PositionAnimator.element.style.right)}else{a=parseInt(nanoRep.Widget.PositionAnimator.element.style.left)}if(isNaN(a)){a=0}return a};nanoRep.Widget.PositionAnimator.getCurrentBottom=function(){return parseInt(nanoRep.Widget.PositionAnimator.element.style.bottom)};nanoRep.Widget.PositionAnimator.timerElapsed=function(){var d=new Date()-nanoRep.Widget.PositionAnimator.lastTimerDate;if(d>=nanoRep.Widget.PositionAnimator.stopAnimationInterval){nanoRep.Widget.PositionAnimator.isRunning=false;if(nanoRep.Widget.PositionAnimator.side!==0){if(nanoRep.Widget.PositionAnimator.dockRight){nanoRep.Widget.PositionAnimator.element.style.right=nanoRep.Widget.PositionAnimator.side+"px"}else{nanoRep.Widget.PositionAnimator.element.style.left=nanoRep.Widget.PositionAnimator.side+"px"}}if(nanoRep.Widget.PositionAnimator.bottom!==0){nanoRep.Widget.PositionAnimator.element.style.bottom=nanoRep.Widget.PositionAnimator.bottom+"px"}}var b=nanoRep.Widget.PositionAnimator.getCurrentBottom();var c=nanoRep.Widget.PositionAnimator.getCurrentSide();var a,h;if(nanoRep.Widget.PositionAnimator.side===0){h=0}else{h=nanoRep.Widget.PositionAnimator.side-c}if(nanoRep.Widget.PositionAnimator.bottom===0){a=0}else{a=nanoRep.Widget.PositionAnimator.bottom-b}var g;if(h!==0){h/=Math.abs(h);var f=nanoRep.Widget.PositionAnimator.remainingTimeSide/(nanoRep.Widget.PositionAnimator.totalTime);f*=nanoRep.Widget.PositionAnimator.factorSide;if(f<2){f=2}g=c+(h*f);nanoRep.Widget.PositionAnimator.remainingTimeSide-=nanoRep.Widget.PositionAnimator.interval;
if(h>0&&g>nanoRep.Widget.PositionAnimator.side){g=nanoRep.Widget.PositionAnimator.side}if(h<0&&g<nanoRep.Widget.PositionAnimator.side){g=nanoRep.Widget.PositionAnimator.side}if(nanoRep.Widget.PositionAnimator.dockRight){nanoRep.Widget.PositionAnimator.element.style.right=g+"px"}else{nanoRep.Widget.PositionAnimator.element.style.left=g+"px"}if(g===nanoRep.Widget.PositionAnimator.side){nanoRep.Widget.PositionAnimator.side=0}}else{nanoRep.Widget.PositionAnimator.side=0}if(a!==0){a/=Math.abs(a);var f=nanoRep.Widget.PositionAnimator.remainingTimeBottom/(nanoRep.Widget.PositionAnimator.totalTime);f*=nanoRep.Widget.PositionAnimator.factorBottom;if(f<2){f=2}g=b+(a*f);nanoRep.Widget.PositionAnimator.remainingTimeBottom-=nanoRep.Widget.PositionAnimator.interval;if(a>0&&g>nanoRep.Widget.PositionAnimator.bottom){g=nanoRep.Widget.PositionAnimator.bottom}if(a<0&&g<nanoRep.Widget.PositionAnimator.bottom){g=nanoRep.Widget.PositionAnimator.bottom}nanoRep.Widget.PositionAnimator.element.style.bottom=g+"px";if(g===nanoRep.Widget.PositionAnimator.bottom){nanoRep.Widget.PositionAnimator.bottom=0}}else{nanoRep.Widget.PositionAnimator.bottom=0}if(nanoRep.Widget.PositionAnimator.bottom||nanoRep.Widget.PositionAnimator.side){nanoRep.Widget.PositionAnimator.lastTimerDate=new Date();nanoRep.Widget.PositionAnimator.timer=setTimeout(nanoRep.Widget.PositionAnimator.timerElapsed,nanoRep.Widget.PositionAnimator.interval)}else{nanoRep.Widget.PositionAnimator.isRunning=false}};ISQ.WhiteLabels=(function(){var f={};var g={};f["nanorep.com"]={isNanoRepDomain:true,name:"Bold360ai",accountName:"Nanorep",logo:"nrLogo",consoleLogo:"nanoRepLogo",consoleLogoClasses:"",logoLink:"/console/login.html",pageTitle:"My Nanorep Secure Login",favicon:"/favicon-bold-ai.png",privacyLink:"http://www.nanorep.com/Privacy",termsLink:"http://www.nanorep.com/Terms",supportLink:"http://nanorep.com/support",voicesLink:"http://support.nanorep.com/Analytics/General-Analytics/41989494/Voices-overview.htm",dashboardOverviewLink:"http://support.nanorep.com/Analytics/General-Analytics/41926066/Dashboard-overview.htm",voicesOverviewLink:"http://support.nanorep.com/Analytics/General-Analytics/41989494/Voices-overview.htm",contactUsLink:"http://www.nanorep.com/Contact",pricingLink:"http://www.nanorep.com/product/pricing",chatPluginLink:"http://www.nanorep.com/Support/Liveperson-Chat-Integration/Agent-client-integration",guidanceIcon:"guidance_nanorep_icon",widgetConfigId:76830400};
g["nanorep.com"]={};f[".nanorep.info"]=f["nanorep.com"];g[".nanorep.info"]=g["nanorep.com"];f[".nanorep.co"]=f["nanorep.com"];g[".nanorep.co"]=g["nanorep.com"];f["cartassist.co.uk"]={name:"CartAssist",accountName:"goresponse",logo:"caLogo",consoleLogo:"cartAssistLogo",consoleLogoClasses:"cart-assist-logo",logoLink:"http://www.cartassist.co.uk",pageTitle:"My CartAssist Secure Login",favicon:"/console/images/ca_favicon.ico",privacyLink:"http://www.cartassist.co.uk/privacy",termsLink:"http://www.cartassist.co.uk/terms",supportLink:"http://support.cartassist.co.uk",voicesLink:"http://support.cartassist.co.uk",dashboardOverviewLink:"http://support.cartassist.co.uk",voicesOverviewLink:"http://support.cartassist.co.uk",contactUsLink:"http://www.cartassist.co.uk/contact-us/",pricingLink:"http://www.cartassist.co.uk/contact-us/",chatPluginLink:"http://support.cartassist.co.uk",guidanceIcon:"guidance_cartassist_icon",widgetConfigId:76831702};g["cartassist.co.uk"]={leafNanoAnswer:"CartAssist answer:",smartSearch:"CartAssist Search",searchResult:"CartAssist search result",mergeUpdate:"By selecting this answer, CartAssist will learn to answer %title% for:<br/>%phrasings%<br/> Continue?",chatSuggestion:"User received CartAssist answer:",accountExpiredMessage:"Your trial period has expired.",chart_answeredSessions:"This chart shows how many sessions have been answered through CartAssist, including automatic-answers, emails, and chats.",addArticleTooltipBody:"As support agents answer tickets, CartAssist learns new answers that can be published to the knowledge base. <br/>For best results, provide an answer that will be relevant to as many visitors as possible, not personal answers or details."};var a=f[window.location.hostname];var b=g[window.location.hostname];if(!a){for(var d in f){if(window.location.hostname.endsWith(d)){a=f[d];b=g[d];break}}}ISQ.Http.isNanoRepDomain=a&&a.isNanoRepDomain;var c=function(h){var i=a[h];if(!i){i=f["nanorep.com"][h]}if(!i){return null}return i};return{isAlllowedDomain:function(h){var j=true;for(var k in f){if(h.contains(k)){j=true;
break}}return j},getValue:c,changeLink:function(k,j){var i=document.createElement("div");i.innerHTML=j;var h=i.querySelector("a");h.href=this.getValue(k);return i.innerHTML},changeName:function(i,h,j){return h.replace(j,this.getValue(i))},changeFavicon:function(){var h=document.createElement("link");h.type="image/x-icon";h.rel="shortcut icon";h.href=this.getValue("favicon");document.getElementsByTagName("head")[0].appendChild(h)},mergeDictionary:function(h){for(var i in b){if(b.hasOwnProperty(i)){h[i]=b[i]}}return h},compileLabels:function(l){if(typeof l=="undefined"){l=document}var r=l.querySelectorAll(".WhiteLabelPlaceHolder");if(r.length>0){for(var m=0;m<r.length;m++){var p=r[m];var o=p.getAttribute("wl-key");var q=p.getAttribute("wl-type");if(!o){continue}if(!q){q=o}switch(q){case"name":p.innerHTML=this.getValue(o);break;case"href":p.href=this.getValue(o);break;case"svg":var k=_(this.getValue(o));for(var n=0;n<k.childNodes.length;++n){var h=k.childNodes[n];if(!h.nodeName||(h.nodeName!=="SVG"&&h.nodeName!=="svg")){continue}h=h.cloneNode(true);p.innerHTML="";p.appendChild(h);break}break}}}return l},resetLoginPage:function(){}}})();if(typeof(window.ISQ)==="undefined"){window.ISQ={}}window.ISQ.removeNanoRepLoading=function(a){var d=document.getElementsByTagName("DIV");if(typeof(d)==="undefined"||!d){return}var b=null;for(var h=0;h<d.length;++h){if(d[h].className!=="nanorep_loadingData"&&d[h].id!=="nanoRepProxyContainer"){continue}for(var c=0;c<d[h].childNodes.length;++c){if(d[h].childNodes[c].style&&(d[h].childNodes[c].getAttribute("nR_noRemove")==="true"||d[h].childNodes[c].getAttribute("nR_noRemove")===true||d[h].childNodes[c].className.indexOf("nR_noRemove")!==-1)){continue}if(((navigator.appVersion.indexOf("MSIE 6")!==-1)||(navigator.appVersion.indexOf("MSIE 7")!==-1))&&document.readyState!=="complete"&&window.location.protocol.startsWith("https")){if(d[h].childNodes[c].style){d[h].childNodes[c].style.display="none"}else{if(!b){b=new Array()}b.push(d[h].childNodes[c])}}else{try{d[h].removeChild(d[h].childNodes[c]);
--c}catch(f){if(d[h].childNodes[c].style){d[h].childNodes[c].style.display="none"}}}}}if(b){var g=function(j){if(document.readyState!=="complete"){setTimeout(function(){g(j)},100);return}for(var k=0;k<j.length;++k){if(j[k].parentNode){j[k].parentNode.removeChild(j[k])}}};g(b)}};window.ISQ.removeNanoRepLoading();ISQ.Embed={};(function(){var a=window._nRepData;if(!a){throw ("nanoRep widget: invalid widget data (0)")}var d=a.embed;if(!d){throw ("nanoRep widget: invalid widget data (1)")}var g=ISQ.Widget.extractDataFromScript("embed.js");if(a&&typeof a.customHostName==="string"){ISQ.Widget.setCustomHost(a.customHostName)}var c=typeof(d)==="object"&&!(d instanceof Array)&&d.processed;if(!c){var i,f,b;var h;if(d instanceof Array){h={width:d[0],height:d[1],container:d[2]}}else{if(typeof(d)==="object"){h=d}}h.type="embed";h.id=h.id||"embed";h.staticHost=g.staticHost||(window.location.protocol+"//"+ISQ.Http.domain(true));h.dynamicHost=ISQ.Widget.getDynamicHost();h.account=g.account||d.account||window._nRepData.account;h.account=h.account.replace(/\./g,"-");h.preview=g.preview||false;h.debug=g.debug||false;h.cdcUser=null;h.dynamicSize=d.dynamicSize||false;h.cdcFrame=d.cdcFrame||"";h.cdcVersion=d.cdcVersion||0;h.maxHeight=d.maxHeight;h.useExistingCNF=d.useExistingCNF===true;a.embed=h;h.referer=ISQ.Http.getNoHashUrl();if(g.preview&&g.referer&&(h.referer.startsWith(h.staticHost)||h.referer.startsWith(h.dynamicHost)||h.referer.startsWith(ISQ.Widget.getAccountURL(h.account)))){h.referer=g.referer}}})();ISQ.Embed.dispose=function(b){if(!_nRepData.embed){return}if(!_nRepData.embed.processed){return}var a=ISQ.Html._(_nRepData.embed.container);if(_nRepData.embed.cdcVersion===2){ISQ.Widget.cdcMessageEvent.removeHandler(ISQ.Embed.cdcMessageHandler,_nRepData.embed)}else{if(_nRepData.embed.cdcVersion===3){_nRepData.embed.cdcUser.dispose()}}if(a){a.style.height="auto"}_nRepData.embed.sentMessageToWidget=false;if(b){delete _nRepData.embed}clearNode(a)};ISQ.Embed.reloadWidget=function(a){ISQ.Embed.dispose(a?true:false);if(a){_nRepData.embed=a
}ISQ.Embed.loadWidget(_nRepData.embed)};ISQ.Embed.loadWidget=function(g){if(ISQ.Http.browser.isIE6){if(window._nRepData.windowLoaded!==true){setTimeout(function(){ISQ.Embed.loadWidget(g)},300);return}}var b=ISQ.Html._(g.container);if(b===null){if(window._nRepData.windowLoaded!==true){setTimeout(function(){ISQ.Embed.loadWidget(g)},200)}else{throw ("nanoRep widget: invalid container")}return}ISQ.Widget.applyContextFromCookie(_nRepData.embed);var d=[];var f=_nRepData.embed.account&&_nRepData.embed.staticHost.indexOf("//cdn-")>-1;if(g.account&&!f){d.push(ISQ.Widget.getAccountURL(g.account))}else{d.push(g.staticHost)}if(f){d.push("/~"+_nRepData.embed.account)}d.push("/widget/widget.html?cv=cv=8D6C31B45ACF500");if(_nRepData.configId){d.push("&configId=",_nRepData.configId)}if(_nRepData.embed.preview){d.push("&referer="+_nRepData.embed.referer)}else{if(f){d.push("&referer=")}}ISQ.Widget.appendConfigurationsToIframeSource(d,g);if(g.dynamicSize){d.push("&dynamicsize=true");if(g.maxHeight){d.push("&dynamicmaxsize=");d.push(g.maxHeight)}g.height=1}d.push("&notifyclick=true");var i="100%";if(g.width){i=typeof(g.width)==="string"&&g.width.endsWith("%")?g.width:g.width+"px"}var c="nanoRep_frame_embed_"+new Date().getTime();var a=document.createElement("iframe");a.style.height=g.height+"px";a.style.width=i;a.style.background="transparent";a.style.position="static";a.style.zIndex=20;a.style.border="0px";a.style.margin="0px";a.setAttribute("allowTransparency",true);a.setAttribute("allowfullscreen",true);a.setAttribute("frameBorder",false);a.setAttribute("scrolling",false);a.setAttribute("id",c);a.setAttribute("name",c);a.setAttribute("nanoRep_loading_noRemove",true);g.iframe=a;g.eCnfLoaded=ISQ.Embed.cnfLoaded;g.eAfterCnfSent=ISQ.Embed.afterCnfSent;if(!ISQ.Widget.downloadAndSendCNF(g)){ISQ.Embed.initCDC(g)}if(ISQ.Widget.sendingMessagesToWidget&&(!ISQ.Widget.supportsPostMessage&&!g.dynamicSize)){var h=function(){ISQ.Widget.sendAPItoWidget(g);g.sentMessageToWidget=true};if(ISQ.Http.browser.app==="opera"){g.iframe.onload=h}else{if(document.addEventListener){g.iframe.addEventListener("load",h,true)
}else{if(document.attachEvent){g.iframe.attachEvent("onload",h)}}}}a.src=d.join("");ISQ.Widget.fixStealFocus(g);b.appendChild(a);if(ISQ.Http.browser.oldAndroid){ISQ.Widget.createMobileBlockerLink(g,b,i,g.height+"px")}g.size=[g.width,g.height];if(!g.dynamicSize){ISQ.Widget.preventOuterScroll(_nRepData.embed.iframe)}};ISQ.Embed.cnfLoaded=function(){var b=_nRepData.embed;ISQ.Embed.initCDC(b);if(ISQ.Cnf_Embed.customEmbeddedSize){var a=ISQ.Cnf_Embed.customEmbeddedSize.split(",");if(a.length===2){a[0]=parseInt(a[0]);a[1]=parseInt(a[1]);b.width=a[0];b.height=a[1];if(b.iframe){b.iframe.style.height=a[0]+"px";b.iframe.style.width=a[1]+"px"}}}if(ISQ.Cnf_Embed.onLoadPageScript){ISQ.API.runPageScript(ISQ.Cnf_Embed.onLoadPageScript,false)}ISQ.Widget.Mobile.resizeStart()};ISQ.Embed.afterCnfSent=function(){if(typeof(ISQ.Cnf_Embed.faqData)==="string"){var a=_nRepData.embed;nanoRep.FAQ.requestFaqLists({account:a.account,kb:a.kb,referer:a.referer,encoding:a.encoding,context:a.context,isFloat:false,callback:null,cdcUser:a.cdcUser,configId:a.customValues&&a.customValues.configId?a.customValues.configId:null})}};ISQ.Embed.Mobile={};ISQ.Embed.Mobile.resizeAction=function(c){if(!_nRepData.embed.sentMessageToWidget){return true}var d=_nRepData.embed;var b=d.size[0];var a=275;if(c<a){c=a}if(c<b){ISQ.Embed.Mobile.setWidgetWidth(c-20,d,b)}else{if(d.iframe.parentNode.offsetWidth<b){ISQ.Embed.Mobile.setWidgetWidth(b-20,d,b)}}return false};ISQ.Embed.Mobile.setWidgetWidth=function(c,b,a){if(c==0||c>a){c=a}if(b.iframe.offsetWidth===c){return}b.iframe.parentNode.style.width=c+"px";b.iframe.style.width=c+"px";if(b.dynamicSize){b.cdcUser.sendMessage("subject=dynamicSizeRequest")}};ISQ.Embed.Mobile.isMobileOptimized=function(){if(typeof ISQ.Embed.Mobile.mobileOptimized=="undefined"){var a=false;var b=document.querySelector('meta[name="viewport"]');if(ISQ.Http.browser.isMobile&&b&&b.content){if(/width/.test(b.content)||/initial-scale/.test(b.content)){a=true}}ISQ.Embed.Mobile.mobileOptimized=a}return ISQ.Embed.Mobile.mobileOptimized};ISQ.Embed.initCDC=function(a){ISQ.Widget.initCDC(a,ISQ.Embed.cdcMessageHandler,ISQ.Cnf_Embed);
ISQ.API.init(a)};ISQ.Embed.scrollEvent=function(){var a=[];a.push("subject=scrolledOrReiszed");a.push("&scrollleft=");a.push(window.scrollX||document.body.scrollLeft||document.documentElement.scrollLeft);a.push("&scrolltop=");a.push(window.scrollY||document.documentElement.scrollTop);a.push("&width=");a.push(window.innerWidth||document.documentElement.clientWidth);a.push("&height=");a.push(window.innerHeight||document.documentElement.clientHeight);a.push("&offsettop=");a.push(ISQ.Html.position(_nRepData.embed.iframe,document.body).y);_nRepData.embed.cdcUser.sendMessage(a.join(""))};ISQ.Embed.cdcMessageHandler=function(messageArgs){if(messageArgs.widget!=="embed"){return}var subject=messageArgs.subject;if(!this.sentMessageToWidget){ISQ.Widget.sendAPItoWidget(this);this.sentMessageToWidget=true}switch(subject){case"enableScrollingEvent":window.addEvents(window,"onscroll",ISQ.Embed.scrollEvent);window.addEvents(window,"onresize",ISQ.Embed.scrollEvent);ISQ.Embed.scrollEvent();break;case"disableScrollingEvent":window.removeEvents(window,"onscroll",ISQ.Embed.scrollEvent);window.removeEvents(window,"onresize",ISQ.Embed.scrollEvent);break;case"getWindowAttributes":ISQ.Embed.scrollEvent();break;case"reset":this.sentMessageToWidget=false;this.size[1]=1;break;case"scrollTo":var targetOffsetTop=parseFloat(messageArgs.offset);if(messageArgs.onlyifbelow==="true"&&ISQ.Html.getScroll("top")<targetOffsetTop){return}window.scrollTo(ISQ.Html.getScroll("left"),targetOffsetTop);break;case"goMiddle":var containerOffset=ISQ.Html.position(this.iframe.parentNode).y;if(containerOffset<ISQ.Html.getScroll("top")){window.scrollTo(ISQ.Html.getScroll("left"),containerOffset+this.iframe.parentNode.offsetHeight/3)}break;case"goUp":var containerOffset=ISQ.Html.position(this.iframe.parentNode).y;if(containerOffset<ISQ.Html.getScroll("top")){window.scrollTo(ISQ.Html.getScroll("left"),containerOffset)}break;case"updateContext":var newContext=eval("("+messageArgs.context+")");ISQ.Widget.applyContextToCookie(newContext);break;case"setSize":var height=messageArgs.height;
var firstTime=(this.size[1]===1);if(this.iframe.offsetHeight==height&&this.iframe.parentNode.offsetHeight==height){return}if(ISQ.Http.browser.isMobile){if(firstTime){this.size[1]=height}}if(!ISQ.Widget.resizeIframeOnLoad_IE(this,0,height,ISQ.Embed.windowLoaded)){this.iframe.parentNode.style.height=height+"px";this.iframe.style.height=height+"px";if(this.mobileBlockerLink){this.mobileBlockerLink.style.height=height+"px";this.mobileBlockerLink.style.top="-"+height+"px"}if(!firstTime){var containerOffset=ISQ.Html.position(this.iframe.parentNode).y;if(containerOffset+this.iframe.parentNode.offsetHeight<ISQ.Html.getScroll("top")){window.scrollTo(0,containerOffset)}}}if(ISQ.Http.browser.isIOS7){this.cdcUser.sendMessage("subject=setHeight&size="+height)}if(_nRepData.embed.cdcUser.resizeIframe){_nRepData.embed.cdcUser.resizeIframe.apply(this,[height])}break;case"click":try{if(typeof(nanoRep.FAQ)!="undefined"&&typeof(nanoRep.FAQ.Likes)!="undefined"){nanoRep.FAQ.Likes.toggleDislikeOptions(true)}}catch(e){}break;default:ISQ.Widget.handleCommonCDCMessage(messageArgs,this);break}};ISQ.Embed.loadFloatWidget=function(){var b=document.createElement("div");b.id="nanoRepProxyContainer";b.className="nanorep_loadingData";b.setAttribute("aria-live","polite");b.style.cssText="position:absolute;top:-500px;left:0px;";document.body.appendChild(b);var a=_nRepData.embed;_nRepData["float"]={account:a.account,cdcVersion:a.cdcVersion,cdcFrame:a.cdcFrame,scriptVersion:a.scriptVersion};(function(){var f=function(){var g=window._nRepData||[];g.windowLoaded=true;if(typeof(g.windowOnload)==="function"){g.windowOnload()}};if(window.attachEvent){window.attachEvent("onload",f)}else{if(window.addEventListener){window.addEventListener("load",f,false)}}var d=document.createElement("script");d.type="text/javascript";d.async=true;d.defer=true;d.src=("https:"==document.location.protocol?"https://":"http://")+ISQ.Cnf_Embed.serverUrl+"/widget/scripts/float.js";var c=document.getElementsByTagName("head")[0];c.appendChild(d)})()};ISQ.Embed.windowLoaded=function(b,c,a){b.iframe.parentNode.style.height=a+"px";
b.iframe.style.height=a+"px"};ISQ.Embed.searchByLabels=function(a){var d=_nRepData.embed;var c=[];c.push("subject=api&searchbylabels=");var b=a&&a.length?a.join(","):"null";c.push(ISQ.Http.Cookies.encode64(b));d.cdcUser.sendMessage(c.join(""))};window._nRepData.Widgets=window._nRepData.Widgets||{};window._nRepData.Widgets._widgetId=0;window._nRepData.Widgets.getNextWidgetId=function(){return"widget_"+window._nRepData.Widgets._widgetId++};window._nRepData.Widgets.mergeCommonProperties=function(c){var a=window._nRepData;var b=function(d,f){if(!f){if(a[d]&&!c[d]){c[d]=a[d]}}else{if(a[d]&&(!c.customValues||!c.customValues[d])){if(!c.customValues){c.customValues={}}c.customValues[d]=a[d]}}};b("pageId");b("naive");b("conversionTag");b("searchDelay");b("splitTestGroup");b("kb");b("formValues");b("context");b("customParams");b("setFocus");b("onloadQuestionId",true);b("configId",true);if(c.type==="float"){b("anchorX")}if(!c.events&&(a.events||a.reportQueryHandler)){if(a.events){c.events=a.events}else{c.events={};c.events["query"]=a.reportQueryHandler}}if(c.events&&c.events["reportQueryHandler"]){c.events["query"]=c.events["reportQueryHandler"]}ISQ.Widget.handleEventMessage({type:"scriptload"},c)};(function(){var a=window._nRepData;if(typeof(window.nanoRep.Embed)!="undefined"&&a.embed&&!a.embed.processed){a.embed.processed=true;window._nRepData.Widgets.mergeCommonProperties(a.embed);window.nanoRep.Embed.loadWidget(a.embed)}if(typeof(window.nanoRep.Float)!="undefined"&&a["float"]&&!a["float"].processed){a["float"].processed=true;window._nRepData.Widgets.mergeCommonProperties(a["float"]);window.nanoRep.Float.preInit()}})();